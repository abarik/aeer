<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>7 Adatmanipuláció | Adatkezelés és egyváltozós elemzések R-ben</title>
<meta name="author" content="Abari Kálmán">
<meta name="description" content="7.1 Adatkezelés az Alap R-ben  Ebben a fejezetben: Ebben a fejezetben az adattáblák manipulációját tekintjük át, melyek az adatkezelés szempontjából a legfontosabb R objektumok. Mint korábban...">
<meta name="generator" content="bookdown 0.28 with bs4_book()">
<meta property="og:title" content="7 Adatmanipuláció | Adatkezelés és egyváltozós elemzések R-ben">
<meta property="og:type" content="book">
<meta property="og:url" content="https://abarik.github.io/aeer/adatmanipulacio.html">
<meta property="og:image" content="https://abarik.github.io/aeer/images/cover.jpg">
<meta property="og:description" content="7.1 Adatkezelés az Alap R-ben  Ebben a fejezetben: Ebben a fejezetben az adattáblák manipulációját tekintjük át, melyek az adatkezelés szempontjából a legfontosabb R objektumok. Mint korábban...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="7 Adatmanipuláció | Adatkezelés és egyváltozós elemzések R-ben">
<meta name="twitter:description" content="7.1 Adatkezelés az Alap R-ben  Ebben a fejezetben: Ebben a fejezetben az adattáblák manipulációját tekintjük át, melyek az adatkezelés szempontjából a legfontosabb R objektumok. Mint korábban...">
<meta name="twitter:image" content="https://abarik.github.io/aeer/images/cover.jpg">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.0/transition.js"></script><script src="libs/bs3compat-0.4.0/tabs.js"></script><script src="libs/bs3compat-0.4.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-68765210-2', 'auto');
      ga('send', 'pageview');

    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="css/style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Adatkezelés és egyváltozós elemzések R-ben</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Üdvözöljük</a></li>
<li><a class="" href="eloszo.html">Előszó</a></li>
<li><a class="" href="itt-kezdodik.html"><span class="header-section-number">1</span> Itt kezdődik</a></li>
<li><a class="" href="mi-az-r.html"><span class="header-section-number">2</span> Mi az R?</a></li>
<li><a class="" href="az-r-telepitese.html"><span class="header-section-number">3</span> Az R telepítése</a></li>
<li><a class="" href="munka-az-r-ben.html"><span class="header-section-number">4</span> Munka az R-ben</a></li>
<li><a class="" href="az-r-nyelv.html"><span class="header-section-number">5</span> Az R nyelv</a></li>
<li><a class="" href="beolvasas.html"><span class="header-section-number">6</span> Beolvasás</a></li>
<li><a class="active" href="adatmanipulacio.html"><span class="header-section-number">7</span> Adatmanipuláció</a></li>
<li><a class="" href="mutatok-tablazatok.html"><span class="header-section-number">8</span> Mutatók és táblázatok</a></li>
<li><a class="" href="grafika-az-r-ben.html"><span class="header-section-number">9</span> Grafika az R-ben</a></li>
<li><a class="" href="irodalomjegyzek.html">Irodalomjegyzék</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/abarik/aeer">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="adatmanipulacio" class="section level1" number="7">
<h1>
<span class="header-section-number">7</span> Adatmanipuláció<a class="anchor" aria-label="anchor" href="#adatmanipulacio"><i class="fas fa-link"></i></a>
</h1>
<div class="inline-figure"><img src="images/ch_07_small.png" width="70%" style="display: block; margin: auto;"></div>
<div id="adatkezelés-az-alap-r-ben" class="section level2" number="7.1">
<h2>
<span class="header-section-number">7.1</span> Adatkezelés az Alap R-ben<a class="anchor" aria-label="anchor" href="#adatkezel%C3%A9s-az-alap-r-ben"><i class="fas fa-link"></i></a>
</h2>

<div class="rmdlevel1">
Ebben a fejezetben:
</div>
<p>Ebben a fejezetben az adattáblák manipulációját tekintjük át, melyek az adatkezelés szempontjából a legfontosabb R objektumok. Mint korábban láttuk, a mátrixhoz hasonlóan sorokat és oszlopokat tartalmaz, illetve a listához hasonlóan elemekből, méghozzá azonos hosszúságú oszlopvektorokból épül fel (<a href="az-r-nyelv.html#fig:adatszerkezetek-1">5.1</a>. ábra). Az adattábla kettős eredete jelentősen megkönnyíti az ilyen adatok kezelését.</p>
<p>Az adattábla sorai egyedekre (személyek, tárgyak, dolgok stb.) vonatkozó megfigyelések, az oszlopok pedig a megfigyelt tulajdonságok. A statisztikához közelebbi fogalmakkal, az adattáblában az adatmátrixunkat/többdimenziós mintánkat rögzíthetjük, a sorok a mintaelemek, az oszlopok a megfigyelt változók.</p>
<p>Az adattábla inhomogén adatszerkezet, oszlopai különböző típusú adatokat is tartalmazhatnak. Jellemzően kvalitatív (nominális és ordinális skálán mért) adatok tárolására a faktort használjuk, kvantitatív (intervallum és arányskálán mért) adatok tárolására a numerikus vektort. Természetesen adattáblában karakteres és logikai vektorok is szerepelhetnek, sőt dátumokat és időpontokat is kezelhetünk az adattáblában.</p>
<div id="információ-megtekintése" class="section level3" number="7.1.1">
<h3>
<span class="header-section-number">7.1.1</span> Információ megtekintése<a class="anchor" aria-label="anchor" href="#inform%C3%A1ci%C3%B3-megtekint%C3%A9se"><i class="fas fa-link"></i></a>
</h3>
<p>Az adatbázis beolvasása (@ref(#beolvasas)) után következik az információk begyűjtése a beolvasott adatokról. A legfontosabb információkérő függvényeket a <a href="adatmanipulacio.html#tab:infofuggvenyek">7.1</a> táblázat tartalmazza. Az információ megszerzésének célja az egyszerű tájékozódáson kívül a beolvasás helyességének ellenőrzése: rendelkezésre áll-e a kívánt sor- és oszlopszám, az oszlopnevek rendben vannak-e, a numerikusnak szánt változók valóban számokat tartalmaznak-e és a karakteres oszlopokban az esetleges magyar ékezetek rendben megjelennek-e.</p>
<div class="inline-table"><table class="table table-striped table-hover" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:infofuggvenyek">TÁBLÁZAT 7.1: </span>Információt kérő függvények
</caption>
<thead><tr>
<th style="text-align:left;">
Függvény
</th>
<th style="text-align:left;">
Leírás
</th>
<th style="text-align:left;">
Példa
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
<span style="   font-family: monospace;  ">str(object)</span>
</td>
<td style="text-align:left;">
szerkezet kiírása
</td>
<td style="text-align:left;">
<span style="   font-family: monospace;  ">str(df)</span>
</td>
</tr>
<tr>
<td style="text-align:left;">
<span style="   font-family: monospace;  ">dim(x)</span>
</td>
<td style="text-align:left;">
x dimenziói
</td>
<td style="text-align:left;">
<span style="   font-family: monospace;  ">dim(df)</span>
</td>
</tr>
<tr>
<td style="text-align:left;">
<span style="   font-family: monospace;  ">nrow(x)</span>
</td>
<td style="text-align:left;">
x sorainak száma
</td>
<td style="text-align:left;">
<span style="   font-family: monospace;  ">nrow(df)</span>
</td>
</tr>
<tr>
<td style="text-align:left;">
<span style="   font-family: monospace;  ">ncol(x)</span>
</td>
<td style="text-align:left;">
x oszlopainak száma
</td>
<td style="text-align:left;">
<span style="   font-family: monospace;  ">ncol(df)</span>
</td>
</tr>
<tr>
<td style="text-align:left;">
<span style="   font-family: monospace;  ">names(x)</span>
</td>
<td style="text-align:left;">
x elemeinek neve
</td>
<td style="text-align:left;">
<span style="   font-family: monospace;  ">names(df)</span>
</td>
</tr>
<tr>
<td style="text-align:left;">
<span style="   font-family: monospace;  ">colnames(x)</span>
</td>
<td style="text-align:left;">
x oszlopnevei
</td>
<td style="text-align:left;">
<span style="   font-family: monospace;  ">colnames(df)</span>
</td>
</tr>
<tr>
<td style="text-align:left;">
<span style="   font-family: monospace;  ">rownames(x)</span>
</td>
<td style="text-align:left;">
x sornevei
</td>
<td style="text-align:left;">
<span style="   font-family: monospace;  ">rownames(df)</span>
</td>
</tr>
<tr>
<td style="text-align:left;">
<span style="   font-family: monospace;  ">head(x,n=6)</span>
</td>
<td style="text-align:left;">
x első sorai
</td>
<td style="text-align:left;">
<span style="   font-family: monospace;  ">head(df)</span>
</td>
</tr>
<tr>
<td style="text-align:left;">
<span style="   font-family: monospace;  ">tail(x,n=6)</span>
</td>
<td style="text-align:left;">
x utolsó sorai
</td>
<td style="text-align:left;">
<span style="   font-family: monospace;  ">tail(df)</span>
</td>
</tr>
<tr>
<td style="text-align:left;">
<span style="   font-family: monospace;  ">View(x)</span>
</td>
<td style="text-align:left;">
x teljes tartalma
</td>
<td style="text-align:left;">
<span style="   font-family: monospace;  ">View(df)</span>
</td>
</tr>
<tr>
<td style="text-align:left;">
<span style="   font-family: monospace;  ">class(x)</span>
</td>
<td style="text-align:left;">
x típusa
</td>
<td style="text-align:left;">
<span style="   font-family: monospace;  ">class(df);class(df$oszlop)</span>
</td>
</tr>
<tr>
<td style="text-align:left;">
<span style="   font-family: monospace;  ">length(x)</span>
</td>
<td style="text-align:left;">
x hossza
</td>
<td style="text-align:left;">
<span style="   font-family: monospace;  ">length(df);length(df$oszlop)</span>
</td>
</tr>
<tr>
<td style="text-align:left;">
<span style="   font-family: monospace;  ">unique(x)</span>
</td>
<td style="text-align:left;">
x különböző értékei
</td>
<td style="text-align:left;">
<span style="   font-family: monospace;  ">unique(df$oszlop)</span>
</td>
</tr>
<tr>
<td style="text-align:left;">
<span style="   font-family: monospace;  ">table(…,useNA)</span>
</td>
<td style="text-align:left;">
gyakorisági tábla
</td>
<td style="text-align:left;">
<span style="   font-family: monospace;  ">table(df$oszlop,useNA=‘ifany’)</span>
</td>
</tr>
<tr>
<td style="text-align:left;">
<span style="   font-family: monospace;  ">summary(object)</span>
</td>
<td style="text-align:left;">
leíró adatok
</td>
<td style="text-align:left;">
<span style="   font-family: monospace;  ">summary(df);summary(df$oszlop)</span>
</td>
</tr>
</tbody>
</table></div>
<p>Az adatelemzési munkánk során a beolvasás előtt már sok ismeretünk összegyűlt az adatbázisról, de most tegyünk úgy, mintha egy ismeretlen <code>flow.xlsx</code> adatbázist kellene felfedeznünk.</p>
<div class="sourceCode" id="cb325"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">flow</span> <span class="op">&lt;-</span> <span class="fu">rio</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"adat/flow.xlsx"</span><span class="op">)</span> <span class="co"># beolvasás</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">flow</span><span class="op">)</span>    <span class="co"># a teljes szerkezet</span></span>
<span><span class="co">#&gt; 'data.frame':    100 obs. of  25 variables:</span></span>
<span><span class="co">#&gt;  $ alkatoi.tev    : chr  "Igen" "Igen" "Nem" "Nem" ...</span></span>
<span><span class="co">#&gt;  $ kor            : num  26 20 22 21 21 25 53 21 22 21 ...</span></span>
<span><span class="co">#&gt;  $ nem            : chr  "Férfi" "Nő" "Nő" "Férfi" ...</span></span>
<span><span class="co">#&gt;  $ csaladi.allapot: chr  "Egyedülálló" "Egyedülálló" "Élettársi kapcsolatban él" "Egyedülálló" ...</span></span>
<span><span class="co">#&gt;  $ isk.vegz       : chr  "Egyetem" "Gimnázium" "Gimnázium" "Gimnázium" ...</span></span>
<span><span class="co">#&gt;  $ flow.1         : num  2 4 4 3 5 5 5 4 5 5 ...</span></span>
<span><span class="co">#&gt;  $ flow.2         : num  4 4 4 4 5 5 5 4 4 5 ...</span></span>
<span><span class="co">#&gt;  $ flow.3         : num  5 5 3 3 5 5 3 4 4 5 ...</span></span>
<span><span class="co">#&gt;  $ flow.4         : num  5 5 4 4 2 5 3 4 5 5 ...</span></span>
<span><span class="co">#&gt;  $ flow.5         : num  5 5 5 3 3 5 5 5 5 5 ...</span></span>
<span><span class="co">#&gt;  $ flow.6         : num  1 4 2 3 4 1 3 2 2 4 ...</span></span>
<span><span class="co">#&gt;  $ flow.7         : num  2 4 1 4 4 3 5 3 5 5 ...</span></span>
<span><span class="co">#&gt;  $ flow.8         : num  4 5 4 4 4 5 4 4 5 5 ...</span></span>
<span><span class="co">#&gt;  $ flow.9         : num  5 5 3 4 5 5 3 4 5 5 ...</span></span>
<span><span class="co">#&gt;  $ flow.10        : num  4 5 4 3 5 5 5 4 4 5 ...</span></span>
<span><span class="co">#&gt;  $ flow.11        : num  4 5 2 3 5 5 3 3 5 5 ...</span></span>
<span><span class="co">#&gt;  $ flow.12        : num  4 4 1 3 4 5 5 4 5 5 ...</span></span>
<span><span class="co">#&gt;  $ flow.13        : num  5 4 2 4 5 3 5 4 5 5 ...</span></span>
<span><span class="co">#&gt;  $ flow.14        : num  3 4 2 4 5 5 3 3 5 5 ...</span></span>
<span><span class="co">#&gt;  $ flow.15        : num  3 5 3 4 4 5 5 4 5 5 ...</span></span>
<span><span class="co">#&gt;  $ flow.16        : num  3 3 3 3 4 2 4 2 3 5 ...</span></span>
<span><span class="co">#&gt;  $ flow.17        : num  4 5 3 4 3 2 4 4 5 5 ...</span></span>
<span><span class="co">#&gt;  $ flow.18        : num  5 5 4 4 2 5 5 5 5 5 ...</span></span>
<span><span class="co">#&gt;  $ flow.19        : num  4 5 4 2 5 5 5 2 5 5 ...</span></span>
<span><span class="co">#&gt;  $ flow.20        : num  3 4 1 2 4 5 1 2 3 5 ...</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">flow</span><span class="op">)</span>  <span class="co"># típus                </span></span>
<span><span class="co">#&gt; [1] "data.frame"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span><span class="op">(</span><span class="va">flow</span><span class="op">)</span>    <span class="co"># sor- és oszlopszám</span></span>
<span><span class="co">#&gt; [1] 100  25</span></span></code></pre></div>
<p>A fenti sorok után világossá válik, hogy egy 100 sort és 25 oszlopot tartalmazó <em>adattábla</em> (<em>data frame</em>) áll rendelkezésre. Az oszlopnevek a <code><a href="https://rdrr.io/r/base/names.html">names()</a></code> és a <code><a href="https://rdrr.io/r/base/colnames.html">colnames()</a></code> függvényekkel is megismerhetők</p>
<div class="sourceCode" id="cb326"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">flow</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span>    <span class="co"># az első 4 oszlop neve</span></span>
<span><span class="co">#&gt; [1] "alkatoi.tev"     "kor"             "nem"             "csaladi.allapot"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">flow</span><span class="op">)</span><span class="op">[</span><span class="fl">5</span><span class="op">:</span><span class="fl">8</span><span class="op">]</span> <span class="co"># a következő 4 oszlop neve</span></span>
<span><span class="co">#&gt; [1] "isk.vegz" "flow.1"   "flow.2"   "flow.3"</span></span></code></pre></div>
<p>Az oszlopnevek viszonylag beszédesek, de jobban is megismerhetjük ezeket a változókat.</p>
<div class="sourceCode" id="cb327"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">flow</span><span class="op">$</span><span class="va">alkatoi.tev</span><span class="op">)</span>   <span class="co"># az alkotoi.tev változó típusa</span></span>
<span><span class="co">#&gt; [1] "character"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">flow</span><span class="op">$</span><span class="va">alkatoi.tev</span><span class="op">)</span>  <span class="co"># egyedi értékei</span></span>
<span><span class="co">#&gt; [1] "Igen" "Nem"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">flow</span><span class="op">$</span><span class="va">alkatoi.tev</span>, useNA <span class="op">=</span> <span class="st">"ifany"</span><span class="op">)</span> <span class="co"># gyakorisági táblázata</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Igen  Nem </span></span>
<span><span class="co">#&gt;   39   61</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">flow</span><span class="op">$</span><span class="va">kor</span><span class="op">)</span>                          <span class="co"># a kor változó típusa</span></span>
<span><span class="co">#&gt; [1] "numeric"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">flow</span><span class="op">$</span><span class="va">kor</span>, useNA <span class="op">=</span> <span class="st">"ifany"</span><span class="op">)</span>         <span class="co"># gyakorisági táblázata</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 36 39 40 42 43 45 50 51 52 53 </span></span>
<span><span class="co">#&gt;  1  2  2  4 22 18  4  4  3  5  4  1  2  1  1  1  1  1  2  1  1  3  3  4  5  3 </span></span>
<span><span class="co">#&gt; 69 </span></span>
<span><span class="co">#&gt;  1</span></span></code></pre></div>
<p>Az adatbázis tetszőleges részét megjeleníthetjük a konzolban a szokásos indexelés segítségével:</p>
<div class="sourceCode" id="cb328"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb328-1"><a href="adatmanipulacio.html#cb328-1" aria-hidden="true" tabindex="-1"></a>d.df<span class="co">[</span><span class="ot">sorindex, oszlopindex</span><span class="co">]</span></span></code></pre></div>
<p>Például 4 sorból az első 5 oszlopot így tekinthetjük meg:</p>
<div class="sourceCode" id="cb329"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">flow</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, <span class="fl">50</span><span class="op">:</span><span class="fl">51</span><span class="op">)</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span></span>
<span><span class="co">#&gt;    alkatoi.tev kor   nem csaladi.allapot  isk.vegz</span></span>
<span><span class="co">#&gt; 1         Igen  26 Férfi     Egyedülálló   Egyetem</span></span>
<span><span class="co">#&gt; 2         Igen  20    Nő     Egyedülálló Gimnázium</span></span>
<span><span class="co">#&gt; 50         Nem  22    Nő     Egyedülálló Gimnázium</span></span>
<span><span class="co">#&gt; 51        Igen  39    Nő           Házas   Egyetem</span></span></code></pre></div>
<p>Ne feledjük, hogy az <em>RStudio</em>-ban az <code>Environment</code> fülön is megjelenik a <code>flow</code> adatbázis a sikeres beolvasás után. Kattintva a neven a teljes adatbázist áttekinthetjük a bal felső részben (ezt a <code>View(flow)</code> paranccsal is kezdeményezhetjük), de a <code>flow</code> előtti ikonon kattintva megjeleníthetjük az adatbázis <code><a href="https://rdrr.io/r/utils/str.html">str()</a></code>-ból ismert szerkezete is.</p>
<p>További kényelmi lehetőség, ha a <em>tibble</em> típus kényelmes megjelenítését is kihasználjuk. Ehhez konvertáljuk át az adattáblánkat <em>tibble</em> típusúvá, és egyszerűen jelenítsük meg az objektumot:</p>
<div class="sourceCode" id="cb330"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span>
<span><span class="va">flow.tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html">as_tibble</a></span><span class="op">(</span><span class="va">flow</span><span class="op">)</span> <span class="co"># tibble típusú adatbázis létrehozása</span></span>
<span><span class="va">flow.tbl</span>                    <span class="co"># kényelmes megjelenítés</span></span>
<span><span class="co">#&gt; # A tibble: 100 × 25</span></span>
<span><span class="co">#&gt;    alkat…¹   kor nem   csala…² isk.v…³ flow.1 flow.2 flow.3 flow.4 flow.5 flow.6</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;    &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 Igen       26 Férfi Egyedü… Egyetem      2      4      5      5      5      1</span></span>
<span><span class="co">#&gt;  2 Igen       20 Nő    Egyedü… Gimnáz…      4      4      5      5      5      4</span></span>
<span><span class="co">#&gt;  3 Nem        22 Nő    Élettá… Gimnáz…      4      4      3      4      5      2</span></span>
<span><span class="co">#&gt;  4 Nem        21 Férfi Egyedü… Gimnáz…      3      4      3      4      3      3</span></span>
<span><span class="co">#&gt;  5 Igen       21 Nő    Egyedü… Gimnáz…      5      5      5      2      3      4</span></span>
<span><span class="co">#&gt;  6 Igen       25 Nő    Elvált  Egyetem      5      5      5      5      5      1</span></span>
<span><span class="co">#&gt;  7 Nem        53 Nő    Özvegy  Gimnáz…      5      5      3      3      5      3</span></span>
<span><span class="co">#&gt;  8 Nem        21 Nő    Egyedü… Gimnáz…      4      4      4      4      5      2</span></span>
<span><span class="co">#&gt;  9 Nem        22 Nő    Élettá… Gimnáz…      5      4      4      5      5      2</span></span>
<span><span class="co">#&gt; 10 Nem        21 Nő    Egyedü… Gimnáz…      5      5      5      5      5      4</span></span>
<span><span class="co">#&gt; # … with 90 more rows, 14 more variables: flow.7 &lt;dbl&gt;, flow.8 &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   flow.9 &lt;dbl&gt;, flow.10 &lt;dbl&gt;, flow.11 &lt;dbl&gt;, flow.12 &lt;dbl&gt;, flow.13 &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   flow.14 &lt;dbl&gt;, flow.15 &lt;dbl&gt;, flow.16 &lt;dbl&gt;, flow.17 &lt;dbl&gt;, flow.18 &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   flow.19 &lt;dbl&gt;, flow.20 &lt;dbl&gt;, and abbreviated variable names ¹​alkatoi.tev,</span></span>
<span><span class="co">#&gt; #   ²​csaladi.allapot, ³​isk.vegz</span></span>
<span><span class="co">#&gt; # ℹ Use `print(n = ...)` to see more rows, and `colnames()` to see all variable names</span></span></code></pre></div>
</div>
<div id="oszlopok-kezelése" class="section level3" number="7.1.2">
<h3>
<span class="header-section-number">7.1.2</span> Oszlopok kezelése<a class="anchor" aria-label="anchor" href="#oszlopok-kezel%C3%A9se"><i class="fas fa-link"></i></a>
</h3>
<div id="oszlopnevek-módosítása" class="section level4" number="7.1.2.1">
<h4>
<span class="header-section-number">7.1.2.1</span> Oszlopnevek módosítása<a class="anchor" aria-label="anchor" href="#oszlopnevek-m%C3%B3dos%C3%ADt%C3%A1sa"><i class="fas fa-link"></i></a>
</h4>
<p>A sikeres beolvasás és a szükséges tájékozódás után az oszlopnevek áttekintése és esetleges módosítása a következő lépés. Ez kulcsfontosságú a további munka szempontjából, ugyanis a jól megválasztott változónevek jelentősen meggyorsíthatják a további munkát, és fordítva, a kevésbe beszédes, következetlen, a túl rövid vagy túl hosszú változónevek akadályozhatják a sikeres adatelemzést. A változónevek mindig legyenek beszédesek, csak az angol ábécé kisbetűit és számjegyeket használjunk, több részből álló neveket aláhúzással (<code>_</code>) esetleg ponttal (<code>.</code>) tagoljuk (<a href="https://style.tidyverse.org/syntax.html">R kódolási stílus</a>).</p>
<p>Egy adattábla oszlopait a <code><a href="https://rdrr.io/r/base/names.html">names()</a></code> vagy <code><a href="https://rdrr.io/r/base/colnames.html">colnames()</a></code>, a sorait a <code><a href="https://rdrr.io/r/base/colnames.html">rownames()</a></code> függvény használatával kérdezhetjük le és nevezhetjük át. A sornevek egymástól különböző, karakteres vagy numerikus egész értékek lehetnek, míg az oszlopnevek csak karakteres adatok.</p>
<p>Az oszlopnevek módosításának több oka lehet. Példánkban magyar változónevekre váltunk, de sokszor rövidítjük vagy beszédesebbé tesszük az oszlopaink nevét.</p>
<div class="sourceCode" id="cb331"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bandak</span> <span class="op">&lt;-</span> <span class="fu">rio</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"adat/metal_bandak.xlsx"</span><span class="op">)</span></span>
<span><span class="va">bandak</span></span>
<span><span class="co">#&gt;       banda  fan formed split      origin</span></span>
<span><span class="co">#&gt; 1     Kiuas  106   2000  2013  Finnország</span></span>
<span><span class="co">#&gt; 2    Accept  681   1968  &lt;NA&gt; Németország</span></span>
<span><span class="co">#&gt; 3 Metallica 4122   1981  &lt;NA&gt;         USA</span></span>
<span><span class="co">#&gt; 4    Zonata   23   1998  2003  Svédország</span></span>
<span><span class="co">#&gt; 5   Therion 1266   1987  &lt;NA&gt;  Svédország</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">bandak</span><span class="op">)</span>                     <span class="co"># az összes oszlop neve </span></span>
<span><span class="co">#&gt; [1] "banda"  "fan"    "formed" "split"  "origin"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">bandak</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"rajongo"</span>     <span class="co"># 2. oszlop nevének átírása</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">bandak</span><span class="op">)</span><span class="op">[</span><span class="fl">3</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"alakulas"</span>,<span class="st">"felbomlas"</span>,<span class="st">"orszag"</span><span class="op">)</span> <span class="co"># 3-5. oszlopok átnevezése</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">bandak</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">bandak</span><span class="op">)</span><span class="op">==</span><span class="st">"banda"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"nev"</span> <span class="co"># a "banda" nevű oszlop átnevezése</span></span>
<span><span class="va">bandak</span></span>
<span><span class="co">#&gt;         nev rajongo alakulas felbomlas      orszag</span></span>
<span><span class="co">#&gt; 1     Kiuas     106     2000      2013  Finnország</span></span>
<span><span class="co">#&gt; 2    Accept     681     1968      &lt;NA&gt; Németország</span></span>
<span><span class="co">#&gt; 3 Metallica    4122     1981      &lt;NA&gt;         USA</span></span>
<span><span class="co">#&gt; 4    Zonata      23     1998      2003  Svédország</span></span>
<span><span class="co">#&gt; 5   Therion    1266     1987      &lt;NA&gt;  Svédország</span></span></code></pre></div>
</div>
<div id="oszlop-indexelése" class="section level4" number="7.1.2.2">
<h4>
<span class="header-section-number">7.1.2.2</span> Oszlop indexelése<a class="anchor" aria-label="anchor" href="#oszlop-indexel%C3%A9se"><i class="fas fa-link"></i></a>
</h4>
<p>Az <em>Alap R</em>-ben az oszlopok indexelése a <code>[</code> vagy <code>[[</code> operátor segítségével történhet. Mivel az adattáblák örökölték a kétdimenziós mátrix és az egydimenziós lista adatszerkezet indexelési lehetőségeit, így az oszlopokra négyféle módon hivatkozhatunk:</p>
<div class="sourceCode" id="cb332"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb332-1"><a href="adatmanipulacio.html#cb332-1" aria-hidden="true" tabindex="-1"></a>adattábla<span class="co">[</span><span class="ot">,oszlopindex</span><span class="co">]</span>  # hivatkozás egy vagy több oszlopra</span>
<span id="cb332-2"><a href="adatmanipulacio.html#cb332-2" aria-hidden="true" tabindex="-1"></a>adattábla<span class="co">[</span><span class="ot">oszlopindex</span><span class="co">]</span>   # hivatkozás egy vagy több oszlopra</span>
<span id="cb332-3"><a href="adatmanipulacio.html#cb332-3" aria-hidden="true" tabindex="-1"></a>adattábla[<span class="co">[</span><span class="ot">oszlopnév</span><span class="co">]</span>]   # hivatkozás egyetlen oszlopra</span>
<span id="cb332-4"><a href="adatmanipulacio.html#cb332-4" aria-hidden="true" tabindex="-1"></a>adattábla$oszlopnév      # hivatkozás egyetlen oszlopra</span></code></pre></div>
<p>Az fenti példa első sorában mátrixszerűen, második sorában listaszerűen indexelünk. A továbbiakban a mátrixszerű, azaz vesszőt tartalmazó hivatkozást használjuk. Az oszlopindex lehet numerikus vektor pozitív vagy negatív értékekkel, karakteres vektor, vagy akár logikai vektor is. Ha csak egyetlen oszlopra vagyunk kíváncsiak, akkor a <code>[[</code> vagy még gyakrabban a <code>$</code> operátort használjuk az oszlop nevének megadásával.</p>
<p>Az oszlopok elérése mindennapos a statisztikai munka során, így ezeket az indexelési formákat ismernünk kell.</p>
<div class="sourceCode" id="cb333"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">flow</span><span class="op">$</span><span class="va">kor</span>, na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span>           <span class="co"># kor átlaga</span></span>
<span><span class="co">#&gt; [1] 29.26</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">flow</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"kor"</span>, <span class="st">"flow.1"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span> <span class="co"># kor és flow.1 leíró statisztikai adatai</span></span>
<span><span class="co">#&gt;       kor           flow.1    </span></span>
<span><span class="co">#&gt;  Min.   :17.0   Min.   :1.00  </span></span>
<span><span class="co">#&gt;  1st Qu.:21.0   1st Qu.:3.00  </span></span>
<span><span class="co">#&gt;  Median :23.0   Median :4.00  </span></span>
<span><span class="co">#&gt;  Mean   :29.3   Mean   :4.01  </span></span>
<span><span class="co">#&gt;  3rd Qu.:33.0   3rd Qu.:5.00  </span></span>
<span><span class="co">#&gt;  Max.   :69.0   Max.   :5.00</span></span>
<span><span class="co"># "flow" szót tartalmazó oszlopok száma</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">flow</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="st">"flow"</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">flow</span><span class="op">)</span><span class="op">)</span><span class="op">]</span><span class="op">)</span> </span>
<span><span class="co">#&gt; [1] 20</span></span></code></pre></div>
<p>Ne feledjük, hogy mátrixszerű indexelés során is kaphatunk egydimenziós eredményt, hiszen ha egyetlen oszlopra hivatkozunk, akkor a <code>[</code> operátor automatikusan az egydimenziós vektorra vált a kétdimenziós adattábla helyett. Ezt a <code>drop=F</code> használatával akadályozhatjuk meg.</p>
<div class="sourceCode" id="cb334"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">flow</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"kor"</span>, <span class="st">"nem"</span><span class="op">)</span><span class="op">]</span> <span class="co"># két oszlop, nincs dimenzióvesztés</span></span>
<span><span class="co">#&gt;   kor   nem</span></span>
<span><span class="co">#&gt; 1  26 Férfi</span></span>
<span><span class="co">#&gt; 2  20    Nő</span></span>
<span><span class="co">#&gt; 3  22    Nő</span></span>
<span><span class="va">flow</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="st">"kor"</span><span class="op">]</span>           <span class="co"># egy oszlop, dimenzióvesztés</span></span>
<span><span class="co">#&gt; [1] 26 20 22</span></span>
<span><span class="va">flow</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="st">"kor"</span>, drop<span class="op">=</span><span class="cn">F</span><span class="op">]</span>   <span class="co"># egy oszlop, nincs dimenzióvesztés</span></span>
<span><span class="co">#&gt;   kor</span></span>
<span><span class="co">#&gt; 1  26</span></span>
<span><span class="co">#&gt; 2  20</span></span>
<span><span class="co">#&gt; 3  22</span></span></code></pre></div>
</div>
<div id="oszlopok-sorrendje" class="section level4" number="7.1.2.3">
<h4>
<span class="header-section-number">7.1.2.3</span> Oszlopok sorrendje<a class="anchor" aria-label="anchor" href="#oszlopok-sorrendje"><i class="fas fa-link"></i></a>
</h4>
<p>Ha már jól ismerjük az oszlopok indexelését, akkor számos további műveletre nyílik lehetőség. Ezek közül a legegyszerűbb az oszlopok sorrendjének megváltoztatása. Ha az oszlopindex hivatkozásai az eredeti oszlopsorrendtől eltérnek, akkor máris új oszlopsorrendet határoztunk meg.</p>
<div class="sourceCode" id="cb335"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># a korábbi 1. oszlop (alkotoi.tev) átkerül a 3. oszlopba</span></span>
<span><span class="va">flow</span> <span class="op">&lt;-</span> <span class="va">flow</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">1</span>, <span class="fl">4</span><span class="op">:</span><span class="fl">25</span><span class="op">)</span><span class="op">]</span> </span>
<span><span class="va">flow</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span></span>
<span><span class="co">#&gt;   kor   nem alkatoi.tev</span></span>
<span><span class="co">#&gt; 1  26 Férfi        Igen</span></span>
<span><span class="co">#&gt; 2  20    Nő        Igen</span></span></code></pre></div>
<p>Természetesen oszlopsorszámok helyett változóneveket is használhatunk.</p>
<div class="sourceCode" id="cb336"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bandak</span></span>
<span><span class="co">#&gt;         nev rajongo alakulas felbomlas      orszag</span></span>
<span><span class="co">#&gt; 1     Kiuas     106     2000      2013  Finnország</span></span>
<span><span class="co">#&gt; 2    Accept     681     1968      &lt;NA&gt; Németország</span></span>
<span><span class="co">#&gt; 3 Metallica    4122     1981      &lt;NA&gt;         USA</span></span>
<span><span class="co">#&gt; 4    Zonata      23     1998      2003  Svédország</span></span>
<span><span class="co">#&gt; 5   Therion    1266     1987      &lt;NA&gt;  Svédország</span></span>
<span><span class="co"># a rajongo oszlop a végére kerül</span></span>
<span><span class="va">bandak</span> <span class="op">&lt;-</span> <span class="va">bandak</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"nev"</span>, <span class="st">"alakulas"</span>, <span class="st">"felbomlas"</span>, <span class="st">"orszag"</span>, <span class="st">"rajongo"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">bandak</span></span>
<span><span class="co">#&gt;         nev alakulas felbomlas      orszag rajongo</span></span>
<span><span class="co">#&gt; 1     Kiuas     2000      2013  Finnország     106</span></span>
<span><span class="co">#&gt; 2    Accept     1968      &lt;NA&gt; Németország     681</span></span>
<span><span class="co">#&gt; 3 Metallica     1981      &lt;NA&gt;         USA    4122</span></span>
<span><span class="co">#&gt; 4    Zonata     1998      2003  Svédország      23</span></span>
<span><span class="co">#&gt; 5   Therion     1987      &lt;NA&gt;  Svédország    1266</span></span></code></pre></div>
</div>
<div id="oszlopok-létrehozása-és-törlése" class="section level4" number="7.1.2.4">
<h4>
<span class="header-section-number">7.1.2.4</span> Oszlopok létrehozása és törlése<a class="anchor" aria-label="anchor" href="#oszlopok-l%C3%A9trehoz%C3%A1sa-%C3%A9s-t%C3%B6rl%C3%A9se"><i class="fas fa-link"></i></a>
</h4>
<p>Láttuk korábban, hogy a <code><a href="https://rdrr.io/r/base/cbind.html">cbind()</a></code> segítségével oszlopokat adhatunk a meglévő adatbázisunkhoz. Például a meglévő <code>bandak</code> adatbázishoz adjunk hozzá egy kétoszlopos új adatbázist, amely a bandák Wikipédia oldalának címét, és egy szubjektív rangsort tartalmaz.</p>
<div class="sourceCode" id="cb337"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bandak.kieg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>wikipedia<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"https://en.wikipedia.org/wiki/Kiuas"</span>,</span>
<span>                                      <span class="st">"https://hu.wikipedia.org/wiki/Accept"</span>,</span>
<span>                                      <span class="st">"https://hu.wikipedia.org/wiki/Metallica"</span>,</span>
<span>                                      <span class="st">"https://en.wikipedia.org/wiki/Zonata"</span>,</span>
<span>                                      <span class="st">"https://en.wikipedia.org/wiki/Therion_(band)"</span><span class="op">)</span>,</span>
<span>                          rangsor<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">4</span>,<span class="fl">1</span>,<span class="fl">3</span>,<span class="fl">5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">bandak.2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span><span class="va">bandak</span>, <span class="va">bandak.kieg</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">bandak.2</span><span class="op">)</span></span></code></pre></div>
<p>Egyetlen oszlop beszúrására is van lehetőségünk, és hasonlóan törölhetünk egyetlen oszlopot is:</p>
<div class="sourceCode" id="cb338"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb338-1"><a href="adatmanipulacio.html#cb338-1" aria-hidden="true" tabindex="-1"></a>adattábla$új.oszlopnév       # új oszlop beszúrása a dataframe végére</span>
<span id="cb338-2"><a href="adatmanipulacio.html#cb338-2" aria-hidden="true" tabindex="-1"></a>adattábla$oszlopnév &lt;- NULL  # oszlop törlése</span></code></pre></div>
<p>Szúrjuk be a rangsor változót az eredeti <code>bandak</code> adatbázisba, majd távolítsuk el.</p>
<div class="sourceCode" id="cb339"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bandak</span><span class="op">$</span><span class="va">rangsor</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">4</span>,<span class="fl">1</span>,<span class="fl">3</span>,<span class="fl">5</span><span class="op">)</span>  <span class="co"># új oszlop beszúrása</span></span>
<span><span class="va">bandak</span><span class="op">$</span><span class="va">rangsor</span> <span class="op">&lt;-</span> <span class="cn">NULL</span>          <span class="co"># oszlop törlése</span></span></code></pre></div>
</div>
<div id="típuskonverzió" class="section level4" number="7.1.2.5">
<h4>
<span class="header-section-number">7.1.2.5</span> Típuskonverzió<a class="anchor" aria-label="anchor" href="#t%C3%ADpuskonverzi%C3%B3"><i class="fas fa-link"></i></a>
</h4>
<p>Az oszlopok nevének és sorrendjének optimális beállítása után meg kell vizsgálnunk, hogy az oszlopaink típusa megfelel-e az általa reprezentált statisztikai változók mérési skálájának. Nem léphetünk tovább az elemzés felé, amíg ez az összefüggés nem teljesül.</p>
<div class="inline-table"><table style="width:88%;" class="table table-sm">
<colgroup>
<col width="41%">
<col width="45%">
</colgroup>
<thead><tr class="header">
<th>Változó mérési skálája</th>
<th>R típus</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>nominális</td>
<td>faktor</td>
</tr>
<tr class="even">
<td>ordinális</td>
<td>faktor (rendezett)</td>
</tr>
<tr class="odd">
<td>intervallum</td>
<td>numerikus vektor</td>
</tr>
<tr class="even">
<td>arány</td>
<td>numerikus vektor</td>
</tr>
</tbody>
</table></div>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="21%">
<col width="41%">
<col width="37%">
</colgroup>
<thead><tr class="header">
<th>Cél mérési skála</th>
<th>Típuskonverzió</th>
<th>R függvény</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><ul>
<li>nominális</li>
</ul></td>
<td><ul>
<li>numerikusból faktor</li>
<li>karakteresből faktor</li>
</ul></td>
<td><ul>
<li><code>factor(x)</code></li>
</ul></td>
</tr>
<tr class="even">
<td><ul>
<li>ordinális</li>
</ul></td>
<td><ul>
<li>numerikusból faktor (rendezett)</li>
<li>karakteresből faktor (rendezett)</li>
</ul></td>
<td><ul>
<li><code>ordered(x)</code></li>
</ul></td>
</tr>
<tr class="odd">
<td><ul>
<li>intervallum</li>
<li>arány</li>
</ul></td>
<td><ul>
<li>karakteresből numerikus</li>
<li>faktorból numerikus</li>
</ul></td>
<td><ul>
<li><code>as.numeric(x)</code></li>
<li><code>as.numeric(as.character(x))</code></li>
</ul></td>
</tr>
</tbody>
</table></div>
<p>A típuskonverzió két leggyakoribb esetével foglalkozunk itt. Az egyik faktorrá konvertálás teszi a típuskonverziók legnagyobb részét. Ezt a <code><a href="https://rdrr.io/r/base/factor.html">factor()</a></code> függvénnyel végezzük el. A kiinduló változónk lehet numerikus vagy karakteres.</p>
<div class="sourceCode" id="cb340"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 1 1 2 1 1 1 2</span></span>
<span><span class="co">#&gt; Levels: 1 2</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Dohányzik"</span>, <span class="st">"Dohányzik"</span>, <span class="st">"Nem dohányzik"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] Dohányzik     Dohányzik     Nem dohányzik</span></span>
<span><span class="co">#&gt; Levels: Dohányzik Nem dohányzik</span></span></code></pre></div>
<p>Mindkét esetben előfordulhat, hogy a kiinduló változóban lévő egyedi numerikus értékek</p>
<p>A numerikus típuskonverzió kevésbé gyakori, de előfordulhat.</p>
<p>Például</p>
<div class="sourceCode" id="cb341"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">kor</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">44</span>, <span class="fl">39</span>, <span class="st">"55 év"</span>, <span class="fl">38</span><span class="op">)</span></span>
<span><span class="va">kor</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"55"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">kor</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 44 39 55 38</span></span></code></pre></div>
</div>
<div id="transzformáció" class="section level4" number="7.1.2.6">
<h4>
<span class="header-section-number">7.1.2.6</span> Transzformáció<a class="anchor" aria-label="anchor" href="#transzform%C3%A1ci%C3%B3"><i class="fas fa-link"></i></a>
</h4>
<p>Számos esetben szükség lehet az adattábla oszlopaiban lévő értéke átalakítására (transzformálására). Az értékeket vagy helyben (ugyanabban az oszlopban) változtatjuk meg, vagy új oszlopként szúrjuk be az adattáblába.
Adatok transzformálásához tekintsük a women adattáblát, amely a weight változójában font-ban mért értékeket tartalmaz. Ezt alakítsuk át kg-ban mért adatokká egy új oszlopban:</p>
<div class="sourceCode" id="cb342"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">women</span><span class="op">)</span>; <span class="va">women</span></span>
<span><span class="co">#&gt;    height weight</span></span>
<span><span class="co">#&gt; 1      58    115</span></span>
<span><span class="co">#&gt; 2      59    117</span></span>
<span><span class="co">#&gt; 3      60    120</span></span>
<span><span class="co">#&gt; 4      61    123</span></span>
<span><span class="co">#&gt; 5      62    126</span></span>
<span><span class="co">#&gt; 6      63    129</span></span>
<span><span class="co">#&gt; 7      64    132</span></span>
<span><span class="co">#&gt; 8      65    135</span></span>
<span><span class="co">#&gt; 9      66    139</span></span>
<span><span class="co">#&gt; 10     67    142</span></span>
<span><span class="co">#&gt; 11     68    146</span></span>
<span><span class="co">#&gt; 12     69    150</span></span>
<span><span class="co">#&gt; 13     70    154</span></span>
<span><span class="co">#&gt; 14     71    159</span></span>
<span><span class="co">#&gt; 15     72    164</span></span></code></pre></div>
<div class="sourceCode" id="cb343"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">women</span><span class="op">$</span><span class="va">suly</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">women</span><span class="op">$</span><span class="va">weight</span><span class="op">*</span><span class="fl">0.45</span><span class="op">)</span></span>
<span><span class="va">women</span></span>
<span><span class="co">#&gt;    height weight suly</span></span>
<span><span class="co">#&gt; 1      58    115   52</span></span>
<span><span class="co">#&gt; 2      59    117   53</span></span>
<span><span class="co">#&gt; 3      60    120   54</span></span>
<span><span class="co">#&gt; 4      61    123   55</span></span>
<span><span class="co">#&gt; 5      62    126   57</span></span>
<span><span class="co">#&gt; 6      63    129   58</span></span>
<span><span class="co">#&gt; 7      64    132   59</span></span>
<span><span class="co">#&gt; 8      65    135   61</span></span>
<span><span class="co">#&gt; 9      66    139   63</span></span>
<span><span class="co">#&gt; 10     67    142   64</span></span>
<span><span class="co">#&gt; 11     68    146   66</span></span>
<span><span class="co">#&gt; 12     69    150   68</span></span>
<span><span class="co">#&gt; 13     70    154   69</span></span>
<span><span class="co">#&gt; 14     71    159   72</span></span>
<span><span class="co">#&gt; 15     72    164   74</span></span></code></pre></div>
<p>Ugyanezt az eredményt a transform() függvény segítségével is elérhetjük, ahol a subset()-hez hasonlóan némileg egyszerűbben hivatkozhatunk az adattábla változóira. Most alakítsuk át height változót inch-ről cm-re.</p>
<div class="sourceCode" id="cb344"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/transform.html">transform</a></span><span class="op">(</span><span class="va">women</span>, magassag<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">height</span><span class="op">*</span><span class="fl">2.45</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;    height weight suly magassag</span></span>
<span><span class="co">#&gt; 1      58    115   52      142</span></span>
<span><span class="co">#&gt; 2      59    117   53      145</span></span>
<span><span class="co">#&gt; 3      60    120   54      147</span></span>
<span><span class="co">#&gt; 4      61    123   55      149</span></span>
<span><span class="co">#&gt; 5      62    126   57      152</span></span>
<span><span class="co">#&gt; 6      63    129   58      154</span></span>
<span><span class="co">#&gt; 7      64    132   59      157</span></span>
<span><span class="co">#&gt; 8      65    135   61      159</span></span>
<span><span class="co">#&gt; 9      66    139   63      162</span></span>
<span><span class="co">#&gt; 10     67    142   64      164</span></span>
<span><span class="co">#&gt; 11     68    146   66      167</span></span>
<span><span class="co">#&gt; 12     69    150   68      169</span></span>
<span><span class="co">#&gt; 13     70    154   69      172</span></span>
<span><span class="co">#&gt; 14     71    159   72      174</span></span>
<span><span class="co">#&gt; 15     72    164   74      176</span></span></code></pre></div>
<p>Amennyiben a fenti példákban nem új változónevek az átalakítás célpontjai, hanem már létező oszlopok, akkor helyben végezzük a transzformációt:</p>
<div class="sourceCode" id="cb345"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/transform.html">transform</a></span><span class="op">(</span><span class="va">women</span>, height<span class="op">=</span><span class="va">height</span><span class="op">-</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt;    height weight suly</span></span>
<span><span class="co">#&gt; 1      48    115   52</span></span>
<span><span class="co">#&gt; 2      49    117   53</span></span>
<span><span class="co">#&gt; 3      50    120   54</span></span>
<span><span class="co">#&gt; 4      51    123   55</span></span>
<span><span class="co">#&gt; 5      52    126   57</span></span>
<span><span class="co">#&gt; 6      53    129   58</span></span>
<span><span class="co">#&gt; 7      54    132   59</span></span>
<span><span class="co">#&gt; 8      55    135   61</span></span>
<span><span class="co">#&gt; 9      56    139   63</span></span>
<span><span class="co">#&gt; 10     57    142   64</span></span>
<span><span class="co">#&gt; 11     58    146   66</span></span>
<span><span class="co">#&gt; 12     59    150   68</span></span>
<span><span class="co">#&gt; 13     60    154   69</span></span>
<span><span class="co">#&gt; 14     61    159   72</span></span>
<span><span class="co">#&gt; 15     62    164   74</span></span></code></pre></div>
<p>A változók átalakításának másik gyakori esete, amikor az eredetileg folytonos változót kategórikus változóvá alakítjuk. A <code><a href="https://rdrr.io/r/base/cut.html">cut()</a></code> függvény segítségével numerikus vektorból faktort állíthatunk elő.</p>
<div class="sourceCode" id="cb346"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cut.html">cut</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,<span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] (0.991,4] (0.991,4] (0.991,4] (0.991,4] (4,7]     (4,7]     (4,7]    </span></span>
<span><span class="co">#&gt;  [8] (7,10]    (7,10]    (7,10]   </span></span>
<span><span class="co">#&gt; Levels: (0.991,4] (4,7] (7,10]</span></span></code></pre></div>
<p>A fenti példában a 10 elemű bemenő vektortból 3 szintű faktort hoztunk létre. Ha az intervallumok határát magunk szeretnénk megadni, akkor a második (breaks) argumentumban egy vektort kell megadnunk:</p>
<div class="sourceCode" id="cb347"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cut.html">cut</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,breaks<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">2</span>,<span class="fl">10</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] (0,2]  (0,2]  (2,10] (2,10] (2,10] (2,10] (2,10] (2,10] (2,10] (2,10]</span></span>
<span><span class="co">#&gt; Levels: (0,2] (2,10]</span></span></code></pre></div>
<p>A létrejövő faktor szintjei az intervallumok leírásaiból állnak, természetesen ezeket megvaáltoztathatjuk, csak a <code>labels=</code> paramétert kell használnunk:</p>
<div class="sourceCode" id="cb348"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cut.html">cut</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,breaks<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">2</span>,<span class="fl">7</span>,<span class="fl">10</span><span class="op">)</span>,label<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"gyenge"</span>,<span class="st">"közepes"</span>,<span class="st">"erős"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] gyenge  gyenge  közepes közepes közepes közepes közepes erős    erős   </span></span>
<span><span class="co">#&gt; [10] erős   </span></span>
<span><span class="co">#&gt; Levels: gyenge közepes erős</span></span></code></pre></div>
<p>Adattáblák esetében a <code><a href="https://rdrr.io/r/base/cut.html">cut()</a></code> függvény használatára láthatunk egy példát:</p>
<div class="sourceCode" id="cb349"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/transform.html">transform</a></span><span class="op">(</span><span class="va">women</span>,height<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/cut.html">cut</a></span><span class="op">(</span><span class="va">height</span>,breaks<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">60</span>,<span class="fl">70</span>,<span class="fl">100</span><span class="op">)</span>,labels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"alacsony"</span>,<span class="st">"közepes"</span>,<span class="st">"magas"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;      height weight suly</span></span>
<span><span class="co">#&gt; 1  alacsony    115   52</span></span>
<span><span class="co">#&gt; 2  alacsony    117   53</span></span>
<span><span class="co">#&gt; 3  alacsony    120   54</span></span>
<span><span class="co">#&gt; 4   közepes    123   55</span></span>
<span><span class="co">#&gt; 5   közepes    126   57</span></span>
<span><span class="co">#&gt; 6   közepes    129   58</span></span>
<span><span class="co">#&gt; 7   közepes    132   59</span></span>
<span><span class="co">#&gt; 8   közepes    135   61</span></span>
<span><span class="co">#&gt; 9   közepes    139   63</span></span>
<span><span class="co">#&gt; 10  közepes    142   64</span></span>
<span><span class="co">#&gt; 11  közepes    146   66</span></span>
<span><span class="co">#&gt; 12  közepes    150   68</span></span>
<span><span class="co">#&gt; 13  közepes    154   69</span></span>
<span><span class="co">#&gt; 14    magas    159   72</span></span>
<span><span class="co">#&gt; 15    magas    164   74</span></span></code></pre></div>
<p>car csomag recode() függvénye</p>
</div>
<div id="faktor-változó-összefoglalás" class="section level4" number="7.1.2.7">
<h4>
<span class="header-section-number">7.1.2.7</span> Faktor változó összefoglalás<a class="anchor" aria-label="anchor" href="#faktor-v%C3%A1ltoz%C3%B3-%C3%B6sszefoglal%C3%A1s"><i class="fas fa-link"></i></a>
</h4>
</div>
<div id="numerikus-változó-összefoglalás" class="section level4" number="7.1.2.8">
<h4>
<span class="header-section-number">7.1.2.8</span> Numerikus változó összefoglalás<a class="anchor" aria-label="anchor" href="#numerikus-v%C3%A1ltoz%C3%B3-%C3%B6sszefoglal%C3%A1s"><i class="fas fa-link"></i></a>
</h4>
</div>
</div>
<div id="sorok-kezelése" class="section level3" number="7.1.3">
<h3>
<span class="header-section-number">7.1.3</span> Sorok kezelése<a class="anchor" aria-label="anchor" href="#sorok-kezel%C3%A9se"><i class="fas fa-link"></i></a>
</h3>
<p>Sokszor előfordul, hogy egy adattábla valamely változójának értékeivel szeretnénk a sorokat elnevezni, illetve fordítva, az adattábla sorneveit oszlopvektorban szeretnénk látni. A <strong>fivethirtyeight</strong> csomag <code>unisex_names</code> adattáblája adattábla állományból történő beolvasása során a read.table() függvényben a ”row.names=n” argumentum megadásával a szöveges állomány n. oszlopából nyerjük a sorok neveit.
Az mtcars adattábla sorneveit a következő parancs segítségével vihetjük be változóba:</p>
<div class="sourceCode" id="cb350"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">unisex_names</span>, package <span class="op">=</span> <span class="st">"fivethirtyeight"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">unisex_names</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 5</span></span>
<span><span class="co">#&gt;   name     total male_share female_share    gap</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;    &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 Casey  176544.      0.584        0.416 0.169 </span></span>
<span><span class="co">#&gt; 2 Riley  154861.      0.508        0.492 0.0153</span></span>
<span><span class="co">#&gt; 3 Jessie 136382.      0.478        0.522 0.0443</span></span>
<span><span class="co">#&gt; 4 Jackie 132929.      0.421        0.579 0.158 </span></span>
<span><span class="co">#&gt; 5 Avery  121797.      0.335        0.665 0.330 </span></span>
<span><span class="co">#&gt; 6 Jaime  109870.      0.562        0.438 0.124</span></span></code></pre></div>
<div class="sourceCode" id="cb351"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span><span class="op">(</span><span class="va">unisex_names</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">unisex_names</span><span class="op">$</span><span class="va">name</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">unisex_names</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 5</span></span>
<span><span class="co">#&gt;   name     total male_share female_share    gap</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;    &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 Casey  176544.      0.584        0.416 0.169 </span></span>
<span><span class="co">#&gt; 2 Riley  154861.      0.508        0.492 0.0153</span></span>
<span><span class="co">#&gt; 3 Jessie 136382.      0.478        0.522 0.0443</span></span>
<span><span class="co">#&gt; 4 Jackie 132929.      0.421        0.579 0.158 </span></span>
<span><span class="co">#&gt; 5 Avery  121797.      0.335        0.665 0.330 </span></span>
<span><span class="co">#&gt; 6 Jaime  109870.      0.562        0.438 0.124</span></span></code></pre></div>
<div class="sourceCode" id="cb352"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mtcars2</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>name<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span>,<span class="va">mtcars</span>,row.names<span class="op">=</span><span class="fl">1</span><span class="op">:</span><span class="fl">32</span><span class="op">)</span></span>
<span><span class="va">mtcars2</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,<span class="op">]</span></span>
<span><span class="co">#&gt;                 name  mpg cyl  disp  hp drat    wt  qsec vs am gear carb</span></span>
<span><span class="co">#&gt; 1          Mazda RX4 21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4</span></span>
<span><span class="co">#&gt; 2      Mazda RX4 Wag 21.0   6 160.0 110 3.90 2.875 17.02  0  1    4    4</span></span>
<span><span class="co">#&gt; 3         Datsun 710 22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1</span></span>
<span><span class="co">#&gt; 4     Hornet 4 Drive 21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1</span></span>
<span><span class="co">#&gt; 5  Hornet Sportabout 18.7   8 360.0 175 3.15 3.440 17.02  0  0    3    2</span></span>
<span><span class="co">#&gt; 6            Valiant 18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1</span></span>
<span><span class="co">#&gt; 7         Duster 360 14.3   8 360.0 245 3.21 3.570 15.84  0  0    3    4</span></span>
<span><span class="co">#&gt; 8          Merc 240D 24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2</span></span>
<span><span class="co">#&gt; 9           Merc 230 22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2</span></span>
<span><span class="co">#&gt; 10          Merc 280 19.2   6 167.6 123 3.92 3.440 18.30  1  0    4    4</span></span></code></pre></div>
<p>A fordított irányhoz a következő parancsot kell használnunk:</p>
<div class="sourceCode" id="cb353"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mtcars3</span><span class="op">&lt;-</span><span class="va">mtcars2</span>                  <span class="co"># új adattábla</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span><span class="op">(</span><span class="va">mtcars3</span><span class="op">)</span><span class="op">&lt;-</span><span class="va">mtcars3</span><span class="op">$</span><span class="va">name</span>   <span class="co"># sornevek meghatározása</span></span>
<span><span class="va">mtcars3</span><span class="op">&lt;-</span><span class="va">mtcars3</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">11</span><span class="op">]</span>            <span class="co"># a felesleges első oszlop törlése</span></span>
<span><span class="va">mtcars3</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,<span class="op">]</span></span>
<span><span class="co">#&gt;                    mpg cyl  disp  hp drat    wt  qsec vs am gear</span></span>
<span><span class="co">#&gt; Mazda RX4         21.0   6 160.0 110 3.90 2.620 16.46  0  1    4</span></span>
<span><span class="co">#&gt; Mazda RX4 Wag     21.0   6 160.0 110 3.90 2.875 17.02  0  1    4</span></span>
<span><span class="co">#&gt; Datsun 710        22.8   4 108.0  93 3.85 2.320 18.61  1  1    4</span></span>
<span><span class="co">#&gt; Hornet 4 Drive    21.4   6 258.0 110 3.08 3.215 19.44  1  0    3</span></span>
<span><span class="co">#&gt; Hornet Sportabout 18.7   8 360.0 175 3.15 3.440 17.02  0  0    3</span></span>
<span><span class="co">#&gt; Valiant           18.1   6 225.0 105 2.76 3.460 20.22  1  0    3</span></span>
<span><span class="co">#&gt; Duster 360        14.3   8 360.0 245 3.21 3.570 15.84  0  0    3</span></span>
<span><span class="co">#&gt; Merc 240D         24.4   4 146.7  62 3.69 3.190 20.00  1  0    4</span></span>
<span><span class="co">#&gt; Merc 230          22.8   4 140.8  95 3.92 3.150 22.90  1  0    4</span></span>
<span><span class="co">#&gt; Merc 280          19.2   6 167.6 123 3.92 3.440 18.30  1  0    4</span></span></code></pre></div>
<div id="rendezés" class="section level4" number="7.1.3.1">
<h4>
<span class="header-section-number">7.1.3.1</span> Rendezés<a class="anchor" aria-label="anchor" href="#rendez%C3%A9s"><i class="fas fa-link"></i></a>
</h4>
<p>A vektorok rendezésénél már megismertük az <code><a href="https://rdrr.io/r/base/order.html">order()</a></code> függvényt (3.1.8. fejezet), amelyet adattáblák rendezésére is használhatunk. Az mtcars adattábla sorait a fogyasztási adatok (mpg változó) alapján növekvő sorrendbe rendezhetjük, ha a sorok indexelésére az <code><a href="https://rdrr.io/r/base/order.html">order()</a></code> függvény visszatérési értékét használjuk:</p>
<div class="sourceCode" id="cb354"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/order.html">order</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">$</span><span class="va">mpg</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] 15 16 24  7 17 31 14 23 22 29 12 13 11  6  5 10 25 30  1  2  4 32 21  3  9</span></span>
<span><span class="co">#&gt; [26]  8 27 26 19 28 18 20</span></span></code></pre></div>
<p>A fenti indexeket a sorkoordináta helyére írva, megkapjuk a rendezett adattáblát (helytakarékosságból az első 10 sorát írjuk ki):</p>
<div class="sourceCode" id="cb355"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mtcars</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html">order</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">$</span><span class="va">mpg</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span>,<span class="op">]</span></span>
<span><span class="co">#&gt;                      mpg cyl  disp  hp drat    wt  qsec vs am gear carb</span></span>
<span><span class="co">#&gt; Cadillac Fleetwood  10.4   8 472.0 205 2.93 5.250 17.98  0  0    3    4</span></span>
<span><span class="co">#&gt; Lincoln Continental 10.4   8 460.0 215 3.00 5.424 17.82  0  0    3    4</span></span>
<span><span class="co">#&gt; Camaro Z28          13.3   8 350.0 245 3.73 3.840 15.41  0  0    3    4</span></span>
<span><span class="co">#&gt; Duster 360          14.3   8 360.0 245 3.21 3.570 15.84  0  0    3    4</span></span>
<span><span class="co">#&gt; Chrysler Imperial   14.7   8 440.0 230 3.23 5.345 17.42  0  0    3    4</span></span>
<span><span class="co">#&gt; Maserati Bora       15.0   8 301.0 335 3.54 3.570 14.60  0  1    5    8</span></span>
<span><span class="co">#&gt; Merc 450SLC         15.2   8 275.8 180 3.07 3.780 18.00  0  0    3    3</span></span>
<span><span class="co">#&gt; AMC Javelin         15.2   8 304.0 150 3.15 3.435 17.30  0  0    3    2</span></span>
<span><span class="co">#&gt; Dodge Challenger    15.5   8 318.0 150 2.76 3.520 16.87  0  0    3    2</span></span>
<span><span class="co">#&gt; Ford Pantera L      15.8   8 351.0 264 4.22 3.170 14.50  0  1    5    4</span></span></code></pre></div>
<p>Rendezési szempontnak a sorneveket is használhatjuk:</p>
<div class="sourceCode" id="cb356"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mtcars</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html">order</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">rownames</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span>,<span class="op">]</span></span>
<span><span class="co">#&gt;                     mpg cyl  disp  hp drat    wt  qsec vs am gear carb</span></span>
<span><span class="co">#&gt; AMC Javelin        15.2   8 304.0 150 3.15 3.435 17.30  0  0    3    2</span></span>
<span><span class="co">#&gt; Cadillac Fleetwood 10.4   8 472.0 205 2.93 5.250 17.98  0  0    3    4</span></span>
<span><span class="co">#&gt; Camaro Z28         13.3   8 350.0 245 3.73 3.840 15.41  0  0    3    4</span></span>
<span><span class="co">#&gt; Chrysler Imperial  14.7   8 440.0 230 3.23 5.345 17.42  0  0    3    4</span></span>
<span><span class="co">#&gt; Datsun 710         22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1</span></span>
<span><span class="co">#&gt; Dodge Challenger   15.5   8 318.0 150 2.76 3.520 16.87  0  0    3    2</span></span>
<span><span class="co">#&gt; Duster 360         14.3   8 360.0 245 3.21 3.570 15.84  0  0    3    4</span></span>
<span><span class="co">#&gt; Ferrari Dino       19.7   6 145.0 175 3.62 2.770 15.50  0  1    5    6</span></span>
<span><span class="co">#&gt; Fiat 128           32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1</span></span>
<span><span class="co">#&gt; Fiat X1-9          27.3   4  79.0  66 4.08 1.935 18.90  1  1    4    1</span></span></code></pre></div>
<p>Rendezésnél egynél több változót is figyelembe vehetünk, ekkor az order() függvényben több változónevet kell felsorolnunk vesszővel elválasztva:</p>
<div class="sourceCode" id="cb357"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mtcars</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html">order</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">$</span><span class="va">mpg</span>,<span class="va">mtcars</span><span class="op">$</span><span class="va">disp</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"mpg"</span>,<span class="st">"disp"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt;                      mpg  disp</span></span>
<span><span class="co">#&gt; Lincoln Continental 10.4 460.0</span></span>
<span><span class="co">#&gt; Cadillac Fleetwood  10.4 472.0</span></span>
<span><span class="co">#&gt; Camaro Z28          13.3 350.0</span></span>
<span><span class="co">#&gt; Duster 360          14.3 360.0</span></span>
<span><span class="co">#&gt; Chrysler Imperial   14.7 440.0</span></span>
<span><span class="co">#&gt; Maserati Bora       15.0 301.0</span></span>
<span><span class="co">#&gt; Merc 450SLC         15.2 275.8</span></span>
<span><span class="co">#&gt; AMC Javelin         15.2 304.0</span></span>
<span><span class="co">#&gt; Dodge Challenger    15.5 318.0</span></span>
<span><span class="co">#&gt; Ford Pantera L      15.8 351.0</span></span></code></pre></div>
<p>Csökkenő sorrendű rendezéshez használhatjuk az <code><a href="https://rdrr.io/r/base/order.html">order()</a></code> függvény ”decreasing=TRUE” argumentumát, vagy a rev() függvényt. Több rendezési szempont esetén ha keverni szeretnénk a rendezési irányokatt, akkor numerikus oszlopvektorok előtt a mínusz (-) jellel fordíthatjuk meg a rendezés irányát csökkenőre.</p>
<div class="sourceCode" id="cb358"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mtcars</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html">order</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">$</span><span class="va">mpg</span>,<span class="op">-</span><span class="va">mtcars</span><span class="op">$</span><span class="va">disp</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"mpg"</span>,<span class="st">"disp"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="co">#&gt;                      mpg  disp</span></span>
<span><span class="co">#&gt; Cadillac Fleetwood  10.4 472.0</span></span>
<span><span class="co">#&gt; Lincoln Continental 10.4 460.0</span></span>
<span><span class="co">#&gt; Camaro Z28          13.3 350.0</span></span>
<span><span class="co">#&gt; Duster 360          14.3 360.0</span></span>
<span><span class="co">#&gt; Chrysler Imperial   14.7 440.0</span></span>
<span><span class="co">#&gt; Maserati Bora       15.0 301.0</span></span>
<span><span class="co">#&gt; AMC Javelin         15.2 304.0</span></span>
<span><span class="co">#&gt; Merc 450SLC         15.2 275.8</span></span>
<span><span class="co">#&gt; Dodge Challenger    15.5 318.0</span></span>
<span><span class="co">#&gt; Ford Pantera L      15.8 351.0</span></span></code></pre></div>
</div>
</div>
<div id="adattábla-szűrése" class="section level3" number="7.1.4">
<h3>
<span class="header-section-number">7.1.4</span> Adattábla szűrése<a class="anchor" aria-label="anchor" href="#adatt%C3%A1bla-sz%C5%B1r%C3%A9se"><i class="fas fa-link"></i></a>
</h3>
<p>Sokszor előfordul, hogy az adattábla sorait egy vagy több változó (oszlop) értéke szerint szeretnénk leválogatni. Az adattábla indexelése során a sorkoordináta helyén logikai kifejezést szerepeltetünk. Ha például le szeretnénk kérdezni, azokat a sorokat, amelyekben a fogyásztás értéke kisebb mint 15 mérföld/gallon, akkor a következő logikai kifejezést használhatjuk:</p>
<div class="sourceCode" id="cb359"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mtcars</span><span class="op">$</span><span class="va">mpg</span><span class="op">&lt;</span><span class="fl">15</span></span>
<span><span class="co">#&gt;  [1] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE</span></span>
<span><span class="co">#&gt; [13] FALSE FALSE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE</span></span>
<span><span class="co">#&gt; [25] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span></span></code></pre></div>
<p>A fenti logikai vekorban pontosan azokban a pozíciókban szerepel TRUE érték, amelyik sorban fogyásztás értéke kisebb mint 15 mérföld/gallon. Ha ezt szerpeltetjük a sorkoordináta helyén, a kívánt sorokhoz jutunk:</p>
<div class="sourceCode" id="cb360"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mtcars</span><span class="op">[</span><span class="va">mtcars</span><span class="op">$</span><span class="va">mpg</span><span class="op">&lt;</span><span class="fl">15</span>,<span class="op">]</span></span>
<span><span class="co">#&gt;                      mpg cyl disp  hp drat    wt  qsec vs am gear carb</span></span>
<span><span class="co">#&gt; Duster 360          14.3   8  360 245 3.21 3.570 15.84  0  0    3    4</span></span>
<span><span class="co">#&gt; Cadillac Fleetwood  10.4   8  472 205 2.93 5.250 17.98  0  0    3    4</span></span>
<span><span class="co">#&gt; Lincoln Continental 10.4   8  460 215 3.00 5.424 17.82  0  0    3    4</span></span>
<span><span class="co">#&gt; Chrysler Imperial   14.7   8  440 230 3.23 5.345 17.42  0  0    3    4</span></span>
<span><span class="co">#&gt; Camaro Z28          13.3   8  350 245 3.73 3.840 15.41  0  0    3    4</span></span></code></pre></div>
<p>Több váltózón alapuló feltétel megadásához összetett logikai kifejezést kell írnunk:</p>
<div class="sourceCode" id="cb361"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mtcars</span><span class="op">[</span><span class="va">mtcars</span><span class="op">$</span><span class="va">mpg</span><span class="op">&lt;</span><span class="fl">15</span> <span class="op">&amp;</span> <span class="va">mtcars</span><span class="op">$</span><span class="va">disp</span><span class="op">&gt;</span><span class="fl">400</span>,<span class="op">]</span></span>
<span><span class="co">#&gt;                      mpg cyl disp  hp drat    wt  qsec vs am gear carb</span></span>
<span><span class="co">#&gt; Cadillac Fleetwood  10.4   8  472 205 2.93 5.250 17.98  0  0    3    4</span></span>
<span><span class="co">#&gt; Lincoln Continental 10.4   8  460 215 3.00 5.424 17.82  0  0    3    4</span></span>
<span><span class="co">#&gt; Chrysler Imperial   14.7   8  440 230 3.23 5.345 17.42  0  0    3    4</span></span></code></pre></div>
<p>Adattáblák szűrését egyszerűsíti a subset() függvény, amely az első paraméterében egy adattáblát, második paraméterében pedig a szűrést jelentő logikai kifejezést várja. A fenti szűrés subset() függvény használatával:</p>
<div class="sourceCode" id="cb362"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="va">mpg</span><span class="op">&lt;</span><span class="fl">15</span> <span class="op">&amp;</span> <span class="va">disp</span><span class="op">&gt;</span><span class="fl">400</span><span class="op">)</span></span>
<span><span class="co">#&gt;                      mpg cyl disp  hp drat    wt  qsec vs am gear carb</span></span>
<span><span class="co">#&gt; Cadillac Fleetwood  10.4   8  472 205 2.93 5.250 17.98  0  0    3    4</span></span>
<span><span class="co">#&gt; Lincoln Continental 10.4   8  460 215 3.00 5.424 17.82  0  0    3    4</span></span>
<span><span class="co">#&gt; Chrysler Imperial   14.7   8  440 230 3.23 5.345 17.42  0  0    3    4</span></span></code></pre></div>
<p>A subset() függvény egy select argumentumot is tartalmazhat, melynek sgítségével a szűrés eredményében megjelenő oszlopokat határozhatjuk meg:</p>
<div class="sourceCode" id="cb363"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="va">mpg</span><span class="op">&lt;</span><span class="fl">15</span> <span class="op">&amp;</span> <span class="va">disp</span><span class="op">&gt;</span><span class="fl">400</span>, select<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"mpg"</span>,<span class="st">"disp"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;                      mpg disp</span></span>
<span><span class="co">#&gt; Cadillac Fleetwood  10.4  472</span></span>
<span><span class="co">#&gt; Lincoln Continental 10.4  460</span></span>
<span><span class="co">#&gt; Chrysler Imperial   14.7  440</span></span></code></pre></div>
</div>
<div id="hiányzó-értékeket-tatalmazó-sorok-eltávolítása" class="section level3" number="7.1.5">
<h3>
<span class="header-section-number">7.1.5</span> Hiányzó értékeket tatalmazó sorok eltávolítása<a class="anchor" aria-label="anchor" href="#hi%C3%A1nyz%C3%B3-%C3%A9rt%C3%A9keket-tatalmaz%C3%B3-sorok-elt%C3%A1vol%C3%ADt%C3%A1sa"><i class="fas fa-link"></i></a>
</h3>
<p>Az <code>NA</code> értéket is tartalmazó adattáblánkból az na.omit() függvény használatával távolíthatjuk el azokat a sorokat, amelyekben a hiányzó érték előfordul.</p>
<div class="sourceCode" id="cb364"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span></span>
<span><span class="va">mtcars</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">5</span>,<span class="fl">7</span><span class="op">)</span>,<span class="fl">1</span><span class="op">]</span><span class="op">&lt;-</span><span class="cn">NA</span></span>
<span><span class="va">mtcars</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,<span class="op">]</span></span>
<span><span class="co">#&gt;                    mpg cyl  disp  hp drat    wt  qsec vs am gear carb</span></span>
<span><span class="co">#&gt; Mazda RX4         21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4</span></span>
<span><span class="co">#&gt; Mazda RX4 Wag       NA   6 160.0 110 3.90 2.875 17.02  0  1    4    4</span></span>
<span><span class="co">#&gt; Datsun 710        22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1</span></span>
<span><span class="co">#&gt; Hornet 4 Drive    21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1</span></span>
<span><span class="co">#&gt; Hornet Sportabout   NA   8 360.0 175 3.15 3.440 17.02  0  0    3    2</span></span>
<span><span class="co">#&gt; Valiant           18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1</span></span>
<span><span class="co">#&gt; Duster 360          NA   8 360.0 245 3.21 3.570 15.84  0  0    3    4</span></span>
<span><span class="co">#&gt; Merc 240D         24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2</span></span>
<span><span class="co">#&gt; Merc 230          22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2</span></span>
<span><span class="co">#&gt; Merc 280          19.2   6 167.6 123 3.92 3.440 18.30  1  0    4    4</span></span></code></pre></div>
<div class="sourceCode" id="cb365"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/na.fail.html">na.omit</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,<span class="op">]</span></span>
<span><span class="co">#&gt;                 mpg cyl  disp  hp drat    wt  qsec vs am gear carb</span></span>
<span><span class="co">#&gt; Mazda RX4      21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4</span></span>
<span><span class="co">#&gt; Datsun 710     22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1</span></span>
<span><span class="co">#&gt; Hornet 4 Drive 21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1</span></span>
<span><span class="co">#&gt; Valiant        18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1</span></span>
<span><span class="co">#&gt; Merc 240D      24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2</span></span>
<span><span class="co">#&gt; Merc 230       22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2</span></span>
<span><span class="co">#&gt; Merc 280       19.2   6 167.6 123 3.92 3.440 18.30  1  0    4    4</span></span>
<span><span class="co">#&gt; Merc 280C      17.8   6 167.6 123 3.92 3.440 18.90  1  0    4    4</span></span>
<span><span class="co">#&gt; Merc 450SE     16.4   8 275.8 180 3.07 4.070 17.40  0  0    3    3</span></span>
<span><span class="co">#&gt; Merc 450SL     17.3   8 275.8 180 3.07 3.730 17.60  0  0    3    3</span></span></code></pre></div>
</div>
<div id="adattáblák-indexelése" class="section level3" number="7.1.6">
<h3>
<span class="header-section-number">7.1.6</span> Adattáblák indexelése<a class="anchor" aria-label="anchor" href="#adatt%C3%A1bl%C3%A1k-indexel%C3%A9se"><i class="fas fa-link"></i></a>
</h3>
<p>Az adattáblák indexelésére a mátrixok és listák indexelési eljárásait is használhatjuk. A 3.5. fejezetben már áttekintettük az Alap R lehetőségeit.</p>
<div class="sourceCode" id="cb366"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data.file</span> <span class="op">&lt;-</span> <span class="st">"https://github.com/abarik/rdata/raw/master/r_alapok/metacritic_games.csv"</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span>
<span><span class="va">d.tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_delim</a></span><span class="op">(</span>file <span class="op">=</span> <span class="va">data.file</span>, delim <span class="op">=</span> <span class="st">","</span><span class="op">)</span></span>
<span><span class="va">d.tbl</span></span>
<span><span class="co">#&gt; # A tibble: 5,699 × 15</span></span>
<span><span class="co">#&gt;    game     platf…¹ devel…² genre numbe…³ rating relea…⁴ posit…⁵ neutr…⁶ negat…⁷</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 Portal 2 PC      Valve … Acti… &lt;NA&gt;    E10+   Apr 18…      51       1       0</span></span>
<span><span class="co">#&gt;  2 The Eld… PC      Bethes… Role… No Onl… M      Nov 10…      32       0       0</span></span>
<span><span class="co">#&gt;  3 The Leg… 3DS     GREZZO  Misc… No Onl… E10+   Jun 19…      84       1       0</span></span>
<span><span class="co">#&gt;  4 Batman:… PC      Rockst… Acti… &lt;NA&gt;    T      Nov 21…      27       0       0</span></span>
<span><span class="co">#&gt;  5 Super M… 3DS     Ninten… Acti… No Onl… E      Nov 13…      81       1       0</span></span>
<span><span class="co">#&gt;  6 Deus Ex… PC      Nixxes… Acti… No Onl… M      Aug 23…      52       0       0</span></span>
<span><span class="co">#&gt;  7 Pushmo   3DS     Intell… Misc… 1 Play… E      Dec  8…      31       0       0</span></span>
<span><span class="co">#&gt;  8 Total W… PC      Creati… Stra… Online… T      Mar 15…      62       0       0</span></span>
<span><span class="co">#&gt;  9 FIFA So… PC      Electr… Spor… &lt;NA&gt;    E      Sep 27…      14       0       0</span></span>
<span><span class="co">#&gt; 10 Battlef… PC      EA DICE Acti… &lt;NA&gt;    M      Oct 25…      60       1       0</span></span>
<span><span class="co">#&gt; # … with 5,689 more rows, 5 more variables: positive_users &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   neutral_users &lt;dbl&gt;, negative_users &lt;dbl&gt;, metascore &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   user_score &lt;dbl&gt;, and abbreviated variable names ¹​platform, ²​developer,</span></span>
<span><span class="co">#&gt; #   ³​number_players, ⁴​release_date, ⁵​positive_critics, ⁶​neutral_critics,</span></span>
<span><span class="co">#&gt; #   ⁷​negative_critics</span></span>
<span><span class="va">d.df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="va">d.tbl</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">d.df</span><span class="op">)</span></span>
<span><span class="co">#&gt;                                      game platform             developer</span></span>
<span><span class="co">#&gt; 1                                Portal 2       PC        Valve Software</span></span>
<span><span class="co">#&gt; 2             The Elder Scrolls V: Skyrim       PC Bethesda Game Studios</span></span>
<span><span class="co">#&gt; 3 The Legend of Zelda: Ocarina of Time 3D      3DS                GREZZO</span></span>
<span><span class="co">#&gt; 4                     Batman: Arkham City       PC    Rocksteady Studios</span></span>
<span><span class="co">#&gt; 5                     Super Mario 3D Land      3DS              Nintendo</span></span>
<span><span class="co">#&gt; 6               Deus Ex: Human Revolution       PC       Nixxes Software</span></span>
<span><span class="co">#&gt;              genre        number_players rating release_date positive_critics</span></span>
<span><span class="co">#&gt; 1           Action                  &lt;NA&gt;   E10+ Apr 18, 2011               51</span></span>
<span><span class="co">#&gt; 2     Role-Playing No Online Multiplayer      M Nov 10, 2011               32</span></span>
<span><span class="co">#&gt; 3    Miscellaneous No Online Multiplayer   E10+ Jun 19, 2011               84</span></span>
<span><span class="co">#&gt; 4 Action Adventure                  &lt;NA&gt;      T Nov 21, 2011               27</span></span>
<span><span class="co">#&gt; 5           Action No Online Multiplayer      E Nov 13, 2011               81</span></span>
<span><span class="co">#&gt; 6           Action No Online Multiplayer      M Aug 23, 2011               52</span></span>
<span><span class="co">#&gt;   neutral_critics negative_critics positive_users neutral_users negative_users</span></span>
<span><span class="co">#&gt; 1               1                0           1700           107             19</span></span>
<span><span class="co">#&gt; 2               0                0           1616           322            451</span></span>
<span><span class="co">#&gt; 3               1                0            283            20              5</span></span>
<span><span class="co">#&gt; 4               0                0            240            34             27</span></span>
<span><span class="co">#&gt; 5               1                0            251            39             11</span></span>
<span><span class="co">#&gt; 6               0                0            520           112             78</span></span>
<span><span class="co">#&gt;   metascore user_score</span></span>
<span><span class="co">#&gt; 1        95         90</span></span>
<span><span class="co">#&gt; 2        94         82</span></span>
<span><span class="co">#&gt; 3        94         90</span></span>
<span><span class="co">#&gt; 4        91         87</span></span>
<span><span class="co">#&gt; 5        90         84</span></span>
<span><span class="co">#&gt; 6        90         85</span></span></code></pre></div>
</div>
<div id="válogatás-az-sorokból" class="section level3" number="7.1.7">
<h3>
<span class="header-section-number">7.1.7</span> Válogatás az sorokból<a class="anchor" aria-label="anchor" href="#v%C3%A1logat%C3%A1s-az-sorokb%C3%B3l"><i class="fas fa-link"></i></a>
</h3>
<p>A sorok leválogatatása nagyon fontos eszköz a kezünben ahhoz, hogy az elemzésünket a kívánt mintaelemekkel folytathassuk.</p>
<div id="sorok-indexelése-és-a-szűrés-alap-r-ben" class="section level4" number="7.1.7.1">
<h4>
<span class="header-section-number">7.1.7.1</span> Sorok indexelése és a szűrés Alap R-ben<a class="anchor" aria-label="anchor" href="#sorok-indexel%C3%A9se-%C3%A9s-a-sz%C5%B1r%C3%A9s-alap-r-ben"><i class="fas fa-link"></i></a>
</h4>
<p>A sorok indexelésére a <code>[</code> operátort használhatjuk, a vessző előtti részbe, a sorkoordintátákba írhatunk neumerikus vektort, pozitív és negatív értékekkel, logikai vektort és karakteres vektort, bár ez utóbbi használta nagyon ritkkán fordul elő.</p>
<p>A példákhoz a <strong>fivethirtyeight</strong> csomag <code>unisex_names</code> adattáblájából indulunk ki, amely amerikában használt uniszex neveket tartalmaz.</p>
<div class="sourceCode" id="cb367"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"unisex_names"</span>, package <span class="op">=</span> <span class="st">"fivethirtyeight"</span><span class="op">)</span></span>
<span><span class="va">unisex_names</span></span>
<span><span class="co">#&gt; # A tibble: 919 × 5</span></span>
<span><span class="co">#&gt;    name      total male_share female_share    gap</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;     &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 Casey   176544.      0.584        0.416 0.169 </span></span>
<span><span class="co">#&gt;  2 Riley   154861.      0.508        0.492 0.0153</span></span>
<span><span class="co">#&gt;  3 Jessie  136382.      0.478        0.522 0.0443</span></span>
<span><span class="co">#&gt;  4 Jackie  132929.      0.421        0.579 0.158 </span></span>
<span><span class="co">#&gt;  5 Avery   121797.      0.335        0.665 0.330 </span></span>
<span><span class="co">#&gt;  6 Jaime   109870.      0.562        0.438 0.124 </span></span>
<span><span class="co">#&gt;  7 Peyton   94896.      0.434        0.566 0.133 </span></span>
<span><span class="co">#&gt;  8 Kerry    88964.      0.484        0.516 0.0321</span></span>
<span><span class="co">#&gt;  9 Jody     80401.      0.352        0.648 0.296 </span></span>
<span><span class="co">#&gt; 10 Kendall  79211.      0.372        0.628 0.255 </span></span>
<span><span class="co">#&gt; # … with 909 more rows</span></span></code></pre></div>
<p>A sorkoordinátákba írjuk a sorok válogatását biztosító lehetőségeket:</p>
<div class="sourceCode" id="cb368"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">unisex_names</span><span class="op">[</span><span class="fl">2</span>, <span class="op">]</span></span>
<span><span class="co">#&gt; # A tibble: 1 × 5</span></span>
<span><span class="co">#&gt;   name    total male_share female_share    gap</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;   &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 Riley 154861.      0.508        0.492 0.0153</span></span>
<span><span class="va">unisex_names</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="op">]</span></span>
<span><span class="co">#&gt; # A tibble: 3 × 5</span></span>
<span><span class="co">#&gt;   name     total male_share female_share    gap</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;    &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 Casey  176544.      0.584        0.416 0.169 </span></span>
<span><span class="co">#&gt; 2 Riley  154861.      0.508        0.492 0.0153</span></span>
<span><span class="co">#&gt; 3 Jessie 136382.      0.478        0.522 0.0443</span></span>
<span><span class="va">unisex_names</span><span class="op">[</span><span class="op">-</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span>, <span class="op">]</span></span>
<span><span class="co">#&gt; # A tibble: 916 × 5</span></span>
<span><span class="co">#&gt;    name      total male_share female_share    gap</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;     &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 Jackie  132929.      0.421        0.579 0.158 </span></span>
<span><span class="co">#&gt;  2 Avery   121797.      0.335        0.665 0.330 </span></span>
<span><span class="co">#&gt;  3 Jaime   109870.      0.562        0.438 0.124 </span></span>
<span><span class="co">#&gt;  4 Peyton   94896.      0.434        0.566 0.133 </span></span>
<span><span class="co">#&gt;  5 Kerry    88964.      0.484        0.516 0.0321</span></span>
<span><span class="co">#&gt;  6 Jody     80401.      0.352        0.648 0.296 </span></span>
<span><span class="co">#&gt;  7 Kendall  79211.      0.372        0.628 0.255 </span></span>
<span><span class="co">#&gt;  8 Payton   64152.      0.334        0.666 0.331 </span></span>
<span><span class="co">#&gt;  9 Skyler   53486.      0.646        0.354 0.292 </span></span>
<span><span class="co">#&gt; 10 Frankie  51288.      0.624        0.376 0.247 </span></span>
<span><span class="co">#&gt; # … with 906 more rows</span></span></code></pre></div>
<p>A <code><a href="https://rdrr.io/r/utils/head.html">head()</a></code> és <code><a href="https://rdrr.io/r/utils/head.html">tail()</a></code> függvény is a sorokból válogat, az első 6, illetve utolsó 3 sort így kaphatjuk meg:</p>
<div class="sourceCode" id="cb369"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">unisex_names</span>, n <span class="op">=</span> <span class="fl">6</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 5</span></span>
<span><span class="co">#&gt;   name     total male_share female_share    gap</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;    &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 Casey  176544.      0.584        0.416 0.169 </span></span>
<span><span class="co">#&gt; 2 Riley  154861.      0.508        0.492 0.0153</span></span>
<span><span class="co">#&gt; 3 Jessie 136382.      0.478        0.522 0.0443</span></span>
<span><span class="co">#&gt; 4 Jackie 132929.      0.421        0.579 0.158 </span></span>
<span><span class="co">#&gt; 5 Avery  121797.      0.335        0.665 0.330 </span></span>
<span><span class="co">#&gt; 6 Jaime  109870.      0.562        0.438 0.124</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">tail</a></span><span class="op">(</span><span class="va">unisex_names</span>, n <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 3 × 5</span></span>
<span><span class="co">#&gt;   name   total male_share female_share    gap</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;  &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 Gwin    101.      0.562        0.438 0.124 </span></span>
<span><span class="co">#&gt; 2 Yacine  100.      0.545        0.455 0.0892</span></span>
<span><span class="co">#&gt; 3 Aeon    100.      0.465        0.535 0.0703</span></span></code></pre></div>
<p>Bizonyos esetekben szükség lehet az adattábla soraiból véletlen módon néhányat kiválasztani. Ekkor a <code><a href="https://rdrr.io/r/base/sample.html">sample()</a></code> függvényt használjuk:</p>
<div class="sourceCode" id="cb370"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">unisex_names</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">unisex_names</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>, <span class="op">]</span></span>
<span><span class="co">#&gt; # A tibble: 10 × 5</span></span>
<span><span class="co">#&gt;    name    total male_share female_share    gap</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;   &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 Amarri   438.      0.515        0.485 0.0292</span></span>
<span><span class="co">#&gt;  2 Wisdom   910.      0.464        0.536 0.0719</span></span>
<span><span class="co">#&gt;  3 Lennie  3533.      0.554        0.446 0.108 </span></span>
<span><span class="co">#&gt;  4 Hadyn    926.      0.545        0.455 0.0910</span></span>
<span><span class="co">#&gt;  5 Mell     197.      0.639        0.361 0.278 </span></span>
<span><span class="co">#&gt;  6 Toryn    442.      0.485        0.515 0.0304</span></span>
<span><span class="co">#&gt;  7 Schylar  327.      0.336        0.664 0.329 </span></span>
<span><span class="co">#&gt;  8 Child    130.      0.595        0.405 0.190 </span></span>
<span><span class="co">#&gt;  9 Laramie 1595.      0.564        0.436 0.129 </span></span>
<span><span class="co">#&gt; 10 Kadian   125.      0.349        0.651 0.302</span></span></code></pre></div>
<p>A <code><a href="https://rdrr.io/r/base/sample.html">sample()</a></code> függvény alapértelmezés szerint visszatevés nélküli választ véletlen értékeket az első paraméterből (esetünkben 919 számból 10-et), de ha a <code>replace=TRUE</code> argumentumot használjuk, akkor visszatevéssel fog választani:</p>
<div class="sourceCode" id="cb371"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d.tbl</span> <span class="op">&lt;-</span> <span class="va">unisex_names</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">11</span><span class="op">:</span><span class="fl">14</span>, size <span class="op">=</span> <span class="fl">5</span>, replace <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>, <span class="op">]</span></span>
<span><span class="va">d.tbl</span></span>
<span><span class="co">#&gt; # A tibble: 5 × 5</span></span>
<span><span class="co">#&gt;   name     total male_share female_share   gap</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;    &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 Frankie 51288.      0.624        0.376 0.247</span></span>
<span><span class="co">#&gt; 2 Skyler  53486.      0.646        0.354 0.292</span></span>
<span><span class="co">#&gt; 3 Frankie 51288.      0.624        0.376 0.247</span></span>
<span><span class="co">#&gt; 4 Pat     44782.      0.369        0.631 0.262</span></span>
<span><span class="co">#&gt; 5 Skyler  53486.      0.646        0.354 0.292</span></span></code></pre></div>
<p>A <code><a href="https://rdrr.io/r/base/sample.html">sample()</a></code> függvény fenti paraméterezése mellett biztosan előfordul sorismétlés az új <code>d.tbl</code> adattáblában.
Az sorismétléseket tartalmazó adattáblák kezelésére a <code><a href="https://rdrr.io/r/base/duplicated.html">duplicated()</a></code> és a <code><a href="https://rdrr.io/r/base/unique.html">unique()</a></code> függvényeket használhatjuk. A sorismétlések felderítésére a <code><a href="https://rdrr.io/r/base/duplicated.html">duplicated()</a></code> függvényt használjuk:</p>
<div class="sourceCode" id="cb372"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/duplicated.html">duplicated</a></span><span class="op">(</span><span class="va">d.tbl</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] FALSE FALSE  TRUE FALSE  TRUE</span></span>
<span><span class="va">d.tbl</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/duplicated.html">duplicated</a></span><span class="op">(</span><span class="va">d.tbl</span><span class="op">)</span>, <span class="op">]</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 5</span></span>
<span><span class="co">#&gt;   name     total male_share female_share   gap</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;    &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 Frankie 51288.      0.624        0.376 0.247</span></span>
<span><span class="co">#&gt; 2 Skyler  53486.      0.646        0.354 0.292</span></span></code></pre></div>
<p>A sorismétlések eltávolítására a <code><a href="https://rdrr.io/r/base/unique.html">unique()</a></code> függvényt használhatjuk:</p>
<div class="sourceCode" id="cb373"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">d.tbl</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 3 × 5</span></span>
<span><span class="co">#&gt;   name     total male_share female_share   gap</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;    &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 Frankie 51288.      0.624        0.376 0.247</span></span>
<span><span class="co">#&gt; 2 Skyler  53486.      0.646        0.354 0.292</span></span>
<span><span class="co">#&gt; 3 Pat     44782.      0.369        0.631 0.262</span></span></code></pre></div>
<p>Ha a sorkoordítátákba logikai vektort írunk, akkor szűrést valósítunk meg:</p>
<div class="sourceCode" id="cb374"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">unisex_names</span><span class="op">[</span><span class="va">unisex_names</span><span class="op">$</span><span class="va">gap</span> <span class="op">&lt;</span> <span class="fl">0.003</span>, <span class="op">]</span></span>
<span><span class="co">#&gt; # A tibble: 10 × 5</span></span>
<span><span class="co">#&gt;    name      total male_share female_share       gap</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;     &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt;     &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 Kris     24956.      0.499        0.501 0.00275  </span></span>
<span><span class="co">#&gt;  2 Camdyn    3275.      0.500        0.500 0.000154 </span></span>
<span><span class="co">#&gt;  3 Christan  2685.      0.501        0.499 0.00227  </span></span>
<span><span class="co">#&gt;  4 Kam        729.      0.501        0.499 0.00235  </span></span>
<span><span class="co">#&gt;  5 Jonel      613.      0.499        0.501 0.00237  </span></span>
<span><span class="co">#&gt;  6 Kodee      533.      0.500        0.500 0.000316 </span></span>
<span><span class="co">#&gt;  7 Callaway   292.      0.500        0.500 0.000455 </span></span>
<span><span class="co">#&gt;  8 Bless      280.      0.500        0.500 0.0000717</span></span>
<span><span class="co">#&gt;  9 Nike       206.      0.500        0.500 0.000782 </span></span>
<span><span class="co">#&gt; 10 Tkai       143.      0.500        0.500 0.000570</span></span></code></pre></div>
</div>
</div>
</div>
<div id="adatkezelés-tidyverse-r-ben" class="section level2" number="7.2">
<h2>
<span class="header-section-number">7.2</span> Adatkezelés Tidyverse R-ben<a class="anchor" aria-label="anchor" href="#adatkezel%C3%A9s-tidyverse-r-ben"><i class="fas fa-link"></i></a>
</h2>

<div class="rmdlevel2">
Ebben a fejezetben:
</div>
<div id="a-operátor" class="section level3" number="7.2.1">
<h3>
<span class="header-section-number">7.2.1</span> A <code>%&gt;%</code> operátor<a class="anchor" aria-label="anchor" href="#a-oper%C3%A1tor"><i class="fas fa-link"></i></a>
</h3>
<p>Egy probléma megoldása több lépésben történik. A <code>survey</code> adatbázisból keressük ki a lányok testmagasságának az át gyakran függvényeket kell egymásba ágyaznunk. Ha például az 1, 2 és 3 számok természetes alapú logaritmusának az összegét szeretnénk kiszámolni, akkor a következő sorokat írhatjuk:</p>
<div class="sourceCode" id="cb375"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>       <span class="co"># vektor előállítása</span></span>
<span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>         <span class="co"># természetes alapú logaritmus kiszámolása  </span></span>
<span><span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">out</span><span class="op">)</span>       <span class="co"># átlag kiszámolása</span></span>
<span><span class="va">out</span>                   <span class="co"># eredmény kírása</span></span>
<span><span class="co">#&gt; [1] 1.792</span></span></code></pre></div>
<p>A részeredmények tárolására az <code>out</code> objektumot használtuk fel. A köztes eredmények tárolása azonos vagy eltérő nevek alatt szokásos gyakorlat a hagyományos R használata során.</p>
<p>A fenti lehetőség mellett választhatjuk a függvények egymásba ágyazását is:</p>
<div class="sourceCode" id="cb376"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span>   <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>     <span class="co"># vektor előállítása</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span>           <span class="co"># eredmény kiírása</span></span>
<span><span class="co">#&gt; [1] 1.792</span></span></code></pre></div>
<p>A fenti példa jóval tömörebb és nem szükséges köztes objektumok létrehozása, a hagyományos R-ben nagyon gyakori összetett függvényhívásokkal (rész)problémák megoldása.</p>
<p>A <strong>magrittr</strong> csomag kínál egy harmadik lehetőséget, a pipe operátor (<code>%&gt;%</code>) használatával. Az operátor egyben a Tidyverse R része is.</p>
<div class="sourceCode" id="cb377"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span>
<span><span class="va">x</span>   <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>     <span class="co"># vektor előállítása</span></span>
<span><span class="va">x</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># eredmény kiírása</span></span>
<span><span class="co">#&gt; [1] 1.792</span></span></code></pre></div>
<p>A fenti sor olvasható úgy, hogy induljunk ki az <code>x</code> adatobjektumból, <em>azután</em> vegyük a 2-es alapú logaritmusát, <em>azután</em> vegyük az értékek összegét. A <code>%&gt;%</code> pipe operátor az <em>azután</em> lehetőséget kínálja, és egyben egy rendkívül jól olvasható és karbantarható kód létrehozását teszi lehetővé. A fentebb látott függvények egymásba ágyazásánál sokkal könyebben javítható ez a kód, az azt megelőző, köztes objektumokkal dolgozó esetnél pedig jóval egyszerűbb és elegánsabb. A pipe operátort használó parancsok tipikusan adatobjektummal, vagy az azt létrehozó függvénnyel indítanak, majd azoknak a tevékenységeknek a felsorolása történik függvényhívások egymásutánjának megadásával, amelyeket a felsorolás sorrendjében az adatokkal tenni szeretnénk. Az adat rész ezekből a függvényhívásokból hiányzik, ugyanis a pipe operátor biztosítja, hogy mindegyik függvény első argumentumába megkapja azt.</p>
<div class="sourceCode" id="cb378"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">10</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="op">)</span>                 <span class="co"># ekvivalens alak: log(x=10)</span></span>
<span><span class="co">#&gt; [1] 2.303</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">100</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="op">)</span>         <span class="co"># ekvivalens alak: log(x=c(10, 100))</span></span>
<span><span class="co">#&gt; [1] 2.303 4.605</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">100</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span>base<span class="op">=</span><span class="fl">10</span><span class="op">)</span>  <span class="co"># ekvivalens alak: log(x=c(10, 100), base=10)</span></span>
<span><span class="co">#&gt; [1] 1 2</span></span></code></pre></div>
<p>A fenti példában, látható, hogyan gondoskodik a pipe oprátor arról, hogy <code><a href="https://rdrr.io/r/base/Log.html">log()</a></code> függvény első argumentuma (<code>x=</code>) megkapja a szükséges értékét. Néhány függvény esetében előfordul, hogy a kiinduló adat apaértelmezés szerint nem az első paraméter. Ekkor a pont <code>.</code> helyörző segítségével expliciten jelezzük, hogy hová kerül a pipe operátor bal oldaláról eérkező adat. Például a karakterstring cserére használatos <code><a href="https://rdrr.io/r/base/grep.html">sub()</a></code> függvény <code>x=</code> argumentuma alapértelmezés szerint a harmadik:</p>
<div class="sourceCode" id="cb379"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/grep.html">sub</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="st">"s"</span>, replacement <span class="op">=</span> <span class="st">"z"</span>, x <span class="op">=</span> <span class="va">letters</span><span class="op">)</span>  <span class="co"># s cseréje z-re</span></span>
<span><span class="co">#&gt;  [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k" "l" "m" "n" "o" "p" "q" "r" "z"</span></span>
<span><span class="co">#&gt; [20] "t" "u" "v" "w" "x" "y" "z"</span></span></code></pre></div>
<p>A következő függvényhívás az argumentumok nevesítése miatt szintén működőképes, az pipe-ban <code>x=letters</code> argumentumhívás valósul meg.</p>
<div class="sourceCode" id="cb380"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">letters</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">sub</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="st">"s"</span>, replacement <span class="op">=</span> <span class="st">"z"</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k" "l" "m" "n" "o" "p" "q" "r" "z"</span></span>
<span><span class="co">#&gt; [20] "t" "u" "v" "w" "x" "y" "z"</span></span></code></pre></div>
<p>Azonban ha nem használunk argumentumneveket, akkor ez a hívás már nem kívánt eredményre vezet, mert alapértelmezés szerint az első argumentumba kerül az adat, amelyik a <code><a href="https://rdrr.io/r/base/grep.html">sub()</a></code> esetében a <code>pattern=</code> argumentum.</p>
<div class="sourceCode" id="cb381"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">letters</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">sub</a></span><span class="op">(</span><span class="st">"s"</span>, <span class="st">"z"</span><span class="op">)</span> <span class="co"># Nem ezt akartuk. Valójában ez hívódik: sub(pattern=letters, replacement="s", x="z") </span></span>
<span><span class="co">#&gt; [1] "z"</span></span></code></pre></div>
<p>Ha tehát nem az első argumentumban szeretnénk szerepeltetni a pipe bal oldaláról érkező adatot, akkor a <code>.</code> helyörzőt kell használnunk:</p>
<div class="sourceCode" id="cb382"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">letters</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">sub</a></span><span class="op">(</span><span class="st">"s"</span>, <span class="st">"z"</span>, <span class="va">.</span><span class="op">)</span> <span class="co"># letters %&gt;% sub(pattern = "s", replacement = "z", x=letters)</span></span>
<span><span class="co">#&gt;  [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k" "l" "m" "n" "o" "p" "q" "r" "z"</span></span>
<span><span class="co">#&gt; [20] "t" "u" "v" "w" "x" "y" "z"</span></span></code></pre></div>
<div class="sourceCode" id="cb383"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">unisex_names</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span>  </span>
<span><span class="co">#&gt; # A tibble: 3 × 5</span></span>
<span><span class="co">#&gt;   name     total male_share female_share    gap</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;    &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 Casey  176544.      0.584        0.416 0.169 </span></span>
<span><span class="co">#&gt; 2 Riley  154861.      0.508        0.492 0.0153</span></span>
<span><span class="co">#&gt; 3 Jessie 136382.      0.478        0.522 0.0443</span></span>
<span><span class="va">unisex_names</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>         <span class="co"># csak az utolsó sor </span></span>
<span><span class="co">#&gt; # A tibble: 1 × 5</span></span>
<span><span class="co">#&gt;   name  total male_share female_share    gap</span></span>
<span><span class="co">#&gt;   &lt;chr&gt; &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 Aeon   100.      0.465        0.535 0.0703</span></span>
<span><span class="va">unisex_names</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span><span class="op">(</span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">-</span><span class="fl">4</span><span class="op">)</span><span class="op">:</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="co"># utolsó 5 sor</span></span>
<span><span class="co">#&gt; # A tibble: 5 × 5</span></span>
<span><span class="co">#&gt;   name     total male_share female_share    gap</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;    &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 Eaden     102.      0.573        0.427 0.146 </span></span>
<span><span class="co">#&gt; 2 Inioluwa  101.      0.353        0.647 0.295 </span></span>
<span><span class="co">#&gt; 3 Gwin      101.      0.562        0.438 0.124 </span></span>
<span><span class="co">#&gt; 4 Yacine    100.      0.545        0.455 0.0892</span></span>
<span><span class="co">#&gt; 5 Aeon      100.      0.465        0.535 0.0703</span></span>
<span><span class="va">unisex_names</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span>, size<span class="op">=</span><span class="fl">4</span><span class="op">)</span><span class="op">)</span> <span class="co"># véletlen 4 sor</span></span>
<span><span class="co">#&gt; # A tibble: 4 × 5</span></span>
<span><span class="co">#&gt;   name   total male_share female_share    gap</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;  &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 Adisa   151.      0.413        0.587 0.174 </span></span>
<span><span class="co">#&gt; 2 Armoni 1707.      0.395        0.605 0.211 </span></span>
<span><span class="co">#&gt; 3 Kalani 4012.      0.411        0.589 0.178 </span></span>
<span><span class="co">#&gt; 4 Riyan   528.      0.509        0.491 0.0179</span></span>
<span><span class="va">d.tbl</span> <span class="op">&lt;-</span> <span class="va">unisex_names</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span><span class="op">(</span><span class="fl">21</span><span class="op">:</span><span class="fl">24</span>, size<span class="op">=</span><span class="fl">5</span>, replace <span class="op">=</span> <span class="cn">T</span> <span class="op">)</span><span class="op">)</span> <span class="co"># véletlen 4 sor</span></span>
<span><span class="va">d.tbl</span></span>
<span><span class="co">#&gt; # A tibble: 5 × 5</span></span>
<span><span class="co">#&gt;   name     total male_share female_share     gap</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;    &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt;   &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 Carey   24790.      0.523        0.477 0.0465 </span></span>
<span><span class="co">#&gt; 2 Kris    24956.      0.499        0.501 0.00275</span></span>
<span><span class="co">#&gt; 3 Blair   23160.      0.490        0.510 0.0195 </span></span>
<span><span class="co">#&gt; 4 Emerson 24167.      0.526        0.474 0.0511 </span></span>
<span><span class="co">#&gt; 5 Kris    24956.      0.499        0.501 0.00275</span></span>
<span></span>
<span><span class="va">d.tbl</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span><span class="op">(</span><span class="op">)</span>   <span class="co"># a sorok egyedivé tétele</span></span>
<span><span class="co">#&gt; # A tibble: 4 × 5</span></span>
<span><span class="co">#&gt;   name     total male_share female_share     gap</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;    &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt;   &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 Carey   24790.      0.523        0.477 0.0465 </span></span>
<span><span class="co">#&gt; 2 Kris    24956.      0.499        0.501 0.00275</span></span>
<span><span class="co">#&gt; 3 Blair   23160.      0.490        0.510 0.0195 </span></span>
<span><span class="co">#&gt; 4 Emerson 24167.      0.526        0.474 0.0511</span></span>
<span></span>
<span></span>
<span><span class="va">unisex_names</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/sample_n.html">sample_n</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span>        <span class="co"># véletlen 3 sor</span></span>
<span><span class="co">#&gt; # A tibble: 3 × 5</span></span>
<span><span class="co">#&gt;   name    total male_share female_share    gap</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;   &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 Lashaun 1978.      0.379        0.621 0.243 </span></span>
<span><span class="co">#&gt; 2 Ardell  2327.      0.523        0.477 0.0458</span></span>
<span><span class="co">#&gt; 3 Audi     149.      0.408        0.592 0.183</span></span>
<span><span class="va">unisex_names</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/sample_n.html">sample_frac</a></span><span class="op">(</span><span class="fl">0.01</span><span class="op">)</span>  <span class="co"># véletlen 1%-nyi sor</span></span>
<span><span class="co">#&gt; # A tibble: 9 × 5</span></span>
<span><span class="co">#&gt;   name   total male_share female_share    gap</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;  &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 Areon   126.      0.646        0.354 0.291 </span></span>
<span><span class="co">#&gt; 2 Hudsyn  262.      0.409        0.591 0.182 </span></span>
<span><span class="co">#&gt; 3 Jari    448.      0.351        0.649 0.299 </span></span>
<span><span class="co">#&gt; 4 Danyl   126.      0.545        0.455 0.0891</span></span>
<span><span class="co">#&gt; 5 Currie  155.      0.661        0.339 0.322 </span></span>
<span><span class="co">#&gt; 6 Vail    106.      0.380        0.620 0.241 </span></span>
<span><span class="co">#&gt; 7 Raymie  265.      0.380        0.620 0.240 </span></span>
<span><span class="co">#&gt; 8 Shalom 2061.      0.659        0.341 0.318 </span></span>
<span><span class="co">#&gt; 9 Jahdai  113.      0.377        0.623 0.247</span></span></code></pre></div>
<div class="sourceCode" id="cb384"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">unisex_names</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">gap</span><span class="op">&lt;</span><span class="fl">0.003</span>, <span class="fu"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="st">"^C"</span>, x <span class="op">=</span> <span class="va">name</span><span class="op">)</span> <span class="op">|</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="st">"^K"</span>, x <span class="op">=</span> <span class="va">name</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 5</span></span>
<span><span class="co">#&gt;   name      total male_share female_share      gap</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;     &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt;    &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 Kris     24956.      0.499        0.501 0.00275 </span></span>
<span><span class="co">#&gt; 2 Camdyn    3275.      0.500        0.500 0.000154</span></span>
<span><span class="co">#&gt; 3 Christan  2685.      0.501        0.499 0.00227 </span></span>
<span><span class="co">#&gt; 4 Kam        729.      0.501        0.499 0.00235 </span></span>
<span><span class="co">#&gt; 5 Kodee      533.      0.500        0.500 0.000316</span></span>
<span><span class="co">#&gt; 6 Callaway   292.      0.500        0.500 0.000455</span></span></code></pre></div>
<div class="sourceCode" id="cb385"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">unisex_names</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter_all.html">filter_all</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/all_vars.html">any_vars</a></span><span class="op">(</span><span class="va">.</span><span class="op">&gt;</span><span class="fl">0.4</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 919 × 5</span></span>
<span><span class="co">#&gt;    name      total male_share female_share    gap</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;     &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 Casey   176544.      0.584        0.416 0.169 </span></span>
<span><span class="co">#&gt;  2 Riley   154861.      0.508        0.492 0.0153</span></span>
<span><span class="co">#&gt;  3 Jessie  136382.      0.478        0.522 0.0443</span></span>
<span><span class="co">#&gt;  4 Jackie  132929.      0.421        0.579 0.158 </span></span>
<span><span class="co">#&gt;  5 Avery   121797.      0.335        0.665 0.330 </span></span>
<span><span class="co">#&gt;  6 Jaime   109870.      0.562        0.438 0.124 </span></span>
<span><span class="co">#&gt;  7 Peyton   94896.      0.434        0.566 0.133 </span></span>
<span><span class="co">#&gt;  8 Kerry    88964.      0.484        0.516 0.0321</span></span>
<span><span class="co">#&gt;  9 Jody     80401.      0.352        0.648 0.296 </span></span>
<span><span class="co">#&gt; 10 Kendall  79211.      0.372        0.628 0.255 </span></span>
<span><span class="co">#&gt; # … with 909 more rows</span></span></code></pre></div>
<div class="sourceCode" id="cb386"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">smiths</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span>kor<span class="op">=</span><span class="va">age</span>, suly<span class="op">=</span><span class="va">weight</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 2</span></span>
<span><span class="co">#&gt;     kor  suly</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1    33    90</span></span>
<span><span class="co">#&gt; 2    NA    NA</span></span>
<span><span class="va">smiths</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>kor<span class="op">=</span><span class="va">age</span>, suly<span class="op">=</span><span class="va">weight</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 5</span></span>
<span><span class="co">#&gt;   subject     time   kor  suly height</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 John Smith     1    33    90   1.87</span></span>
<span><span class="co">#&gt; 2 Mary Smith     1    NA    NA   1.54</span></span></code></pre></div>
<div class="sourceCode" id="cb387"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/rudeboybert/fivethirtyeight">fivethirtyeight</a></span><span class="op">)</span></span></code></pre></div>
<div id="oszlopok-válogatása-a-tidyverse-r-ben" class="section level4" number="7.2.1.1">
<h4>
<span class="header-section-number">7.2.1.1</span> Oszlopok válogatása a Tidyverse R-ben<a class="anchor" aria-label="anchor" href="#oszlopok-v%C3%A1logat%C3%A1sa-a-tidyverse-r-ben"><i class="fas fa-link"></i></a>
</h4>
<p>A Tidyverse R a <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> függvényt kínálja az oszlopok indexelése. A <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> függvény argumentumába az Alap R-ben látott fenti lehetőség mindegyikét használhatjuk, némi könnyítéssel:</p>
<div class="sourceCode" id="cb388"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># library(tidyverse)</span></span>
<span><span class="co"># smiths.tbl %&gt;% select(1:3)</span></span>
<span><span class="co"># smiths.tbl %&gt;% select(1, 3, 5)</span></span>
<span><span class="co"># smiths.tbl %&gt;% select(-1, -3, -5)</span></span>
<span><span class="co"># smiths.tbl %&gt;% select(subject, height)</span></span></code></pre></div>
<p>Láthatjuk a <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> elbírja a pozitív vagy negatív indexek közvetlen megadását, nem kell vektorban felsorolni őket, illetve az oszlopneveket idézőjel nélkül is megadhatjuk.
További lehetőség, hogy az oszlopneveket úgy ishasználhatjuk, mintha számok lennének, a kettőspont operátor és a negtív előjel is használható velük:</p>
<div class="sourceCode" id="cb389"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># smiths.tbl %&gt;% select(subject:age)</span></span>
<span><span class="co"># smiths.tbl %&gt;% select(-subject, -age)</span></span>
<span><span class="co"># smiths.tbl %&gt;% select(-(subject:age))</span></span></code></pre></div>
<p>Az oszlopok között az oszlopnevek alapján is lehet válogatni, ehhez a Tidyverse R számos függvényt ajánl:</p>
<div class="sourceCode" id="cb390"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># smiths.tbl %&gt;% select(starts_with("ti"))</span></span>
<span><span class="co"># smiths.tbl %&gt;% select(ends_with("t"))</span></span>
<span><span class="co"># smiths.tbl %&gt;% select(contains("ei"))</span></span>
<span><span class="co"># d.df &lt;- data.frame(id=1, kerd.1=10, kerd.2=20, kerd.3=30)</span></span>
<span><span class="co"># d.df</span></span>
<span><span class="co"># d.df %&gt;% select(num_range("kerd.",1:3))</span></span></code></pre></div>
<p>Válogathatunk az oszlopok közül az oszlop adataira vonatkozó logikai értéket szolgáltató függvények segítségével. Erre a <code><a href="https://dplyr.tidyverse.org/reference/select_all.html">select_if()</a></code> ad lehetőséget.</p>
<div class="sourceCode" id="cb391"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># smiths.tbl %&gt;% select_if(is.numeric)</span></span>
<span><span class="co"># smiths.tbl %&gt;% select_if(is.character)</span></span></code></pre></div>
</div>
</div>
</div>
<div id="haladó-adatkezelés" class="section level2" number="7.3">
<h2>
<span class="header-section-number">7.3</span> Haladó adatkezelés<a class="anchor" aria-label="anchor" href="#halad%C3%B3-adatkezel%C3%A9s"><i class="fas fa-link"></i></a>
</h2>

<div class="rmdlevel3">
<p>Ebben a fejezetben:</p>
</div>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="beolvasas.html"><span class="header-section-number">6</span> Beolvasás</a></div>
<div class="next"><a href="mutatok-tablazatok.html"><span class="header-section-number">8</span> Mutatók és táblázatok</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#adatmanipulacio"><span class="header-section-number">7</span> Adatmanipuláció</a></li>
<li>
<a class="nav-link" href="#adatkezel%C3%A9s-az-alap-r-ben"><span class="header-section-number">7.1</span> Adatkezelés az Alap R-ben</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#inform%C3%A1ci%C3%B3-megtekint%C3%A9se"><span class="header-section-number">7.1.1</span> Információ megtekintése</a></li>
<li><a class="nav-link" href="#oszlopok-kezel%C3%A9se"><span class="header-section-number">7.1.2</span> Oszlopok kezelése</a></li>
<li><a class="nav-link" href="#sorok-kezel%C3%A9se"><span class="header-section-number">7.1.3</span> Sorok kezelése</a></li>
<li><a class="nav-link" href="#adatt%C3%A1bla-sz%C5%B1r%C3%A9se"><span class="header-section-number">7.1.4</span> Adattábla szűrése</a></li>
<li><a class="nav-link" href="#hi%C3%A1nyz%C3%B3-%C3%A9rt%C3%A9keket-tatalmaz%C3%B3-sorok-elt%C3%A1vol%C3%ADt%C3%A1sa"><span class="header-section-number">7.1.5</span> Hiányzó értékeket tatalmazó sorok eltávolítása</a></li>
<li><a class="nav-link" href="#adatt%C3%A1bl%C3%A1k-indexel%C3%A9se"><span class="header-section-number">7.1.6</span> Adattáblák indexelése</a></li>
<li><a class="nav-link" href="#v%C3%A1logat%C3%A1s-az-sorokb%C3%B3l"><span class="header-section-number">7.1.7</span> Válogatás az sorokból</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#adatkezel%C3%A9s-tidyverse-r-ben"><span class="header-section-number">7.2</span> Adatkezelés Tidyverse R-ben</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#a-oper%C3%A1tor"><span class="header-section-number">7.2.1</span> A %&gt;% operátor</a></li></ul>
</li>
<li><a class="nav-link" href="#halad%C3%B3-adatkezel%C3%A9s"><span class="header-section-number">7.3</span> Haladó adatkezelés</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/abarik/aeer/blob/master/07-Adatmanipulacio.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/abarik/aeer/edit/master/07-Adatmanipulacio.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Adatkezelés és egyváltozós elemzések R-ben</strong>" was written by Abari Kálmán. It was last built on 2022-09-13.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
