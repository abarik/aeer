<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>6 Beolvasás | Adatkezelés és egyváltozós elemzések R-ben</title>
<meta name="author" content="Abari Kálmán">
<meta name="description" content="6.1 Alapvető formátumok  Ebben a fejezetben áttekintjük: a táblázatkezelők állományainak beolvasását, a tagolt szöveges állományok fogalmát és azok beolvasását az Alap R-ben. Az R-ben adatokkal...">
<meta name="generator" content="bookdown 0.28 with bs4_book()">
<meta property="og:title" content="6 Beolvasás | Adatkezelés és egyváltozós elemzések R-ben">
<meta property="og:type" content="book">
<meta property="og:url" content="https://abarik.github.io/aeer/beolvasas.html">
<meta property="og:image" content="https://abarik.github.io/aeer/images/cover.jpg">
<meta property="og:description" content="6.1 Alapvető formátumok  Ebben a fejezetben áttekintjük: a táblázatkezelők állományainak beolvasását, a tagolt szöveges állományok fogalmát és azok beolvasását az Alap R-ben. Az R-ben adatokkal...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="6 Beolvasás | Adatkezelés és egyváltozós elemzések R-ben">
<meta name="twitter:description" content="6.1 Alapvető formátumok  Ebben a fejezetben áttekintjük: a táblázatkezelők állományainak beolvasását, a tagolt szöveges állományok fogalmát és azok beolvasását az Alap R-ben. Az R-ben adatokkal...">
<meta name="twitter:image" content="https://abarik.github.io/aeer/images/cover.jpg">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.0/transition.js"></script><script src="libs/bs3compat-0.4.0/tabs.js"></script><script src="libs/bs3compat-0.4.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-68765210-2', 'auto');
      ga('send', 'pageview');

    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="css/style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Adatkezelés és egyváltozós elemzések R-ben</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Üdvözöljük</a></li>
<li><a class="" href="eloszo.html">Előszó</a></li>
<li><a class="" href="itt-kezdodik.html"><span class="header-section-number">1</span> Itt kezdődik</a></li>
<li><a class="" href="mi-az-r.html"><span class="header-section-number">2</span> Mi az R?</a></li>
<li><a class="" href="az-r-telepitese.html"><span class="header-section-number">3</span> Az R telepítése</a></li>
<li><a class="" href="munka-az-r-ben.html"><span class="header-section-number">4</span> Munka az R-ben</a></li>
<li><a class="" href="az-r-nyelv.html"><span class="header-section-number">5</span> Az R nyelv</a></li>
<li><a class="active" href="beolvasas.html"><span class="header-section-number">6</span> Beolvasás</a></li>
<li><a class="" href="adatmanipulacio.html"><span class="header-section-number">7</span> Adatmanipuláció</a></li>
<li><a class="" href="mutatok-tablazatok.html"><span class="header-section-number">8</span> Mutatók és táblázatok</a></li>
<li><a class="" href="grafika-az-r-ben.html"><span class="header-section-number">9</span> Grafika az R-ben</a></li>
<li><a class="" href="irodalomjegyzek.html">Irodalomjegyzék</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/abarik/aeer">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="beolvasas" class="section level1" number="6">
<h1>
<span class="header-section-number">6</span> Beolvasás<a class="anchor" aria-label="anchor" href="#beolvasas"><i class="fas fa-link"></i></a>
</h1>
<div class="inline-figure"><img src="images/ch_06_small.png" width="70%" style="display: block; margin: auto;"></div>
<div id="beolvas-alapveto" class="section level2" number="6.1">
<h2>
<span class="header-section-number">6.1</span> Alapvető formátumok<a class="anchor" aria-label="anchor" href="#beolvas-alapveto"><i class="fas fa-link"></i></a>
</h2>

<div class="rmdlevel1">
<p>Ebben a fejezetben áttekintjük:</p>
<ul>
<li>a táblázatkezelők állományainak beolvasását,</li>
<li>a tagolt szöveges állományok fogalmát és</li>
<li>azok beolvasását az <em>Alap R</em>-ben.</li>
</ul>
</div>
<p>Az R-ben adatokkal dolgozunk, amelyek beolvasására és kiírására az R számos eljárást kínál. Adatokat beolvashatunk a billentyűzetről, a vágóasztalról és külső adatforrásból, állományból vagy adatbázisból is. Az R-ben feldolgozott adatokat a vágóasztalra, adatbázisba vagy állományba írhatjuk ki. Ebben a fejezetben csak a két legtermészetesebb beolvasási módszert ismertetjük, az adatok beolvasást táblázatkezelők (pl. Microsoft Excel, LibreOffice Calc) állományaiból és tagolt szöveges állományokból.</p>
<div id="táblázatkezelők" class="section level3" number="6.1.1">
<h3>
<span class="header-section-number">6.1.1</span> Táblázatkezelők<a class="anchor" aria-label="anchor" href="#t%C3%A1bl%C3%A1zatkezel%C5%91k"><i class="fas fa-link"></i></a>
</h3>
<p>A táblázatkezelők saját állományai (pl. <code>.xlsx</code> és <code>.ods</code>) kezelhetők a legkényelmesebben az adatelemzés során. Az adatbevitel és a rögzített adatok karbantartása, későbbi módosítása ebben a formátumban a legegyszerűbb, ráadásul a számítógépes tesztek sokszor ilyen típusú állományokba írják a válaszokat. Ezek az állományok (munkafüzetek) munkalapokból állnak, így akár több adatbázist is tárolhatunk egyetlen munkafüzetben. Egy Excel vagy LibreOffice Calc adatbázis esetén tudnunk kell, hogy az melyik munkalapon helyezkedik el, ritkábban pedig azt is, melyik tartományban foglal helyet a beolvasandó adatbázis.</p>
<p>Az Excel és LibreOffice Calc adatbázisok beolvasást a <strong>rio</strong> csomag <code><a href="https://rdrr.io/pkg/rio/man/import.html">import()</a></code> függvényével végezzük, melynek egyetlen kötelező argumentuma a fájl elérési útja (<code>file=</code>).</p>
<p>Előkészítettünk egy 4 munkalapos Excel és LibreOffice Calc adatbázist (<code>agatha_christie_m.xlsx</code>, <code>agatha_christie_m.ods</code>), amelynek mindegyik munkalapján ugyanazt az adatbázist találjuk meg, de egyre zajosabb környezetben.</p>
<p>Az 1. munkalapon nincsenek zavaró cellák, csupán a adatbázisunk értékes adatcellái az <code>A1</code> cellától kezdődően.. Ebben az esetben nincs szükség más argumentumra, csak az állomány elérési útjára.</p>
<div class="sourceCode" id="cb291"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/leeper/rio">rio</a></span><span class="op">)</span></span>
<span><span class="va">ac.1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"adat/agatha_christie_m.xlsx"</span><span class="op">)</span> <span class="co"># MS Excel</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">ac.1</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span>, n<span class="op">=</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt;   megjelenes.eve                  cim.magyar                  cim.angol</span></span>
<span><span class="co">#&gt; 1           1930      Gyilkosság a paplakban The Murder at the Vicarage</span></span>
<span><span class="co">#&gt; 2           1942 Holttest a könyvtárszobában    The Body in the Library</span></span>
<span><span class="co">#&gt; 3           1942           A láthatatlan kéz          The Moving Finger</span></span>
<span><span class="va">ac.1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"adat/agatha_christie_m.ods"</span><span class="op">)</span>  <span class="co"># LibreOffice Calc</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">ac.1</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span>, n<span class="op">=</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt;   megjelenes.eve                  cim.magyar                  cim.angol</span></span>
<span><span class="co">#&gt; 1           1930      Gyilkosság a paplakban The Murder at the Vicarage</span></span>
<span><span class="co">#&gt; 2           1942 Holttest a könyvtárszobában    The Body in the Library</span></span>
<span><span class="co">#&gt; 3           1942           A láthatatlan kéz          The Moving Finger</span></span></code></pre></div>
<p>A 2. munkalapon már nem az <code>A1</code> cellában kezdődik az adatbázis, de továbbra sincs zavaró egyéb cella. Az <code><a href="https://rdrr.io/pkg/rio/man/import.html">import()</a></code> megtalálja az adatbázist a munkalapon az Excel adatbázis esetében, de a LibreOffice Calc adatbázis beolvasásához pontosítani kell az adatbázis helyét. A tartomány közvetlen megadásával (<code>range="F7:I52"</code>) utasítjuk az <code><a href="https://rdrr.io/pkg/rio/man/import.html">import()</a></code> függvényt, hogy honnan olvassa be az adatbázisunkat. Természetesen a megadott cellatartomány az oszlopneveket is tartalmazza annak első sorában.</p>
<p>Az <code>XLSX</code> és az <code>ODS</code> beolvasása közötti eltérés rávilágít az <code><a href="https://rdrr.io/pkg/rio/man/import.html">import()</a></code> függvényünk működésére. Nem maga az <code><a href="https://rdrr.io/pkg/rio/man/import.html">import()</a></code> végzi a közvetlen beolvasást, hanem okosan kiválasztja a beolvasandó állomány kiterjesztése alapján, hogy melyik csomag, melyik konkrét függvényét hívja. Az Excel állományokat a <em>Tidyverse R</em> <strong>readxl</strong> csomag <code>read_excel()</code> függvénye fogja beolvasni, a LibreOffice Calc állományokat a <strong>readODS</strong> csomag <code>read_ods()</code> függvénye, amelyek hívását már az <code><a href="https://rdrr.io/pkg/rio/man/import.html">import()</a></code> végzi. Mivel két különböző függvény dolgozik a háttérben, így az <code>XLSX</code> és az <code>ODS</code> állományokat beolvasó parancs paraméterezése is eltérhet, és esetünkben el is tér. A <code>file=</code> argumentum közös, és természetesen a munkalap sorszámát meg kell adnunk, amely mindkét esetben a <code>sheet=2</code>-vel történik.</p>
<div class="sourceCode" id="cb292"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ac.2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"adat/agatha_christie_m.xlsx"</span>, sheet<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">ac.2</span>, n<span class="op">=</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt;   megjelenes.eve                  cim.magyar                  cim.angol</span></span>
<span><span class="co">#&gt; 1           1930      Gyilkosság a paplakban The Murder at the Vicarage</span></span>
<span><span class="co">#&gt; 2           1942 Holttest a könyvtárszobában    The Body in the Library</span></span>
<span><span class="co">#&gt; 3           1942           A láthatatlan kéz          The Moving Finger</span></span>
<span><span class="co">#&gt;      szereplo</span></span>
<span><span class="co">#&gt; 1 Miss Marple</span></span>
<span><span class="co">#&gt; 2 Miss Marple</span></span>
<span><span class="co">#&gt; 3 Miss Marple</span></span>
<span><span class="va">ac.2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"adat/agatha_christie_m.ods"</span>, sheet<span class="op">=</span><span class="fl">2</span>, range<span class="op">=</span><span class="st">"F7:I52"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">ac.2</span>, n<span class="op">=</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt;   megjelenes.eve                  cim.magyar                  cim.angol</span></span>
<span><span class="co">#&gt; 1           1930      Gyilkosság a paplakban The Murder at the Vicarage</span></span>
<span><span class="co">#&gt; 2           1942 Holttest a könyvtárszobában    The Body in the Library</span></span>
<span><span class="co">#&gt; 3           1942           A láthatatlan kéz          The Moving Finger</span></span>
<span><span class="co">#&gt;      szereplo</span></span>
<span><span class="co">#&gt; 1 Miss Marple</span></span>
<span><span class="co">#&gt; 2 Miss Marple</span></span>
<span><span class="co">#&gt; 3 Miss Marple</span></span></code></pre></div>
<p>A 3. munkalapon már az első 6 sor zavaró, nem az adatbázishoz tartozó adatokat tartalmaz, így azokat elegendő kihagyni (<code>skip=6</code>) a beolvasásból az Excel esetében, míg az <code>ODS</code>-hez a tartomány pontos megadása szükséges a sikeres beolvasásához.</p>
<div class="sourceCode" id="cb293"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ac.3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"adat/agatha_christie_m.xlsx"</span>, sheet<span class="op">=</span><span class="fl">3</span>, skip<span class="op">=</span><span class="fl">6</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">ac.3</span>, n<span class="op">=</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt;   megjelenes.eve                  cim.magyar                  cim.angol</span></span>
<span><span class="co">#&gt; 1           1930      Gyilkosság a paplakban The Murder at the Vicarage</span></span>
<span><span class="co">#&gt; 2           1942 Holttest a könyvtárszobában    The Body in the Library</span></span>
<span><span class="co">#&gt; 3           1942           A láthatatlan kéz          The Moving Finger</span></span>
<span><span class="co">#&gt;      szereplo</span></span>
<span><span class="co">#&gt; 1 Miss Marple</span></span>
<span><span class="co">#&gt; 2 Miss Marple</span></span>
<span><span class="co">#&gt; 3 Miss Marple</span></span>
<span><span class="va">ac.3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"adat/agatha_christie_m.ods"</span>, sheet<span class="op">=</span><span class="fl">3</span>, range<span class="op">=</span><span class="st">"F7:I52"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">ac.3</span>, n<span class="op">=</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt;   megjelenes.eve                  cim.magyar                  cim.angol</span></span>
<span><span class="co">#&gt; 1           1930      Gyilkosság a paplakban The Murder at the Vicarage</span></span>
<span><span class="co">#&gt; 2           1942 Holttest a könyvtárszobában    The Body in the Library</span></span>
<span><span class="co">#&gt; 3           1942           A láthatatlan kéz          The Moving Finger</span></span>
<span><span class="co">#&gt;      szereplo</span></span>
<span><span class="co">#&gt; 1 Miss Marple</span></span>
<span><span class="co">#&gt; 2 Miss Marple</span></span>
<span><span class="co">#&gt; 3 Miss Marple</span></span></code></pre></div>
<p>A 4. munkalapon már rendkívül terhelt az adatbázisunk a környező zavaró celláktól, így közvetlenül a tartomány megadásával (<code>range="F7:I52"</code>) utasítjuk az <code><a href="https://rdrr.io/pkg/rio/man/import.html">import()</a></code> függvényt Excel esetében is, hogy honnan olvassa be az adatbázisunkat.</p>
<div class="sourceCode" id="cb294"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ac.4</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"adat/agatha_christie_m.xlsx"</span>, sheet<span class="op">=</span><span class="fl">4</span>, range<span class="op">=</span><span class="st">"F7:I52"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">ac.4</span>, n<span class="op">=</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt;   megjelenes.eve                  cim.magyar                  cim.angol</span></span>
<span><span class="co">#&gt; 1           1930      Gyilkosság a paplakban The Murder at the Vicarage</span></span>
<span><span class="co">#&gt; 2           1942 Holttest a könyvtárszobában    The Body in the Library</span></span>
<span><span class="co">#&gt; 3           1942           A láthatatlan kéz          The Moving Finger</span></span>
<span><span class="co">#&gt;      szereplo</span></span>
<span><span class="co">#&gt; 1 Miss Marple</span></span>
<span><span class="co">#&gt; 2 Miss Marple</span></span>
<span><span class="co">#&gt; 3 Miss Marple</span></span>
<span><span class="va">ac.4</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"adat/agatha_christie_m.ods"</span>, sheet<span class="op">=</span><span class="fl">4</span>, range<span class="op">=</span><span class="st">"F7:I52"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">ac.4</span>, n<span class="op">=</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt;   megjelenes.eve                  cim.magyar                  cim.angol</span></span>
<span><span class="co">#&gt; 1           1930      Gyilkosság a paplakban The Murder at the Vicarage</span></span>
<span><span class="co">#&gt; 2           1942 Holttest a könyvtárszobában    The Body in the Library</span></span>
<span><span class="co">#&gt; 3           1942           A láthatatlan kéz          The Moving Finger</span></span>
<span><span class="co">#&gt;      szereplo</span></span>
<span><span class="co">#&gt; 1 Miss Marple</span></span>
<span><span class="co">#&gt; 2 Miss Marple</span></span>
<span><span class="co">#&gt; 3 Miss Marple</span></span></code></pre></div>
<p>Jegyezzük meg, ha csak tehetjük, adatainkat táblázatkezelő programmal hozzuk létre és annak saját formátumában (<code>XLSX</code> vagy <code>ODS</code>) tároljuk.</p>
</div>
<div id="tagolt-szöveges-állományok" class="section level3" number="6.1.2">
<h3>
<span class="header-section-number">6.1.2</span> Tagolt szöveges állományok<a class="anchor" aria-label="anchor" href="#tagolt-sz%C3%B6veges-%C3%A1llom%C3%A1nyok"><i class="fas fa-link"></i></a>
</h3>
<p>A tagolt szöveges állományok kitüntetett szerepet játszanak a statisztikai adatfeldolgozásban, ugyanis minden statisztikai programcsomag és táblázatkezelő be tud olvasni ilyen formátumú állományokat, és ki tud exportálni ilyen formátumba. A tagolt szöveges állományok létrehozásához pedig egy jegyzettömbszerű szövegszerkesztő is elegendő, tehát ez a formátum elég nagy szabadságot ad az adataink kezeléshez.</p>
<div id="tagolt-szöveges-állomány-létrehozása" class="section level4" number="6.1.2.1">
<h4>
<span class="header-section-number">6.1.2.1</span> Tagolt szöveges állomány létrehozása<a class="anchor" aria-label="anchor" href="#tagolt-sz%C3%B6veges-%C3%A1llom%C3%A1ny-l%C3%A9trehoz%C3%A1sa"><i class="fas fa-link"></i></a>
</h4>
<p>A tagolt szöveges állomány egy egyszerű, formázást nem tartalmazó szöveges állomány, amelyet azonos szerkezetű sorok alkotnak. A sorokat az operációs rendszernek megfelelő sorvége karakterek zárják. Jegyzettömbszerű szövegszerkesztő használata során, az <code>ENTER</code> leütésével ezek a sorvége karakterek kerülnek fizikailag a szöveges állományba. Linux és macOS operációs rendszer alatt az <code>LF</code> karakter, Windows platformon a <code>CR</code> és <code>LF</code> karakterek. Ezeket sorvége karaktereknek hívjuk, az <code>LF</code> a soremelés (<code>\n</code>), a <code>CR</code> a kocsi vissza (<code>\r</code>) karakter. Annak ellenére, hogy különböző platformokon más-más jelzi a sorvégét, a beolvasó függvények felismerik ezeket, és helyesen értelmezik. Ezzel nekünk nem kell külön foglalkoznunk.</p>
<p>Minden tagolt szöveges állományban van egy kitüntetett karakter, a tagoló karakter. Ez tipikusan a pontosvessző (<code>;</code>), a szóköz (<code></code>), a tabulátor (<code>\t</code>) vagy a vessző (<code>,</code>) karakter. A tagolt szöveges állomány minden sorában ezek egyikét használjuk az adatértékek elválasztására, ráadásul minden sorban azonos számú adatértéknek kell szerepelni, ennek megfelelően minden sorban azonos számú tagoló karakter van.</p>
<p>Nézzünk példát pontosvesszővel tagolt szöveges állományra:</p>
<div class="sourceCode" id="cb295"><pre class="sourceCode txt"><code class="sourceCode default"><span id="cb295-1"><a href="beolvasas.html#cb295-1" aria-hidden="true" tabindex="-1"></a>nem;kor;pulzus</span>
<span id="cb295-2"><a href="beolvasas.html#cb295-2" aria-hidden="true" tabindex="-1"></a>fiú;12;71</span>
<span id="cb295-3"><a href="beolvasas.html#cb295-3" aria-hidden="true" tabindex="-1"></a>fiú;11;69</span>
<span id="cb295-4"><a href="beolvasas.html#cb295-4" aria-hidden="true" tabindex="-1"></a>lány;14;70</span></code></pre></div>
<p>Összesen 4 sora van, soronként 3 adatértékkel, és 2 pontosvesszővel. Látható, hogy az első sor kitüntetett, azaz igazából nem méréssel kapott adatokat tartalmaz, hanem megnevezi azokat. Gyakori, hogy a tagolt szöveges állományok első sora ilyen speciális fejlécsor, amely tehát oszlopneveket tartalmaz. Ez nem kötelező, elképzelhető, hogy az első sorban már közvetlenül adatértékek vannak.</p>
<p>Nézzünk egy szóközzel tagolt szöveges állományt:</p>
<div class="sourceCode" id="cb296"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb296-1"><a href="beolvasas.html#cb296-1" aria-hidden="true" tabindex="-1"></a>nem kor pulzus atlag</span>
<span id="cb296-2"><a href="beolvasas.html#cb296-2" aria-hidden="true" tabindex="-1"></a>fiú 12 71 3,92</span>
<span id="cb296-3"><a href="beolvasas.html#cb296-3" aria-hidden="true" tabindex="-1"></a>fiú 11 69 4,12</span>
<span id="cb296-4"><a href="beolvasas.html#cb296-4" aria-hidden="true" tabindex="-1"></a>lány 14 70 5,00</span></code></pre></div>
<p>Ez a tagolt szöveges állomány 4 sort, soronként 4 adatértéket és 3 elválasztó szóközt tartalmaz. Az első sora fejlécsor. Látható, hogy tizedes törtek is szerepelnek az állományban, a tizedesvesszőt valóban vesszővel jelöltük. Ez nem minden esetben van így, tizedes pont is elválaszthatná az egész és tört részt.</p>
<p>Tekintsünk egy elsőre kicsit rendezetlen szöveges állományt:</p>
<div class="sourceCode" id="cb297"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb297-1"><a href="beolvasas.html#cb297-1" aria-hidden="true" tabindex="-1"></a>Általános iskolai felmérés</span>
<span id="cb297-2"><a href="beolvasas.html#cb297-2" aria-hidden="true" tabindex="-1"></a>2019.03.02.</span>
<span id="cb297-3"><a href="beolvasas.html#cb297-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb297-4"><a href="beolvasas.html#cb297-4" aria-hidden="true" tabindex="-1"></a>#2.b</span>
<span id="cb297-5"><a href="beolvasas.html#cb297-5" aria-hidden="true" tabindex="-1"></a>nem,kor,pulzus,atlag</span>
<span id="cb297-6"><a href="beolvasas.html#cb297-6" aria-hidden="true" tabindex="-1"></a>fiú,12,71,3.92</span>
<span id="cb297-7"><a href="beolvasas.html#cb297-7" aria-hidden="true" tabindex="-1"></a>#fiú,11,69,4.12</span>
<span id="cb297-8"><a href="beolvasas.html#cb297-8" aria-hidden="true" tabindex="-1"></a>lány,14,70,5.00 # ellenőrizni</span></code></pre></div>
<p>Az állomány második felében valóban felfedezhetjük a rendezettséget, a fejlécet 4 oszlopnévvel, és alatta a sorokat 4-4 adatértékkel. Ez a rész olyan, mint egy vesszővel elválasztott szöveges állomány, ahol a tizedes törtekben pontot használunk az egész és tört rész elválasztására.</p>
<p>Az állomány eleje azonban egyáltalán nem hasonlít a tagolt szöveges állományokra, és ráadásul kettős kereszttel (<code>#</code>), vagyis megjegyzésnek szánt szövegekkel tarkított soraink is vannak. Az ilyen szabadabb stílusú állományok is beolvashatók az R-be, csupán meg kell adnunk, hogy az elejéről hány sort hagyjon figyelmen kívül (3 sort), és mit tekintsen megjegyzésnek (a kettős keresztet) a beolvasását végző eljárás. Ebben az esetben a fejlécen kívül még 2 adatsor lesz a beolvasott adattáblában.</p>
<p>Melyek a tagolt szöveges állományok fontos jellemzői:</p>
<ul>
<li>a tagoló karakter,</li>
<li>a decimális elválasztó,</li>
<li>van-e fejlécsor,</li>
<li>hány sort lépjünk át az elejéről,</li>
<li>mi a megjegyzés karakter,</li>
<li>milyen kódolású az állomány.</li>
</ul>
<p>Ahogyan említettük tagolt szöveges állományt egy jegyzettömbszerű szövegszerkesztővel mi is létrehozhatunk, de ha módunk van rá, akkor a minél kényelmesebb adatbevitel miatt, használjunk táblázatkezelőt, és az abban elkészült táblázatos formában lévő adatokat exportáljuk ki tagolt szöveges állományba. Például magyar Excel esetén választhatjuk a <code>CSV (pontosvesszővel tagolt)</code>, vagy a <code>Szöveges (tabulátorral tagolt)</code> formátumot. Érdemes minden esetben megőrizni a táblázatkezelő saját formátumában az adatokat, mert a kényelmes szerkesztés miatt továbbra is abban érdemes az adatokat módosítani, de a változtatások után, utolsó lépésként, végezzük el az exportot a tagolt szöveges állományba.</p>
</div>
<div id="a-read.table-család" class="section level4" number="6.1.2.2">
<h4>
<span class="header-section-number">6.1.2.2</span> A <code>read.table()</code> család<a class="anchor" aria-label="anchor" href="#a-read.table-csal%C3%A1d"><i class="fas fa-link"></i></a>
</h4>
<p>Tagolt szöveges állományok beolvasásának hagyományos módja a <code><a href="https://rdrr.io/r/utils/read.table.html">read.table()</a></code> függvénycsalád használata. Azért nevezzük függvénycsaládnak, mert valójában több függvényt használhatunk, amelyek csak a paraméterek alapértelmezett értékében térnek el egymástól:</p>
<ul>
<li>
<code>read.table(sep="", dec=".")</code>,</li>
<li>
<code>read.csv(sep=",", dec=".")</code>,</li>
<li>
<code>read.csv2(sep=";", dec=",")</code>,</li>
<li>
<code>read.delim(sep="\t", dec=".")</code>,</li>
<li>
<code>read.delim2(sep="\t", dec=",")</code>.</li>
</ul>
<p>Érdemes a fenti függvénynevek megtanulása helyett egyetlen függvényt, a <code><a href="https://rdrr.io/r/utils/read.table.html">read.table()</a></code>-t használni, és inkább a lehetséges paraméterek jelentését tanuljuk meg:</p>
<ul>
<li>
<code>file=</code><br>
A beolvasandó állomány elérési útja.</li>
<li>
<code>sep=</code><br>
Az elválasztó karakter a beolvasandó állományban. Tipikus értékei: <code>sep=";"</code>, <code>sep=" "</code>, <code>sep=","</code>, és tabulátor elválasztó esetén <code>sep="\t"</code>.</li>
<li>
<code>dec=</code><br>
A decimális elválasztó, vagyis a tizedesvessző alakja az állományban. Tipikusan a <code>dec=","</code> beállítást kell használnunk, de előfordulhat, hogy a pont a tizedes elválasztó, így a <code>dec="."</code>-ra van szükségünk.</li>
<li>
<code>header=</code><br>
Ha van fejléc a szöveges állományban, akkor <code>header=TRUE</code>, egyébként a <code>header=FALSE</code> beállítást használjuk.</li>
<li>
<code>na.strings=</code><br>
A hiányzó érték jelölése a szöveges állományban. Az alapértelmezett beállítás a legtöbb esetben megfelelő, hiszen a <code>""</code> (semmi) és az <code>"NA"</code> jelölésből alapértelmezés szerint hiányzó érték lesz.</li>
<li>
<code>comment.char=</code><br>
A tipikus megjegyzés karakter a <code>#</code>, de meg tudjuk változtatni, ha szükséges.</li>
<li>
<code>skip=</code><br>
A szöveges állomány első néhány sorát figyelmen kívül hagyhatjuk.</li>
<li>
<code>stringsAsFactors=</code><br>
A <code>stringsAsFactors=TRUE</code> beállítással elérhetjük a karakteres oszlopok automatikus faktorrá konvertálását.</li>
<li>
<code>fileEncoding=</code><br>
A szöveges állományt alkotó karakterek kódolási szabványát adhatjuk meg. Tipikusan az UTF-8 kódolású szöveges állományok beolvasása során kell használnunk (<code>fileEncoding="UTF-8"</code>), de a magyar környezetben készült szöveges állományok esetében is rögzíthetjük a kódolási szabványt (<code>fileEncoding="latin2"</code>).</li>
<li>
<code>strip.white=</code><br>
A felesleges szóközök és tabulátorok eltávolítása az adatok elejéről és végéről.</li>
<li>
<code>quote=</code><br>
A szöveges állományban lévő adatvédő idézőjelek alakja.</li>
</ul>
<p>Végezzük el az <code>egyetem.csv</code> tagolt szöveges állomány beolvasását, amelynek első néhány sora a következő:</p>
<div class="sourceCode" id="cb298"><pre class="sourceCode txt"><code class="sourceCode default"><span id="cb298-1"><a href="beolvasas.html#cb298-1" aria-hidden="true" tabindex="-1"></a>hallgato;Height;neme;lefekves;felkeles;Drink</span>
<span id="cb298-2"><a href="beolvasas.html#cb298-2" aria-hidden="true" tabindex="-1"></a>1;67;female;-2,5;5,5;víz</span>
<span id="cb298-3"><a href="beolvasas.html#cb298-3" aria-hidden="true" tabindex="-1"></a>2;64;female;1,5;8;üdítő</span>
<span id="cb298-4"><a href="beolvasas.html#cb298-4" aria-hidden="true" tabindex="-1"></a>3;61;female;-1,5;7,5;tej</span></code></pre></div>
<p>A beolvasandó állományunk egy első sorában oszlopneveket tartalmazó szöveges állomány, amelynek a tartalmát a következő parancsok egy <code>d.df</code> adattáblában helyezik el. Az állományban az adatokat (és az oszlopneveket is) a pontosvessző (<code>;</code>) választja el, a numerikus értékekben pedig tizedesvessző szerepel.</p>
<div class="sourceCode" id="cb299"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data.file</span> <span class="op">&lt;-</span> <span class="st">"https://github.com/abarik/rdata/raw/master/r_alapok/egyetem.csv"</span></span>
<span><span class="va">d.df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.table</a></span><span class="op">(</span>file <span class="op">=</span> <span class="va">data.file</span>, header<span class="op">=</span><span class="cn">T</span>, </span>
<span>                                     sep<span class="op">=</span><span class="st">";"</span>, </span>
<span>                                     dec<span class="op">=</span><span class="st">","</span>, </span>
<span>                                     strip.white <span class="op">=</span> <span class="cn">T</span>, </span>
<span>                                     stringsAsFactors <span class="op">=</span> <span class="cn">F</span>, </span>
<span>                                     fileEncoding <span class="op">=</span> <span class="st">"latin2"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">d.df</span><span class="op">)</span></span>
<span><span class="co">#&gt; 'data.frame':    657 obs. of  6 variables:</span></span>
<span><span class="co">#&gt;  $ hallgato: int  1 2 3 4 5 6 7 8 9 10 ...</span></span>
<span><span class="co">#&gt;  $ Height  : num  67 64 61 61 70 63 61 64 66 65 ...</span></span>
<span><span class="co">#&gt;  $ neme    : chr  "female" "female" "female" "female" ...</span></span>
<span><span class="co">#&gt;  $ lefekves: num  -2.5 1.5 -1.5 2 0 1 1.5 0.5 -0.5 2.5 ...</span></span>
<span><span class="co">#&gt;  $ felkeles: num  5.5 8 7.5 8.5 9 8.5 7.5 7.5 7 8.5 ...</span></span>
<span><span class="co">#&gt;  $ Drink   : chr  "víz" "üdítő" "tej" "víz" ...</span></span></code></pre></div>
</div>
</div>
<div id="beolvasas-1-summary" class="section level3" number="6.1.3">
<h3>
<span class="header-section-number">6.1.3</span> Összefoglalás<a class="anchor" aria-label="anchor" href="#beolvasas-1-summary"><i class="fas fa-link"></i></a>
</h3>
<div class="rmdsummary">
<p>
A statisztikai munka első lépése az adatbázisok, adatmátrixok
beolvasása. Adatainkat legkényelmesebb Excel vagy LibreOffice Calc
táblázatkezelők saját formátumú adatállományiban tárolni
(<code>XLSX</code>, <code>ODS</code>), de néha nem kerülhetjük el a
tagolt szöveges állományok használatát. A táblázatkezelők
adatállományait a <strong>rio</strong> csomag <code><a href="https://rdrr.io/pkg/rio/man/import.html">import()</a></code>
függvényével olvashatjuk be, a tagolt szöveges állományokat a
<code><a href="https://rdrr.io/r/utils/read.table.html">read.table()</a></code> függvénnyel.
</p>
</div>
</div>
<div id="beolvasas-1-exercise" class="section level3" number="6.1.4">
<h3>
<span class="header-section-number">6.1.4</span> Feladatok<a class="anchor" aria-label="anchor" href="#beolvasas-1-exercise"><i class="fas fa-link"></i></a>
</h3>

<div class="rmdexercise">
<ol style="list-style-type: decimal">
<li>Olvassuk be a <code>https://onlinestatbook.com/2/case_studies/data/leniency.xls</code> Excel állományt, állapítsuk meg hány sora és oszlopa van.</li>
<li>Olvassuk be a <code>https://vincentarelbundock.github.io/Rdatasets/csv/DAAG/socsupport.csv</code> tagolt szöveges állományt, állapítsuk meg hány sora és oszlopa van.</li>
</ol>
</div>
<p><svg aria-hidden="true" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:forestgreen;overflow:visible;position:relative;"><path d="M182.6 246.6C170.1 259.1 149.9 259.1 137.4 246.6L57.37 166.6C44.88 154.1 44.88 133.9 57.37 121.4C69.87 108.9 90.13 108.9 102.6 121.4L159.1 178.7L297.4 41.37C309.9 28.88 330.1 28.88 342.6 41.37C355.1 53.87 355.1 74.13 342.6 86.63L182.6 246.6zM182.6 470.6C170.1 483.1 149.9 483.1 137.4 470.6L9.372 342.6C-3.124 330.1-3.124 309.9 9.372 297.4C21.87 284.9 42.13 284.9 54.63 297.4L159.1 402.7L393.4 169.4C405.9 156.9 426.1 156.9 438.6 169.4C451.1 181.9 451.1 202.1 438.6 214.6L182.6 470.6z"></path></svg><a href="#beolvasas-1-exercise-solution">A fenti feladatok megoldása</a></p>
</div>
</div>
<div id="a-tidyverse-r-és-az-inline-beolvasás" class="section level2" number="6.2">
<h2>
<span class="header-section-number">6.2</span> A Tidyverse R és az inline beolvasás<a class="anchor" aria-label="anchor" href="#a-tidyverse-r-%C3%A9s-az-inline-beolvas%C3%A1s"><i class="fas fa-link"></i></a>
</h2>

<div class="rmdlevel2">
<p>Ebben a fejezetben áttekintjük</p>
<ul>
<li><p>az inline beolvasás eseteit és</p></li>
<li>
<p>a tagolt szöveges állományok <em>Tidyverse R</em> beolvasását.</p>
</li>
</ul>
</div>

<div id="a-read_delim-függvénycsalád" class="section level3" number="6.2.1">
<h3>
<span class="header-section-number">6.2.1</span> A <code>read_delim()</code> függvénycsalád<a class="anchor" aria-label="anchor" href="#a-read_delim-f%C3%BCggv%C3%A9nycsal%C3%A1d"><i class="fas fa-link"></i></a>
</h3>
<p>A <em>Tidyverse R</em> is képes a tagolt szöveges állományok beolvasására, és rendszerint gyorsabb, jobban paraméterezhető lehetőséget nyújt. Lényeges különbség az előző részben látott <code><a href="https://rdrr.io/r/utils/read.table.html">read.table()</a></code> családhoz képest, hogy minden esetben <em>tibble</em> típusú adattábla a beolvasás eredménye.</p>
<p>A <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_delim()</a></code> család tagjai:</p>
<ul>
<li>
<code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_delim()</a></code>,</li>
<li>
<code>read_csv</code>,</li>
<li>
<code>read_csv2</code>,</li>
<li>
<code>read_tsv</code>.</li>
</ul>
<p>Minden esetben használjuk a <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_delim()</a></code> függvényt, amely nagyon hasonló paraméterekkel rendelkezik, mint a <code><a href="https://rdrr.io/r/utils/read.table.html">read.table()</a></code>:</p>
<ul>
<li>
<code>file=</code><br>
Ugyanaz, mint a <code><a href="https://rdrr.io/r/utils/read.table.html">read.table()</a></code> függvénynél.</li>
<li>
<code>delim=</code><br>
Ugyanaz, mint a <code><a href="https://rdrr.io/r/utils/read.table.html">read.table()</a></code> függvénynél a <code>sep=</code> argumentum.</li>
<li>
<code>locale=</code><br>
A decimális elválasztó és a kódolási szabvány beállításához a <code><a href="https://readr.tidyverse.org/reference/locale.html">locale()</a></code> függvényt használjuk. Ha a szokásos vessző a tizedes vessző alakja, akkor a <code>locale = locale(decimal_mark = ",")</code>, egyébként a <code>locale = locale(decimal_mark = ".")</code> beállítást használjuk. Ha a kódolási szabványt is be szeretnénk állítani a vessző decimális elválasztó mellett, akkor a <code>locale = locale(decimal_mark = ".", encoding = "UTF-8")</code> beállításra van szükségünk az UTF-8 beállításához.</li>
<li>
<code>col_names=</code><br>
Ugyanaz, mint a <code><a href="https://rdrr.io/r/utils/read.table.html">read.table()</a></code> függvénynél a <code>header=</code> argumentum.</li>
<li>
<code>na=</code><br>
Ugyanaz, mint a <code><a href="https://rdrr.io/r/utils/read.table.html">read.table()</a></code> függvénynél a <code>na.strings=</code> argumentum.</li>
<li>
<code>comment=</code><br>
Ugyanaz, mint a <code><a href="https://rdrr.io/r/utils/read.table.html">read.table()</a></code> függvénynél a <code>comment.char=</code> argumentum.</li>
<li>
<code>skip=</code><br>
Ugyanaz, mint a <code><a href="https://rdrr.io/r/utils/read.table.html">read.table()</a></code> függvénynél.</li>
<li>
<code>trim_ws</code><br>
Ugyanaz, mint a <code><a href="https://rdrr.io/r/utils/read.table.html">read.table()</a></code> függvénynél a <code>strip.white=</code> argumentum.</li>
<li>
<code>quote</code><br>
Ugyanaz, mint a <code><a href="https://rdrr.io/r/utils/read.table.html">read.table()</a></code> függvénynél.</li>
</ul>
<p>Végezzük el a már korábban megismert <code>egyetem.csv</code> tagolt szöveges állomány beolvasását a <em>Tidyverse R</em> segítségével:</p>
<div class="sourceCode" id="cb300"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data.file</span> <span class="op">&lt;-</span> <span class="st">"https://github.com/abarik/rdata/raw/master/r_alapok/egyetem.csv"</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span>
<span><span class="va">d.tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_delim</a></span><span class="op">(</span>file <span class="op">=</span> <span class="va">data.file</span>, col_names<span class="op">=</span><span class="cn">T</span>, </span>
<span>                                      delim<span class="op">=</span><span class="st">";"</span>, </span>
<span>                                      locale<span class="op">=</span><span class="fu"><a href="https://readr.tidyverse.org/reference/locale.html">locale</a></span><span class="op">(</span>decimal_mark<span class="op">=</span><span class="st">","</span>, encoding <span class="op">=</span> <span class="st">"latin2"</span><span class="op">)</span>, </span>
<span>                                      trim_ws<span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">d.tbl</span><span class="op">)</span></span>
<span><span class="co">#&gt; spec_tbl_df [657 × 6] (S3: spec_tbl_df/tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;  $ hallgato: num [1:657] 1 2 3 4 5 6 7 8 9 10 ...</span></span>
<span><span class="co">#&gt;  $ Height  : num [1:657] 67 64 61 61 70 63 61 64 66 65 ...</span></span>
<span><span class="co">#&gt;  $ neme    : chr [1:657] "female" "female" "female" "female" ...</span></span>
<span><span class="co">#&gt;  $ lefekves: num [1:657] -2.5 1.5 -1.5 2 0 1 1.5 0.5 -0.5 2.5 ...</span></span>
<span><span class="co">#&gt;  $ felkeles: num [1:657] 5.5 8 7.5 8.5 9 8.5 7.5 7.5 7 8.5 ...</span></span>
<span><span class="co">#&gt;  $ Drink   : chr [1:657] "víz" "üdítő" "tej" "víz" ...</span></span>
<span><span class="co">#&gt;  - attr(*, "spec")=</span></span>
<span><span class="co">#&gt;   .. cols(</span></span>
<span><span class="co">#&gt;   ..   hallgato = col_double(),</span></span>
<span><span class="co">#&gt;   ..   Height = col_double(),</span></span>
<span><span class="co">#&gt;   ..   neme = col_character(),</span></span>
<span><span class="co">#&gt;   ..   lefekves = col_double(),</span></span>
<span><span class="co">#&gt;   ..   felkeles = col_double(),</span></span>
<span><span class="co">#&gt;   ..   Drink = col_character()</span></span>
<span><span class="co">#&gt;   .. )</span></span>
<span><span class="co">#&gt;  - attr(*, "problems")=&lt;externalptr&gt;</span></span></code></pre></div>
</div>
<div id="inline-beolvasás" class="section level3" number="6.2.2">
<h3>
<span class="header-section-number">6.2.2</span> Inline beolvasás<a class="anchor" aria-label="anchor" href="#inline-beolvas%C3%A1s"><i class="fas fa-link"></i></a>
</h3>
<p>Ebben a könyvben a külső adatállományokból való beolvasás mellet az inline adatbeolvasást is részletesen bemutatjuk. Kisebb adatbázisok, egyszerűbb adatfeldolgozás esetén az adatokat közvetlenül a parancsállományokban is elhelyezhetjük, ezt nevezzük <em>sorok közötti</em>, vagy más néven <em>inline</em> adatbeolvasásának. A szokásos eset azonban a külső adatállományból való adatbeolvasás.</p>
<p>Az adatok inline beolvasása azt jelenti, hogy nem külső állományból, hanem az R parancsállományba gépelt adatokból indulunk ki. Felhasználjuk a <code><a href="https://rdrr.io/r/base/c.html">c()</a></code>, <code><a href="https://rdrr.io/r/base/factor.html">factor()</a></code> és a <code><a href="https://rdrr.io/r/base/data.frame.html">data.frame()</a></code> függvényeket az <em>Alap R</em>-ből, valamint a <code><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble()</a></code> vagy <code><a href="https://tibble.tidyverse.org/reference/tribble.html">tribble()</a></code> függvényeket a <em>Tidyverse R</em>-ből. Esetleg használhatjuk az állományok beolvasását végző, most megismert <code><a href="https://rdrr.io/r/utils/read.table.html">read.table()</a></code> (<em>Alap R</em>) és <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_delim()</a></code> (<em>Tidyverse R</em>) függvénycsaládokat is.</p>
<p>A legegyszerűbb adatfeldolgozási feladatok egyetlen változót érintenek, ezek pedig numerikus vektorban vagy faktorban tárolhatók az R-ben. Ez az inline beolvasás legegyszerűbb esete.</p>
<div class="sourceCode" id="cb301"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 4 óvodás testmagassága cm-ben</span></span>
<span><span class="va">magassag</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">132</span>, <span class="fl">143</span>, <span class="fl">129</span>, <span class="fl">145</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">magassag</span><span class="op">)</span>  <span class="co"># testmagasság átlaga</span></span>
<span><span class="co">#&gt; [1] 137.2</span></span>
<span><span class="co"># a 4 óvodás neme</span></span>
<span><span class="va">nem</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"fiú"</span>, <span class="st">"lány"</span>, <span class="st">"lány"</span>, <span class="st">"fiú"</span><span class="op">)</span>, levels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"fiú"</span>, <span class="st">"lány"</span><span class="op">)</span><span class="op">)</span> </span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">nem</span>, useNA <span class="op">=</span> <span class="st">"ifany"</span><span class="op">)</span>  <span class="co"># gyakorisági táblázat a nemre</span></span>
<span><span class="co">#&gt; nem</span></span>
<span><span class="co">#&gt;  fiú lány </span></span>
<span><span class="co">#&gt;    2    2</span></span></code></pre></div>
<p>Több változó tárolása esetén <em>adattábla</em> (<em>data frame</em>) vagy <em>tibble</em> típusú objektumot hozunk létre a korábban már megismert <code><a href="https://rdrr.io/r/base/data.frame.html">data.frame()</a></code> és <code><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble()</a></code> függvények segítségével. Előkészítő lépésként természetesen az oszlopokat alkotó vektorokra is szükség van.</p>
<div class="sourceCode" id="cb302"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span>
<span><span class="va">magassag</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">132</span>, <span class="fl">143</span>, <span class="fl">129</span>, <span class="fl">145</span><span class="op">)</span></span>
<span><span class="va">nem</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"fiú"</span>, <span class="st">"lány"</span>, <span class="st">"lány"</span>, <span class="st">"fiú"</span><span class="op">)</span>, levels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"fiú"</span>, <span class="st">"lány"</span><span class="op">)</span><span class="op">)</span> </span>
<span><span class="va">d.df</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="va">magassag</span>, <span class="va">nem</span><span class="op">)</span> <span class="co"># data frame létrehozása</span></span>
<span><span class="va">d.tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span><span class="va">magassag</span>, <span class="va">nem</span><span class="op">)</span>     <span class="co"># tibble létrehozása</span></span></code></pre></div>
<p>A létrehozott adattáblák is nagyon hasonlítanak egymásra, és felhasználásuk is azonos módon történik:</p>
<div class="sourceCode" id="cb303"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d.df</span>    <span class="co"># data frame</span></span>
<span><span class="co">#&gt;   magassag  nem</span></span>
<span><span class="co">#&gt; 1      132  fiú</span></span>
<span><span class="co">#&gt; 2      143 lány</span></span>
<span><span class="co">#&gt; 3      129 lány</span></span>
<span><span class="co">#&gt; 4      145  fiú</span></span>
<span><span class="va">d.tbl</span>   <span class="co"># tibble</span></span>
<span><span class="co">#&gt; # A tibble: 4 × 2</span></span>
<span><span class="co">#&gt;   magassag nem  </span></span>
<span><span class="co">#&gt;      &lt;dbl&gt; &lt;fct&gt;</span></span>
<span><span class="co">#&gt; 1      132 fiú  </span></span>
<span><span class="co">#&gt; 2      143 lány </span></span>
<span><span class="co">#&gt; 3      129 lány </span></span>
<span><span class="co">#&gt; 4      145 fiú</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">d.df</span><span class="op">$</span><span class="va">magassag</span><span class="op">)</span>                <span class="co"># testmagasság átlaga</span></span>
<span><span class="co">#&gt; [1] 137.2</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">d.tbl</span><span class="op">$</span><span class="va">magassag</span><span class="op">)</span>               <span class="co"># testmagasság átlaga</span></span>
<span><span class="co">#&gt; [1] 137.2</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">d.df</span><span class="op">$</span><span class="va">nem</span>, useNA <span class="op">=</span> <span class="st">"ifany"</span><span class="op">)</span>   <span class="co"># gyakorisági táblázat a nemre</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  fiú lány </span></span>
<span><span class="co">#&gt;    2    2</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">d.tbl</span><span class="op">$</span><span class="va">nem</span>, useNA <span class="op">=</span> <span class="st">"ifany"</span><span class="op">)</span>  <span class="co"># gyakorisági táblázat a nemre</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  fiú lány </span></span>
<span><span class="co">#&gt;    2    2</span></span></code></pre></div>
<p>Nem kell feltétlenül az adattáblát alkotó oszlopokat külön numerikus vagy faktor oszlopokban előzőleg elkészíteni, ezeket a <code><a href="https://rdrr.io/r/base/data.frame.html">data.frame()</a></code> vagy <code><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble()</a></code> argumentumába közvetlenül is beírhatjuk:</p>
<div class="sourceCode" id="cb304"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d.df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span></span>
<span>  magassag <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">132</span>, <span class="fl">143</span>, <span class="fl">129</span>, <span class="fl">145</span><span class="op">)</span>,</span>
<span>  nem <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"fiú"</span>, <span class="st">"lány"</span>, <span class="st">"lány"</span>, <span class="st">"fiú"</span><span class="op">)</span>, levels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"fiú"</span>, <span class="st">"lány"</span><span class="op">)</span><span class="op">)</span> </span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">d.tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span></span>
<span>  magassag <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">132</span>, <span class="fl">143</span>, <span class="fl">129</span>, <span class="fl">145</span><span class="op">)</span>,</span>
<span>  nem <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"fiú"</span>, <span class="st">"lány"</span>, <span class="st">"lány"</span>, <span class="st">"fiú"</span><span class="op">)</span>, levels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"fiú"</span>, <span class="st">"lány"</span><span class="op">)</span><span class="op">)</span> </span>
<span><span class="op">)</span></span></code></pre></div>
<p>Tibble létrehozásának másik módja a <code><a href="https://tibble.tidyverse.org/reference/tribble.html">tribble()</a></code> függvény, amelynek argumentumába táblázatos formában adhatjuk meg az adatokat. A változóneveket a <code>~</code> karakter vezeti be, minden adatértéket és oszlopnevet vessző választ el egymástól a <code><a href="https://tibble.tidyverse.org/reference/tribble.html">tribble()</a></code> argumentumában.</p>
<div class="sourceCode" id="cb305"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d.tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html">tribble</a></span><span class="op">(</span></span>
<span>  <span class="op">~</span><span class="va">magassag</span>,  <span class="op">~</span><span class="va">nem</span>,</span>
<span>  <span class="fl">132</span>, <span class="st">"fiú"</span>,</span>
<span>  <span class="fl">143</span>, <span class="st">"lány"</span>,</span>
<span>  <span class="fl">129</span>, <span class="st">"lány"</span>,</span>
<span>  <span class="fl">145</span>, <span class="st">"fiú"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">d.tbl</span></span>
<span><span class="co">#&gt; # A tibble: 4 × 2</span></span>
<span><span class="co">#&gt;   magassag nem  </span></span>
<span><span class="co">#&gt;      &lt;dbl&gt; &lt;chr&gt;</span></span>
<span><span class="co">#&gt; 1      132 fiú  </span></span>
<span><span class="co">#&gt; 2      143 lány </span></span>
<span><span class="co">#&gt; 3      129 lány </span></span>
<span><span class="co">#&gt; 4      145 fiú</span></span></code></pre></div>
<p>Vegyük észre, hogy a <code>nem</code> oszlop a fenti példában karakteres vektor, a faktorrá alakításáról a <code><a href="https://rdrr.io/r/base/factor.html">factor()</a></code> függvénnyel gondoskodnunk kell.</p>
<div class="sourceCode" id="cb306"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d.tbl</span><span class="op">$</span><span class="va">nem</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">d.tbl</span><span class="op">$</span><span class="va">nem</span>, levels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"fiú"</span>, <span class="st">"lány"</span><span class="op">)</span><span class="op">)</span> </span>
<span><span class="va">d.tbl</span></span>
<span><span class="co">#&gt; # A tibble: 4 × 2</span></span>
<span><span class="co">#&gt;   magassag nem  </span></span>
<span><span class="co">#&gt;      &lt;dbl&gt; &lt;fct&gt;</span></span>
<span><span class="co">#&gt; 1      132 fiú  </span></span>
<span><span class="co">#&gt; 2      143 lány </span></span>
<span><span class="co">#&gt; 3      129 lány </span></span>
<span><span class="co">#&gt; 4      145 fiú</span></span></code></pre></div>
<p>A <code><a href="https://rdrr.io/r/utils/read.table.html">read.table()</a></code> és <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_delim()</a></code> függvénycsaládokat is használhatjuk inline beolvasásra. Mindkét esetben egy inline, szóközzel tagolt szöveges állományt illesztettünk a kódba, ennek megfelelően állítottuk be az elválasztó karaktereket. A <code><a href="https://rdrr.io/r/utils/read.table.html">read.table()</a></code> esetében körbevettük a <code><a href="https://rdrr.io/r/base/textconnections.html">textConnection()</a></code> függvénnyel is a beillesztett adatokat, erre a <em>Tidyverse R</em> <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_delim()</a></code>-jénél már nincs szükség. A <code>nem</code> faktorrá konvertálásáról se felejtkezzünk el.</p>
<div class="sourceCode" id="cb307"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d.df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.table</a></span><span class="op">(</span>file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/textconnections.html">textConnection</a></span><span class="op">(</span><span class="st">"</span></span>
<span><span class="st">magassag nem</span></span>
<span><span class="st">132 fiú</span></span>
<span><span class="st">143 lány</span></span>
<span><span class="st">129 lány</span></span>
<span><span class="st">145 fiú</span></span>
<span><span class="st">"</span><span class="op">)</span>, header<span class="op">=</span><span class="cn">T</span>, sep<span class="op">=</span><span class="st">" "</span><span class="op">)</span></span>
<span><span class="va">d.df</span><span class="op">$</span><span class="va">nem</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">d.df</span><span class="op">$</span><span class="va">nem</span>, levels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"fiú"</span>, <span class="st">"lány"</span><span class="op">)</span><span class="op">)</span> </span>
<span><span class="va">d.df</span></span>
<span><span class="co">#&gt;   magassag  nem</span></span>
<span><span class="co">#&gt; 1      132  fiú</span></span>
<span><span class="co">#&gt; 2      143 lány</span></span>
<span><span class="co">#&gt; 3      129 lány</span></span>
<span><span class="co">#&gt; 4      145  fiú</span></span>
<span><span class="va">d.tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_delim</a></span><span class="op">(</span><span class="st">"</span></span>
<span><span class="st">magassag nem</span></span>
<span><span class="st">132 fiú</span></span>
<span><span class="st">143 lány</span></span>
<span><span class="st">129 lány</span></span>
<span><span class="st">145 fiú</span></span>
<span><span class="st">"</span>, col_names<span class="op">=</span><span class="cn">T</span>, delim<span class="op">=</span><span class="st">" "</span><span class="op">)</span></span>
<span><span class="va">d.tbl</span><span class="op">$</span><span class="va">nem</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">d.tbl</span><span class="op">$</span><span class="va">nem</span>, levels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"fiú"</span>, <span class="st">"lány"</span><span class="op">)</span><span class="op">)</span> </span>
<span><span class="va">d.tbl</span></span>
<span><span class="co">#&gt; # A tibble: 4 × 2</span></span>
<span><span class="co">#&gt;   magassag nem  </span></span>
<span><span class="co">#&gt;      &lt;dbl&gt; &lt;fct&gt;</span></span>
<span><span class="co">#&gt; 1      132 fiú  </span></span>
<span><span class="co">#&gt; 2      143 lány </span></span>
<span><span class="co">#&gt; 3      129 lány </span></span>
<span><span class="co">#&gt; 4      145 fiú</span></span></code></pre></div>
</div>
<div id="beolvasas-2-summary" class="section level3" number="6.2.3">
<h3>
<span class="header-section-number">6.2.3</span> Összefoglalás<a class="anchor" aria-label="anchor" href="#beolvasas-2-summary"><i class="fas fa-link"></i></a>
</h3>
<div class="rmdsummary">
<p>
swwwww
</p>
</div>
</div>
<div id="beolvasas-2-exercise" class="section level3" number="6.2.4">
<h3>
<span class="header-section-number">6.2.4</span> Feladatok<a class="anchor" aria-label="anchor" href="#beolvasas-2-exercise"><i class="fas fa-link"></i></a>
</h3>

<div class="rmdexercise">
<p>sadadasda</p>
</div>
<p><svg aria-hidden="true" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:forestgreen;overflow:visible;position:relative;"><path d="M182.6 246.6C170.1 259.1 149.9 259.1 137.4 246.6L57.37 166.6C44.88 154.1 44.88 133.9 57.37 121.4C69.87 108.9 90.13 108.9 102.6 121.4L159.1 178.7L297.4 41.37C309.9 28.88 330.1 28.88 342.6 41.37C355.1 53.87 355.1 74.13 342.6 86.63L182.6 246.6zM182.6 470.6C170.1 483.1 149.9 483.1 137.4 470.6L9.372 342.6C-3.124 330.1-3.124 309.9 9.372 297.4C21.87 284.9 42.13 284.9 54.63 297.4L159.1 402.7L393.4 169.4C405.9 156.9 426.1 156.9 438.6 169.4C451.1 181.9 451.1 202.1 438.6 214.6L182.6 470.6z"></path></svg><a href="#beolvasas-2-exercise-solution">A fenti feladatok megoldása</a></p>
</div>
</div>
<div id="kiírás-és-más-lehetőségek" class="section level2" number="6.3">
<h2>
<span class="header-section-number">6.3</span> Kiírás és más lehetőségek<a class="anchor" aria-label="anchor" href="#ki%C3%ADr%C3%A1s-%C3%A9s-m%C3%A1s-lehet%C5%91s%C3%A9gek"><i class="fas fa-link"></i></a>
</h2>

<div class="rmdlevel3">
<p>Ebben a fejezetben áttekintjük</p>
<ul>
<li><p>a tagolt szöveges állományok kiírását</p></li>
<li><p>objektumok olvasását és írását bináris állományokba,</p></li>
<li><p>más statisztikai programcsomagok adatállományainak olvasását és írását, és</p></li>
<li>
<p>a fix széles mezővel rendelkező állományok olvasását.</p>
</li>
</ul>
</div>

<div id="tagolt-szöveges-állomány-kiírása" class="section level3" number="6.3.1">
<h3>
<span class="header-section-number">6.3.1</span> Tagolt szöveges állomány kiírása<a class="anchor" aria-label="anchor" href="#tagolt-sz%C3%B6veges-%C3%A1llom%C3%A1ny-ki%C3%ADr%C3%A1sa"><i class="fas fa-link"></i></a>
</h3>
<p>Adattáblák és mátrixok kiírására a <code><a href="https://rdrr.io/r/utils/write.table.html">write.table()</a></code> függvényt használhatjuk az <em>Alap R</em>-ből és a <code><a href="https://readr.tidyverse.org/reference/write_delim.html">write_delim()</a></code> függvényt a <em>Tidyverse R</em>-ből. Mindkét függvény egy-egy függvénycsalád reprezentánsa, de az <em>Alap R</em>-ből elegendő ismerni az említett tagot, a <em>Tidyverse R</em>-ből pedig az említetten kívül a <code><a href="https://readr.tidyverse.org/reference/write_delim.html">write_csv2()</a></code> függvényt. Néhány új argumentummal kell megismerkednünk, a korábban tanult argumentumok jelentését még egyszer nem soroljuk fel.</p>
<p>A <code><a href="https://rdrr.io/r/utils/write.table.html">write.table()</a></code> mátrixok és adattáblák kiírására is alkalmas, míg a <code><a href="https://readr.tidyverse.org/reference/write_delim.html">write_delim()</a></code> és a <code><a href="https://readr.tidyverse.org/reference/write_delim.html">write_csv2()</a></code> csak az adattáblákat rögzíti. Az első paraméter (<code>x=</code>) a kiírandó objektum neve mindhárom függvény esetében.</p>
<p>Az első példában a <code><a href="https://rdrr.io/r/utils/write.table.html">write.table()</a></code> függvénnyel egy mátrixot és a korábban létrehozott <code>d.df</code> adattáblát írjuk ki. A <code>row.names=</code> és a <code>col.names=</code> logikai paraméterek szabályozzák, hogy a sor és oszlopnevek szerepeljenek-e a kimeneti állományban. Ezek alapértelmezett értéke <code>TRUE</code>.</p>
<div class="sourceCode" id="cb308"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x.mat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">12</span>, nrow<span class="op">=</span><span class="fl">3</span><span class="op">)</span>                              <span class="co"># mátrix létrehozása</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html">write.table</a></span><span class="op">(</span><span class="va">x.mat</span>, <span class="st">"output/adat/x_mat.txt"</span>, col.names<span class="op">=</span><span class="cn">F</span>, row.names<span class="op">=</span><span class="cn">F</span><span class="op">)</span> <span class="co"># kiírása</span></span>
<span><span class="co"># adattábla kiírása</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html">write.table</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">d.df</span>, file <span class="op">=</span> <span class="st">"output/adat/df_out.txt"</span>, sep <span class="op">=</span> <span class="st">"\t"</span>, quote <span class="op">=</span> <span class="cn">F</span>,            </span>
<span>            dec <span class="op">=</span> <span class="st">","</span>, row.names <span class="op">=</span> <span class="cn">F</span>, col.names <span class="op">=</span> <span class="cn">T</span>, fileEncoding <span class="op">=</span> <span class="st">"UTF-8"</span><span class="op">)</span></span></code></pre></div>
<p>A Tidyverse kiíró függvényei UTF-8 kódolású állományt hoznak létre minden esetben, és a decimális elválasztó alakja <code><a href="https://readr.tidyverse.org/reference/write_delim.html">write_delim()</a></code> esetében pont, <code><a href="https://readr.tidyverse.org/reference/write_delim.html">write_csv2()</a></code> esetében pedig vessző. A sornevek soha nem íródnak ki, az oszlopnevek kiírását a <code>col_names=</code> argumentummal szabályozhatjuk.</p>
<div class="sourceCode" id="cb309"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span>
<span><span class="co"># tabulátorral tagolt szöveges állomány létrehozása</span></span>
<span><span class="fu"><a href="https://readr.tidyverse.org/reference/write_delim.html">write_delim</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">d.tbl</span>, file <span class="op">=</span> <span class="st">"output/adat/tbl_out.txt"</span>, delim <span class="op">=</span> <span class="st">"\t"</span>, col_names <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span><span class="co"># pontosvesszővel tagolt szöveges állomány létrehozása</span></span>
<span><span class="fu"><a href="https://readr.tidyverse.org/reference/write_delim.html">write_csv2</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">d.tbl</span>, file <span class="op">=</span> <span class="st">"output/adat/tbl_out.csv"</span>, col_names <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="r-objektumok-írása-és-olvasása" class="section level3" number="6.3.2">
<h3>
<span class="header-section-number">6.3.2</span> R objektumok írása és olvasása<a class="anchor" aria-label="anchor" href="#r-objektumok-%C3%ADr%C3%A1sa-%C3%A9s-olvas%C3%A1sa"><i class="fas fa-link"></i></a>
</h3>
<p>Az R-rel való munka során sok objektummal dolgozunk, többségük külső állományok beolvasásával jön létre, melyeket aztán a munka során változatos módon manipulálunk. Az <em>adattábla</em> és a <em>tibble</em> típusú objektumok képezik a statisztikai munka kiinduló pontját. Egyéb objektumok mentéséről eddig nem beszéltünk, pedig a munka során ezek mentése és beolvasása is érdekes lehet.</p>
<p>Egy objektum értékét eltárolhatjuk szöveges állományban a <code><a href="https://rdrr.io/r/base/dput.html">dput()</a></code> függvénnyel, és visszaolvashatjuk a <code><a href="https://rdrr.io/r/base/dput.html">dget()</a></code>-tel:</p>
<div class="sourceCode" id="cb310"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://www.stats.ox.ac.uk/pub/MASS4/">MASS</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dput.html">dput</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">survey</span>, file <span class="op">=</span> <span class="st">"output/adat/dput_out.txt"</span><span class="op">)</span>  <span class="co"># survey kiírása txt-be         </span></span>
<span><span class="va">d.df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/dput.html">dget</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"output/adat/dput_out.txt"</span><span class="op">)</span>      <span class="co"># survey beolvasása txt-ből        </span></span></code></pre></div>
<p>Igazán gyors kiírást és visszaolvasást nem várhatunk a szöveges állományoktól, így nagyobb adatbázisok esetében (is) érdemes az objektumok bináris mentését és visszaállítását választani. A <code><a href="https://rdrr.io/r/base/readRDS.html">saveRDS()</a></code> és a <code><a href="https://rdrr.io/r/base/readRDS.html">readRDS()</a></code> <em>Alap R</em> függvényekkel tudjuk megoldani, hogy az R saját <code>RDS</code> formátumú bináris állományába tudjunk lementeni és visszatölteni egy objektumot.</p>
<div class="sourceCode" id="cb311"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># survey kiírása bináris állományba</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">saveRDS</a></span><span class="op">(</span>object <span class="op">=</span> <span class="va">survey</span>, file <span class="op">=</span> <span class="st">"output/adat/survey.rds"</span><span class="op">)</span> </span>
<span><span class="co"># survey beolvasása bináris állományból</span></span>
<span><span class="va">d.df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">readRDS</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"output/adat/survey.rds"</span><span class="op">)</span>          </span></code></pre></div>
<p>A <em>Tidyverse R</em> <code><a href="https://readr.tidyverse.org/reference/read_rds.html">write_rds()</a></code> és <code><a href="https://readr.tidyverse.org/reference/read_rds.html">read_rds()</a></code> függvényei ugyanezt a tevékenységet végzik, de alapértelmezés szerint nem tömörítenek, így némileg gyorsabb működést biztosítanak:</p>
<div class="sourceCode" id="cb312"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span>
<span><span class="co"># survey kiírása bináris állományba</span></span>
<span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_rds.html">write_rds</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">survey</span>, file <span class="op">=</span> <span class="st">"output/adat/survey_2.rds"</span><span class="op">)</span></span>
<span><span class="co"># survey beolvasása bináris állományból</span></span>
<span><span class="va">d.df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_rds.html">read_rds</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"output/adat/survey_2.rds"</span><span class="op">)</span></span></code></pre></div>
<p>Egyszerre több objektumok tárolását is elvégezhetjük az R másik saját bináris formátuma, az <code>RData</code> segítségével. A <code><a href="https://rdrr.io/r/base/save.html">save()</a></code> függvényben felsoroljuk a tárolni kívánt objektumok nevét, és megadunk egy <code>.RData</code> kiterjesztésű állományt. A visszaolvasás a <code><a href="https://rdrr.io/r/base/load.html">load()</a></code> segítségével történik. Figyeljük meg, hogy a <code><a href="https://rdrr.io/r/base/load.html">load()</a></code> használata során nincs szükség az értékadás (<code>&lt;-</code>) operátorra, mert az <code>RData</code> állomány tartalmazza az objektumneveket is, így ezekkel a nevekkel jönnek létre a munkaterületen a bináris állományban eltárolt objektumok. Az azonos nevű, már létező objektumokat figyelmeztetés nélkül felülírja a <code><a href="https://rdrr.io/r/base/load.html">load()</a></code>, így legyünk óvatosak a függvény használatával.</p>
<div class="sourceCode" id="cb313"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># survey és Animals kiírása bináris állományba</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/save.html">save</a></span><span class="op">(</span><span class="va">survey</span>, <span class="va">Animals</span>, file <span class="op">=</span> <span class="st">"output/adat/MASS_2.RData"</span><span class="op">)</span></span>
<span><span class="co"># survey és Animals beolvasása bináris állományból</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/load.html">load</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"output/adat/MASS_2.RData"</span><span class="op">)</span></span></code></pre></div>
<p>Az összes objektum, amely pillanatnyilag a munkaterületen tartózkodik, elmenthető a <code><a href="https://rdrr.io/r/base/save.html">save.image()</a></code> segítségével. Visszatöltés szintén a <code><a href="https://rdrr.io/r/base/load.html">load()</a></code>-dal lehetséges.</p>
<div class="sourceCode" id="cb314"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># minden objektum mentése bináris állományba a munkaterületről</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/save.html">save.image</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"output/adat/osszes_obj.RData"</span><span class="op">)</span></span>
<span><span class="co"># az objektumok beolvasása a munkaterületre</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/load.html">load</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"output/adat/osszes_obj.RData"</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="más-típusú-adatállományok" class="section level3" number="6.3.3">
<h3>
<span class="header-section-number">6.3.3</span> Más típusú adatállományok<a class="anchor" aria-label="anchor" href="#m%C3%A1s-t%C3%ADpus%C3%BA-adat%C3%A1llom%C3%A1nyok"><i class="fas fa-link"></i></a>
</h3>
<p>Az R számos más formátumú adatállomány beolvasását támogatja az eddig tanultakon kívül. Például az <em>Alap R</em> <strong>foreign</strong> csomagja DBF, Stata, Minitab, SPSS, SAS és Epi adatállományokat is be tud olvasni. A <em>Tidyverse R</em> <strong>haven</strong> csomagja SPSS, Stata, és SAS fájlokat, a <strong>readxl</strong> csomagja pedig Excel <code>.xls</code> és <code>.xlsx</code> állományokat is. Json állományokat olvashatunk be a <strong>jsonlite</strong>, XML állományokat az <strong>xml2</strong> csomaggal.</p>
<p>A <strong>rio</strong> csomag különleges pozícióban van, ugyanis minden eddig felsorolt adatállomány beolvasását támogatja egyetlen parancs, az <code><a href="https://rdrr.io/pkg/rio/man/import.html">import()</a></code> segítségével. A beolvasandó állomány kiterjesztéséből tudni fogja, hogy pontosan milyen módon (melyik csomag megfelelő függvénye segítségével) olvassa be az adatállományt. Az <code><a href="https://rdrr.io/pkg/rio/man/import.html">import()</a></code> támogatja az <em>adattábla</em> és a <em>tibble</em> létrehozását is a <code>setclass=</code> argumentuma segítségével.</p>
<p>Példaképp pontosvesszővel tagolt szöveges, SPSS és XLSX állományokat olvasunk be:</p>
<div class="sourceCode" id="cb315"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/leeper/rio">rio</a></span><span class="op">)</span></span>
<span><span class="va">data.file</span> <span class="op">&lt;-</span> <span class="st">"https://github.com/abarik/rdata/raw/master/r_alapok/egyetem.csv"</span></span>
<span><span class="va">d.df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span>file <span class="op">=</span> <span class="va">data.file</span>, sep<span class="op">=</span><span class="st">";"</span>, header<span class="op">=</span><span class="cn">T</span>, dec<span class="op">=</span><span class="st">","</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">d.df</span><span class="op">)</span></span>
<span><span class="co">#&gt; 'data.frame':    657 obs. of  6 variables:</span></span>
<span><span class="co">#&gt;  $ hallgato: int  1 2 3 4 5 6 7 8 9 10 ...</span></span>
<span><span class="co">#&gt;  $ Height  : num  67 64 61 61 70 63 61 64 66 65 ...</span></span>
<span><span class="co">#&gt;  $ neme    : chr  "female" "female" "female" "female" ...</span></span>
<span><span class="co">#&gt;  $ lefekves: num  -2.5 1.5 -1.5 2 0 1 1.5 0.5 -0.5 2.5 ...</span></span>
<span><span class="co">#&gt;  $ felkeles: num  5.5 8 7.5 8.5 9 8.5 7.5 7.5 7 8.5 ...</span></span>
<span><span class="co">#&gt;  $ Drink   : chr  "v\xedz" "\xfcd\xedt\xf5" "tej" "v\xedz" ...</span></span>
<span><span class="va">data.file</span> <span class="op">&lt;-</span> <span class="st">"https://github.com/abarik/rdata/raw/master/r_alapok/nepesseg.sav"</span></span>
<span><span class="va">d.df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span>file <span class="op">=</span> <span class="va">data.file</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">d.df</span><span class="op">)</span></span>
<span><span class="co">#&gt; 'data.frame':    12 obs. of  4 variables:</span></span>
<span><span class="co">#&gt;  $ HONAP   : num  1 2 3 4 5 6 7 8 9 10 ...</span></span>
<span><span class="co">#&gt;   ..- attr(*, "label")= chr "Hónap 1994-ben"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "format.spss")= chr "F5.0"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "display_width")= int 12</span></span>
<span><span class="co">#&gt;   ..- attr(*, "labels")= Named num [1:12] 1 2 3 4 5 6 7 8 9 10 ...</span></span>
<span><span class="co">#&gt;   .. ..- attr(*, "names")= chr [1:12] "január" "február" "március" "április" ...</span></span>
<span><span class="co">#&gt;  $ NEPESSEG: num  10273 10270 10267 10265 10262 ...</span></span>
<span><span class="co">#&gt;   ..- attr(*, "label")= chr "Népesség száma hó végén"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "format.spss")= chr "F5.0"</span></span>
<span><span class="co">#&gt;  $ ELVESZUL: num  10238 9285 10105 9617 9548 ...</span></span>
<span><span class="co">#&gt;   ..- attr(*, "label")= chr "Élveszületések száma"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "format.spss")= chr "F5.0"</span></span>
<span><span class="co">#&gt;  $ HALAL   : num  13888 12825 12516 11753 12328 ...</span></span>
<span><span class="co">#&gt;   ..- attr(*, "label")= chr "Halálozások száma"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "format.spss")= chr "F5.0"</span></span>
<span><span class="va">data.file</span> <span class="op">&lt;-</span> <span class="st">"https://github.com/abarik/rdata/raw/master/r_alapok/pothoff2.xlsx"</span></span>
<span><span class="va">d.tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rio/man/import.html">import</a></span><span class="op">(</span>file <span class="op">=</span> <span class="va">data.file</span>, setclass <span class="op">=</span> <span class="st">"tibble"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">d.tbl</span><span class="op">)</span></span>
<span><span class="co">#&gt; tibble [108 × 5] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;  $ person: num [1:108] 1 1 1 1 2 2 2 2 3 3 ...</span></span>
<span><span class="co">#&gt;  $ sex   : chr [1:108] "F" "F" "F" "F" ...</span></span>
<span><span class="co">#&gt;  $ age   : num [1:108] 8 10 12 14 8 10 12 14 8 10 ...</span></span>
<span><span class="co">#&gt;  $ y     : num [1:108] 21 20 21.5 23 21 21.5 24 25.5 20.5 24 ...</span></span>
<span><span class="co">#&gt;  $ agefac: num [1:108] 8 10 12 14 8 10 12 14 8 10 ...</span></span></code></pre></div>
<p>A <strong>rio</strong> csomag univerzális állománykiíró függvénye az <code><a href="https://rdrr.io/pkg/rio/man/export.html">export()</a></code>. Szintén a kiírandó állomány kiterjesztése dönti el, hogy pontosan melyik konkrét függvényt fogja működtetni az <code><a href="https://rdrr.io/pkg/rio/man/export.html">export()</a></code>, ennek megfelelően a háttérben lévő függvény argumentumaival esetlegesen mi is bővíthetjük az <code><a href="https://rdrr.io/pkg/rio/man/export.html">export()</a></code> argumentumlistáját. A következő példákban pontosvesszővel tagolt, SPSS, SAS, XLSX és RDS adatállományokat hozunk létre:</p>
<div class="sourceCode" id="cb316"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/rio/man/export.html">export</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">d.df</span>, file <span class="op">=</span> <span class="st">"output/adat/rio_out.csv"</span>, dec<span class="op">=</span><span class="st">","</span>, sep<span class="op">=</span><span class="st">";"</span><span class="op">)</span> <span class="co"># CSV</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/rio/man/export.html">export</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">d.df</span>, file <span class="op">=</span> <span class="st">"output/adat/rio_out.sav"</span><span class="op">)</span>                  <span class="co"># SPSS</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/rio/man/export.html">export</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">d.df</span>, file <span class="op">=</span> <span class="st">"output/adat/rio_out.sas7bdat"</span><span class="op">)</span>              <span class="co"># SAS</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/rio/man/export.html">export</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">d.df</span>, file <span class="op">=</span> <span class="st">"output/adat/rio_out.xlsx"</span><span class="op">)</span>                <span class="co"># Excel   </span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/rio/man/export.html">export</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">d.df</span>, file <span class="op">=</span> <span class="st">"output/adat/rio_out.ods"</span><span class="op">)</span>      <span class="co"># LibreOffice Calc</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/rio/man/export.html">export</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">d.df</span>, file <span class="op">=</span> <span class="st">"output/adat/rio_out.RDS"</span><span class="op">)</span>                   <span class="co"># RDS</span></span></code></pre></div>
</div>
<div id="adatok-csomagokban" class="section level3" number="6.3.4">
<h3>
<span class="header-section-number">6.3.4</span> Adatok csomagokban<a class="anchor" aria-label="anchor" href="#adatok-csomagokban"><i class="fas fa-link"></i></a>
</h3>
<p>Az adatelemzési munkánk R-ben az adattáblák létrehozásával kezdődik. Az adatokat külső adatállományból többféle módszerrel beolvashatjuk, illetve inline módon is létrehozhatjuk (lásd @ref(#beolvas-alapveto) fejezet). Azonban számos csomag tartalmaz saját adattáblát, amelyeket használhatunk az R megismerése során is. A csomagokban elérhető adattáblák nevét és rövid leírását a <code><a href="https://rdrr.io/r/utils/data.html">data()</a></code> függvény segítségével ismerhetjük meg.</p>
<div class="sourceCode" id="cb317"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span>package<span class="op">=</span><span class="st">"MASS"</span><span class="op">)</span>                            <span class="co"># a MASS csomagban lévő adattáblák</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="op">)</span>                                          <span class="co"># betöltött csomagokban lévő adattáblák</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span>package <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/zpackages.html">.packages</a></span><span class="op">(</span>all.available <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="co"># a telepített csomagokban lévő adattáblák</span></span></code></pre></div>
<p>Amennyiben egy adattáblára szükségünk van egy csomagból, akkor a csomag betöltése nélkül is elérhetjük az adattáblát:</p>
<div class="sourceCode" id="cb318"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">survey</span>, package<span class="op">=</span><span class="st">"MASS"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">survey</span><span class="op">)</span></span>
<span><span class="co">#&gt;      Sex Wr.Hnd NW.Hnd W.Hnd    Fold Pulse    Clap Exer Smoke Height      M.I</span></span>
<span><span class="co">#&gt; 1 Female   18.5   18.0 Right  R on L    92    Left Some Never  173.0   Metric</span></span>
<span><span class="co">#&gt; 2   Male   19.5   20.5  Left  R on L   104    Left None Regul  177.8 Imperial</span></span>
<span><span class="co">#&gt; 3   Male   18.0   13.3 Right  L on R    87 Neither None Occas     NA     &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4   Male   18.8   18.9 Right  R on L    NA Neither None Never  160.0   Metric</span></span>
<span><span class="co">#&gt; 5   Male   20.0   20.0 Right Neither    35   Right Some Never  165.0   Metric</span></span>
<span><span class="co">#&gt; 6 Female   18.0   17.7 Right  L on R    64   Right Some Never  172.7 Imperial</span></span>
<span><span class="co">#&gt;     Age</span></span>
<span><span class="co">#&gt; 1 18.25</span></span>
<span><span class="co">#&gt; 2 17.58</span></span>
<span><span class="co">#&gt; 3 16.92</span></span>
<span><span class="co">#&gt; 4 20.33</span></span>
<span><span class="co">#&gt; 5 23.67</span></span>
<span><span class="co">#&gt; 6 21.00</span></span></code></pre></div>
<p>A szokásos eljárás azonban a csomag betöltése, amely után az adattábla nevét szabadon használhatjuk:</p>
<div class="sourceCode" id="cb319"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org">tidyr</a></span><span class="op">)</span></span>
<span><span class="va">smiths</span></span>
<span><span class="co">#&gt; # A tibble: 2 × 5</span></span>
<span><span class="co">#&gt;   subject     time   age weight height</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;      &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 John Smith     1    33     90   1.87</span></span>
<span><span class="co">#&gt; 2 Mary Smith     1    NA     NA   1.54</span></span></code></pre></div>
<p>Ha az adattábla részletesebb leírására vagyunk kíváncsiak egy betöltött csomagból, akkor a <code>?</code> operátort vagy a <code><a href="https://rdrr.io/r/utils/help.html">help()</a></code> függvényt is használhatjuk:</p>
<div class="sourceCode" id="cb320"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="va">survey</span>                        <span class="co"># a survey leírása (MASS be van töltve)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/help.html">help</a></span><span class="op">(</span>topic <span class="op">=</span> <span class="st">"smiths"</span><span class="op">)</span>         <span class="co"># a smiths leírása (tidyr be van töltve)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/help.html">help</a></span><span class="op">(</span><span class="va">smiths</span>, package<span class="op">=</span><span class="st">"tidyr"</span><span class="op">)</span>  <span class="co"># a smiths leírása (tidyr nincs betöltve)</span></span></code></pre></div>
</div>
<div id="fix-széles-mezők" class="section level3" number="6.3.5">
<h3>
<span class="header-section-number">6.3.5</span> Fix széles mezők<a class="anchor" aria-label="anchor" href="#fix-sz%C3%A9les-mez%C5%91k"><i class="fas fa-link"></i></a>
</h3>
<p>Ritkábban szükség lehet fix széles mezőket tartalmazó szöveges állományok beolvasására is. A <code><a href="https://rdrr.io/r/utils/read.fwf.html">read.fwf()</a></code> (<em>Alap R</em>) és <code><a href="https://readr.tidyverse.org/reference/read_fwf.html">read_fwf()</a></code> (<em>Tidyverse R</em>) függvények gondoskodnak arról, hogy az egyes mezőkben lévő adatokat úgy tudjuk azonosítani, hogy az állományban minden sorban azonos, rögzített szélességükkel hivatkozunk rájuk.</p>
<p>Tekintsük a következő fix mezőszélességekkel rendelkező állományt:</p>
<div class="sourceCode" id="cb321"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb321-1"><a href="beolvasas.html#cb321-1" aria-hidden="true" tabindex="-1"></a>nev;telefon;kor</span>
<span id="cb321-2"><a href="beolvasas.html#cb321-2" aria-hidden="true" tabindex="-1"></a>    Ági+3630459785921,2</span>
<span id="cb321-3"><a href="beolvasas.html#cb321-3" aria-hidden="true" tabindex="-1"></a> Zoltán+3630459785942,4</span>
<span id="cb321-4"><a href="beolvasas.html#cb321-4" aria-hidden="true" tabindex="-1"></a>    Bea+3630459785938,6</span></code></pre></div>
<p>Az állomány tartalmaz egy fejlécsort, ami az oszlopok elnevezését segíti, és most pontosvesszővel tagolt. Ez a sor még nem tartozik a fix széles adatmezőkhöz. A következő három sorban azonban 7 pozíción a nevet, 12 pozíción a telefonszámot, 3 pozíción az egy tizedesre pontos életkort soroljuk fel.</p>
<p>Ideiglenesen hozzuk létre ezt az állományt magunk is a <code><a href="https://rdrr.io/r/base/cat.html">cat()</a></code> függvénnyel. A <code><a href="https://rdrr.io/r/base/tempfile.html">tempfile()</a></code> függvényt használjuk egy a rendszerünkben érvényes ideiglenes állomány nevének meghatározására. A <code><a href="https://rdrr.io/r/base/cat.html">cat()</a></code> függvénnyel egy 4 soros szöveges állományt hozunk létre. Az első sor pontosvesszővel elválasztott oszlopneveket tartalmaz, a következő három sor pedig 3 fix széles adatmezőt.</p>
<div class="sourceCode" id="cb322"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempfile</a></span><span class="op">(</span><span class="op">)</span>  <span class="co"># ideiglenes állománynév</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span>file <span class="op">=</span> <span class="va">file</span>, <span class="st">"nev;telefon;kor"</span>,</span>
<span>                 <span class="st">"    Ági+3630459785921,2"</span>,</span>
<span>                 <span class="st">" Zoltán+3630459785942,4"</span>, </span>
<span>                 <span class="st">"    Bea+3630459785938,6"</span>, sep<span class="op">=</span><span class="st">"\n"</span><span class="op">)</span></span></code></pre></div>
<p>A beolvasást az <em>Alap R</em> <code><a href="https://rdrr.io/r/utils/read.fwf.html">read.fwf()</a></code> függvényével végezzük el először. A <code>width=</code> paraméterében kell megadnunk az egyes mezők hosszát. A függvény a megadott mezőhossz értékek alapján egy ideiglenes, tabulátorral elválasztott szöveges állományt hoz létre, amely a <code><a href="https://rdrr.io/r/utils/read.table.html">read.table()</a></code> függvénnyel kerül ténylegesen feldolgozásra. A <code>header=TRUE</code> paraméterrel jelezzük, hogy az első sor oszlopneveket tartalmaz, a <code>sep=</code> paraméter pedig az első sorban használt elválasztó karaktert jelöli. A <code>sep=</code> paraméterre csak akkor van szükség, ha oszlopneveket tartalmazó sort is be akarunk olvasni. Láthatjuk, hogy a függvény által visszaadott adattábla 3 sort és 3 oszlopot tartalmaz.</p>
<div class="sourceCode" id="cb323"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d.df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.fwf.html">read.fwf</a></span><span class="op">(</span>file <span class="op">=</span> <span class="va">file</span>, widths<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">7</span>,<span class="fl">12</span>,<span class="fl">4</span><span class="op">)</span>, header<span class="op">=</span><span class="cn">T</span>, sep<span class="op">=</span><span class="st">";"</span>, dec<span class="op">=</span><span class="st">","</span>, </span>
<span>                 colClasses<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"character"</span>, <span class="st">"character"</span>, <span class="st">"double"</span><span class="op">)</span>, </span>
<span>                 fileEncoding <span class="op">=</span> <span class="st">"UTF-8"</span><span class="op">)</span></span>
<span><span class="va">d.df</span></span>
<span><span class="co">#&gt;       nev      telefon  kor</span></span>
<span><span class="co">#&gt; 1     Ági +36304597859 21.2</span></span>
<span><span class="co">#&gt; 2  Zoltán +36304597859 42.4</span></span>
<span><span class="co">#&gt; 3     Bea +36304597859 38.6</span></span></code></pre></div>
<p>A <em>Tidyverse R</em> <code><a href="https://readr.tidyverse.org/reference/read_fwf.html">read_fwf()</a></code> függvénye nagyon hasonlóan működik. Nem támogatja az oszlopnevek kiolvasását az állományból, így az első sort átlépjük (<code>skip=1</code>) és az oszlopneveket a <code>col_names=</code> argumentumban soroljuk fel, a szélességek megadására használt <code>fwf_width()</code> függvényben. Az oszlopok típusát itt is megadjuk a <code>col_types=</code> argumentumban.</p>
<div class="sourceCode" id="cb324"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span>
<span><span class="va">d.tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_fwf.html">read_fwf</a></span><span class="op">(</span>file <span class="op">=</span> <span class="va">file</span>, skip<span class="op">=</span><span class="fl">1</span>, </span>
<span>                  col_positions <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_fwf.html">fwf_widths</a></span><span class="op">(</span>widths <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">7</span>, <span class="fl">12</span>, <span class="fl">4</span><span class="op">)</span>, </span>
<span>                                             col_names <span class="op">=</span> </span>
<span>                                               <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"nev"</span>, <span class="st">"telefon"</span>, <span class="st">"kor"</span><span class="op">)</span><span class="op">)</span>, </span>
<span>                  locale<span class="op">=</span><span class="fu"><a href="https://readr.tidyverse.org/reference/locale.html">locale</a></span><span class="op">(</span>decimal_mark<span class="op">=</span><span class="st">","</span>, encoding <span class="op">=</span> <span class="st">"UTF-8"</span><span class="op">)</span>, </span>
<span>                  col_types <span class="op">=</span> <span class="st">"ccd"</span><span class="op">)</span></span>
<span><span class="va">d.tbl</span></span>
<span><span class="co">#&gt; # A tibble: 3 × 3</span></span>
<span><span class="co">#&gt;   nev   telefon        kor</span></span>
<span><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt;        &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 Ág    i+3630459785 921  </span></span>
<span><span class="co">#&gt; 2 Zoltá n+3630459785 942  </span></span>
<span><span class="co">#&gt; 3 Bea   +36304597859  38.6</span></span></code></pre></div>
</div>
<div id="beolvasas-3-summary" class="section level3" number="6.3.6">
<h3>
<span class="header-section-number">6.3.6</span> Összefoglalás<a class="anchor" aria-label="anchor" href="#beolvasas-3-summary"><i class="fas fa-link"></i></a>
</h3>
<div class="rmdsummary">
<p>
asdasd
</p>
</div>
</div>
<div id="beolvasas-3-exercise" class="section level3" number="6.3.7">
<h3>
<span class="header-section-number">6.3.7</span> Feladatok<a class="anchor" aria-label="anchor" href="#beolvasas-3-exercise"><i class="fas fa-link"></i></a>
</h3>

<div class="rmdexercise">
1 A <code><a href="https://rdrr.io/r/base/cat.html">cat()</a></code> függvénnyel a <code><a href="https://rdrr.io/r/base/dput.html">dput()</a></code>-hoz hasonlóan szöveges állományba írhatjuk egy karakteres, numerikus vagy logikai vektor értékét. Mindkét függvénnyel végezzük el a kiírást, és vessük össze a kapott szöveges állományok tartalmát!
1. A <a href="https://www.kaggle.com/skateddu/metacritic-games-stats-20112019">Kaggle egyik adatbázisában</a> 4000 videójáték értékelése található. Töltsük le a CSV adatállományt, és nyissuk meg. Keressük meg az <a href="https://www.r-bloggers.com">R-bloggers</a> oldalon az adatállományhoz kapcsolódó cikket, és próbáljunk ki néhány elemző parancsot. A blogger melyik csomag, melyik függvényével végezte a beolvasást?
1. Keressük fel és tanulmányozzuk a <a href="https://www.computerworld.com/article/2921176/great-r-packages-for-data-import-wrangling-visualization.html">Great R packages for data import, wrangling and visualization</a> oldalt! A bevezetésben lefektetett alapelvek közül melyiket erősíti meg ez az oldal?
1. Töltsünk le 10 érdekesnek tűnő adatállományt a <a href="https://www.dataquest.io/blog/free-datasets-for-projects/">19 Places to Find Free Data Sets for Data Science Projects</a> oldalról, és nyissuk meg őket!
</div>
<p><svg aria-hidden="true" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:forestgreen;overflow:visible;position:relative;"><path d="M182.6 246.6C170.1 259.1 149.9 259.1 137.4 246.6L57.37 166.6C44.88 154.1 44.88 133.9 57.37 121.4C69.87 108.9 90.13 108.9 102.6 121.4L159.1 178.7L297.4 41.37C309.9 28.88 330.1 28.88 342.6 41.37C355.1 53.87 355.1 74.13 342.6 86.63L182.6 246.6zM182.6 470.6C170.1 483.1 149.9 483.1 137.4 470.6L9.372 342.6C-3.124 330.1-3.124 309.9 9.372 297.4C21.87 284.9 42.13 284.9 54.63 297.4L159.1 402.7L393.4 169.4C405.9 156.9 426.1 156.9 438.6 169.4C451.1 181.9 451.1 202.1 438.6 214.6L182.6 470.6z"></path></svg><a href="#beolvasas-2-exercise-solution">A fenti feladatok megoldása</a></p>

</div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="az-r-nyelv.html"><span class="header-section-number">5</span> Az R nyelv</a></div>
<div class="next"><a href="adatmanipulacio.html"><span class="header-section-number">7</span> Adatmanipuláció</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#beolvasas"><span class="header-section-number">6</span> Beolvasás</a></li>
<li>
<a class="nav-link" href="#beolvas-alapveto"><span class="header-section-number">6.1</span> Alapvető formátumok</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#t%C3%A1bl%C3%A1zatkezel%C5%91k"><span class="header-section-number">6.1.1</span> Táblázatkezelők</a></li>
<li><a class="nav-link" href="#tagolt-sz%C3%B6veges-%C3%A1llom%C3%A1nyok"><span class="header-section-number">6.1.2</span> Tagolt szöveges állományok</a></li>
<li><a class="nav-link" href="#beolvasas-1-summary"><span class="header-section-number">6.1.3</span> Összefoglalás</a></li>
<li><a class="nav-link" href="#beolvasas-1-exercise"><span class="header-section-number">6.1.4</span> Feladatok</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#a-tidyverse-r-%C3%A9s-az-inline-beolvas%C3%A1s"><span class="header-section-number">6.2</span> A Tidyverse R és az inline beolvasás</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#a-read_delim-f%C3%BCggv%C3%A9nycsal%C3%A1d"><span class="header-section-number">6.2.1</span> A read_delim() függvénycsalád</a></li>
<li><a class="nav-link" href="#inline-beolvas%C3%A1s"><span class="header-section-number">6.2.2</span> Inline beolvasás</a></li>
<li><a class="nav-link" href="#beolvasas-2-summary"><span class="header-section-number">6.2.3</span> Összefoglalás</a></li>
<li><a class="nav-link" href="#beolvasas-2-exercise"><span class="header-section-number">6.2.4</span> Feladatok</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#ki%C3%ADr%C3%A1s-%C3%A9s-m%C3%A1s-lehet%C5%91s%C3%A9gek"><span class="header-section-number">6.3</span> Kiírás és más lehetőségek</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#tagolt-sz%C3%B6veges-%C3%A1llom%C3%A1ny-ki%C3%ADr%C3%A1sa"><span class="header-section-number">6.3.1</span> Tagolt szöveges állomány kiírása</a></li>
<li><a class="nav-link" href="#r-objektumok-%C3%ADr%C3%A1sa-%C3%A9s-olvas%C3%A1sa"><span class="header-section-number">6.3.2</span> R objektumok írása és olvasása</a></li>
<li><a class="nav-link" href="#m%C3%A1s-t%C3%ADpus%C3%BA-adat%C3%A1llom%C3%A1nyok"><span class="header-section-number">6.3.3</span> Más típusú adatállományok</a></li>
<li><a class="nav-link" href="#adatok-csomagokban"><span class="header-section-number">6.3.4</span> Adatok csomagokban</a></li>
<li><a class="nav-link" href="#fix-sz%C3%A9les-mez%C5%91k"><span class="header-section-number">6.3.5</span> Fix széles mezők</a></li>
<li><a class="nav-link" href="#beolvasas-3-summary"><span class="header-section-number">6.3.6</span> Összefoglalás</a></li>
<li><a class="nav-link" href="#beolvasas-3-exercise"><span class="header-section-number">6.3.7</span> Feladatok</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/abarik/aeer/blob/master/06-Beolvasas.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/abarik/aeer/edit/master/06-Beolvasas.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Adatkezelés és egyváltozós elemzések R-ben</strong>" was written by Abari Kálmán. It was last built on 2022-09-13.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
